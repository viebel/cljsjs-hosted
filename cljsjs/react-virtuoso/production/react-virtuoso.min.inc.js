!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("resize-observer-polyfill")):"function"==typeof define&&define.amd?define(["exports","react","resize-observer-polyfill"],e):e((t=t||self).ReactVirtuoso={},t.React,t.ResizeObserver)}(this,(function(t,e,n){"use strict";var r="default"in e?e.default:e;n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var i=e.createContext(void 0);function o(){return(o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function c(t,e,n){return(c=l()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var i=new(Function.bind.apply(t,r));return n&&a(i,n.prototype),i}).apply(null,arguments)}function f(t){var e="function"==typeof Map?new Map:void 0;return(f=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return c(t,arguments,u(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,t)})(t)}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return h(t,void 0);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(t,void 0):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function p(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t,e){return e(t)}:1===e.length?e[0]:function(t,n){var r=function(t){return n(t)};e.slice().reverse().forEach((function(t){var e=r;r=function(n){return t(n,e)}})),r(t)}}function v(t){return function(){var e=p.apply(void 0,arguments);return g(t,e)}}function g(t,e){var n=function(n){return t((function(t){return e(t,n)}))};return{subscribe:n,pipe:v(n)}}function m(t,e){void 0===e&&(e=!0);var n=[],r=t,i=function(t){return n.push(t),void 0!==r&&t(r),function(){n=n.filter((function(e){return e!==t}))}};return{next:function(t){e&&t===r||(r=t,n.forEach((function(e){return e(t)})))},subscribe:i,pipe:v(i),subscribers:n}}function x(){var t=[],e=function(e){return t.push(e),function(){t=t.filter((function(t){return t!==e}))}};return{next:function(e){t.forEach((function(t){return t(e)}))},subscribe:e,pipe:v(e),subscribers:t}}function y(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Array(e.length).fill(!1),i=Array(e.length),o=[],s=function(t){r.every((function(t){return t}))&&t.forEach((function(t){return t(i)}))};e.forEach((function(t,e){t.subscribe((function(t){r[e]=!0,i[e]=t,s(o)}))}));var u=function(t){return o.push(t),s([t]),function(){o=o.filter((function(e){return e!==t}))}};return{subscribe:u,pipe:v(u)}}function $(t){return function(e,n){n(t(e))}}function I(t){return function(e,n){return n(t)}}function C(t){return function(e,n){t>0?t--:n(e)}}function b(t){return function(e,n){t(e)&&n(e)}}function T(t){var e;return void 0===t&&(t=function(t,e){return t!==e}),function(n,r){t(e,n)&&(e=n,r(n))}}function k(t,e){var n=e;return function(e,r){r(n=t(n,e))}}function w(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=Array(e.length).fill(!1),i=Array(e.length);return e.forEach((function(t,e){t.subscribe((function(t){i[e]=t,r[e]=!0}))})),function(t,e){r.every((function(t){return t}))&&e([t].concat(i))}}var S=function(t){var e,n,r=m(!1);return t.pipe(C(1),T(),I(!0)).subscribe(r.next),t.pipe(C(1),I(!1),(function(t,r){e=t,n&&clearTimeout(n),n=setTimeout((function(){r(e)}),200)})).subscribe(r.next),r},H=new(function(){function t(){this.level=0}var e=t.prototype;return e.rebalance=function(){return this},e.adjust=function(){return this},e.shift=function(){return this},e.remove=function(){return this},e.find=function(){},e.findWith=function(){},e.findMax=function(){return-Infinity},e.findMaxValue=function(){},e.insert=function(t,e){return new R({key:t,value:e,level:1})},e.walkWithin=function(){return[]},e.walk=function(){return[]},e.ranges=function(){return[]},e.rangesWithin=function(){return[]},e.empty=function(){return!0},e.isSingle=function(){return!0},e.isInvariant=function(){return!0},e.keys=function(){return[]},t}());Object.freeze(H);var M=function(t){function e(e){return t.call(this,"Unreachable case: "+e)||this}return s(e,t),e}(f(Error)),R=function(){function t(t){var e=t.value,n=t.level,r=t.left,i=void 0===r?H:r,o=t.right,s=void 0===o?H:o;this.key=t.key,this.value=e,this.level=n,this.left=i,this.right=s}var e=t.prototype;return e.shift=function(t){return this.clone({key:this.key+t,left:this.left.shift(t),right:this.right.shift(t)})},e.remove=function(t){var e=this.left,n=this.right;if(t===this.key){if(e.empty())return n;if(n.empty())return e;var r=e.last();return this.clone({key:r[0],value:r[1],left:e.deleteLast()}).adjust()}return t<this.key?this.clone({left:e.remove(t)}).adjust():this.clone({right:n.remove(t)}).adjust()},e.empty=function(){return!1},e.find=function(t){return t===this.key?this.value:t<this.key?this.left.find(t):this.right.find(t)},e.findWith=function(t){var e=t(this.value);switch(e){case-1:return this.left.findWith(t);case 0:return[this.key,this.value];case 1:return this.right.findWith(t);default:throw new M(e)}},e.findMax=function(t){if(this.key===t)return t;if(this.key<t){var e=this.right.findMax(t);return-Infinity===e?this.key:e}return this.left.findMax(t)},e.findMaxValue=function(t){if(this.key===t)return this.value;if(this.key<t){var e=this.right.findMaxValue(t);return void 0===e?this.value:e}return this.left.findMaxValue(t)},e.insert=function(t,e){return t===this.key?this.clone({key:t,value:e}):t<this.key?this.clone({left:this.left.insert(t,e)}).rebalance():this.clone({right:this.right.insert(t,e)}).rebalance()},e.walkWithin=function(t,e){var n=this.key,r=this.value,i=[];return n>t&&(i=i.concat(this.left.walkWithin(t,e))),n>=t&&n<=e&&i.push({key:n,value:r}),n<=e&&(i=i.concat(this.right.walkWithin(t,e))),i},e.walk=function(){return[].concat(this.left.walk(),[{key:this.key,value:this.value}],this.right.walk())},e.last=function(){return this.right.empty()?[this.key,this.value]:this.right.last()},e.deleteLast=function(){return this.right.empty()?this.left:this.clone({right:this.right.deleteLast()}).adjust()},e.clone=function(e){return new t({key:void 0!==e.key?e.key:this.key,value:void 0!==e.value?e.value:this.value,level:void 0!==e.level?e.level:this.level,left:void 0!==e.left?e.left:this.left,right:void 0!==e.right?e.right:this.right})},e.isSingle=function(){return this.level>this.right.level},e.rebalance=function(){return this.skew().split()},e.adjust=function(){var t=this.left,e=this.right,n=this.level;if(e.level>=n-1&&t.level>=n-1)return this;if(n>e.level+1){if(t.isSingle())return this.clone({level:n-1}).skew();if(t.empty()||t.right.empty())throw new Error("Unexpected empty nodes");return t.right.clone({left:t.clone({right:t.right.left}),right:this.clone({left:t.right.right,level:n-1}),level:n})}if(this.isSingle())return this.clone({level:n-1}).split();if(e.empty()||e.left.empty())throw new Error("Unexpected empty nodes");var r=e.left,i=r.isSingle()?e.level-1:e.level;return r.clone({left:this.clone({right:r.left,level:n-1}),right:e.clone({left:r.right,level:i}).split(),level:r.level+1})},e.isInvariant=function(){var t=this.left,e=this.right,n=this.level;return n===t.level+1&&(n===e.level||n===e.level+1)&&!(!e.empty()&&n<=e.right.level)&&t.isInvariant()&&e.isInvariant()},e.keys=function(){return[].concat(this.left.keys(),[this.key],this.right.keys())},e.ranges=function(){return this.toRanges(this.walk())},e.rangesWithin=function(t,e){return this.toRanges(this.walkWithin(t,e))},e.toRanges=function(t){if(0===t.length)return[];for(var e=t[0],n=e.key,r=e.value,i=[],o=1;o<=t.length;o++){var s=t[o];i.push({start:n,end:s?s.key-1:Infinity,value:r}),s&&(n=s.key,r=s.value)}return i},e.split=function(){var t=this.right,e=this.level;return t.empty()||t.right.empty()||t.level!==e||t.right.level!==e?this:t.clone({left:this.clone({right:t.left}),level:e+1})},e.skew=function(){var t=this.left;return t.empty()||t.level!==this.level?this:t.clone({right:this.clone({left:t.right})})},t}(),L=function(){function t(t){this.root=t}t.empty=function(){return new t(H)};var e=t.prototype;return e.find=function(t){return this.root.find(t)},e.findMax=function(t){return this.root.findMax(t)},e.findMaxValue=function(t){if(this.empty())throw new Error("Searching for max value in an empty tree");return this.root.findMaxValue(t)},e.findWith=function(t){return this.root.findWith(t)},e.insert=function(e,n){return new t(this.root.insert(e,n))},e.remove=function(e){return new t(this.root.remove(e))},e.shift=function(e){if(this.empty())return this;var n=this.root.findMaxValue(Infinity);return new t(this.root.shift(e).insert(0,n))},e.empty=function(){return this.root.empty()},e.keys=function(){return this.root.keys()},e.walk=function(){return this.root.walk()},e.walkWithin=function(t,e){var n=this.root.findMax(t);return this.root.walkWithin(n,e)},e.ranges=function(){return this.root.ranges()},e.rangesWithin=function(t,e){var n=this.root.findMax(t);return this.root.rangesWithin(n,e)},e.isInvariant=function(){return this.root.isInvariant()},t}(),z=function(){function t(){}return t.prototype.transpose=function(t){return t.map((function(t){return{groupIndex:0,index:t.index,offset:t.offset,size:t.size,transposedIndex:t.index,type:"item"}}))},t}(),E=function(){function t(t){this.count=t.reduce((function(t,e){return t+e+1}),0);for(var e,n=L.empty(),r=0,i=0,o=d(t);!(e=o()).done;){var s=e.value;n=n.insert(i,[r,i]),r++,i+=s+1}this.tree=n}var e=t.prototype;return e.totalCount=function(){return this.count},e.transpose=function(t){var e=this;return t.map((function(t){var n=e.tree.find(t.index);if(n)return{groupIndex:n[0],index:t.index,offset:t.offset,size:t.size,type:"group"};var r=e.tree.findMaxValue(t.index)[0];return{groupIndex:r,index:t.index,offset:t.offset,size:t.size,transposedIndex:t.index-r-1,type:"item"}}))},e.groupIndices=function(){return this.tree.keys()},t}(),O=function(t){return t.length>0?t[0].offset:0},N=function(){function t(t,e,n,r){if(void 0===e&&(e=L.empty()),void 0===n&&(n=[]),void 0===r&&(r=0),this.initialTopMostItemIndex=0,this.rangeSize=0,this.maxRangeSize=Infinity,this.rangeSizeExceededCallback=function(){},this.rangeTree=t,this.nanIndices=n,this.initialTopMostItemIndex=r,e.empty())for(var i,o=0,s=!1,u=d(t.ranges());!(i=u()).done;){var a=i.value,l=a.start,c=a.end,f=a.value;this.rangeSize++,isNaN(f)?(this.nanIndices.push(l),s||(e=e.insert(o,{startIndex:l,endIndex:Infinity,size:f})),s=!0):s||(e=e.insert(o,{startIndex:l,endIndex:c,size:f}),o+=(c-l+1)*f)}this.offsetTree=e}t.create=function(){return new t(L.empty())};var e=t.prototype;return e.empty=function(){return this.rangeTree.empty()},e.fromTree=function(e){return new t(e,void 0,void 0,this.initialTopMostItemIndex)},e.insert=function(t,e,n){var r=this.rangeTree;if(r.empty())return this.fromTree(r.insert(0,n));if(this.rangeSize>this.maxRangeSize)return this.rangeSizeExceededCallback(),this.fromTree(L.empty().insert(0,this.getDefaultSize()));if(this.nanIndices.length&&this.nanIndices.indexOf(e)>-1){if(r.find(this.nanIndices[0]-1)===n)return this.fromTree(L.empty().insert(0,n));for(var i,o=d(this.nanIndices);!(i=o()).done;)r=r.insert(i.value,n);return this.fromTree(r)}var s=r.rangesWithin(t-1,e+1);if(s.some((function(r){return r.start===t&&(r.end===e||Infinity===r.end)&&r.value===n})))return this;for(var u,a=!1,l=!1,c=d(s);!(u=c()).done;){var f=u.value,h=f.start,p=f.end,v=f.value;a?(e>=h||n===v)&&(r=r.remove(h)):(l=v!==n,a=!0),p>e&&e>=h&&(v===n||isNaN(v)||(r=r.insert(e+1,v)))}return l&&(r=r.insert(t,n)),r===this.rangeTree?this:this.fromTree(r)},e.insertSpots=function(e,n){if(this.empty()){for(var r,i=this.rangeTree,o=d(e);!(r=o()).done;){var s=r.value;i=i.insert(s,n).insert(s+1,NaN)}return new t(i)}throw new Error("attempting to overwrite non-empty tree")},e.offsetOf=function(t){if(this.offsetTree.empty())return 0;var e=this.offsetTree.findWith((function(e){return e.startIndex>t?-1:e.endIndex<t?1:0}));if(e){var n=e[1];return e[0]+(t-n.startIndex)*n.size}throw new Error("Requested offset outside of the known ones, index: "+t)},e.itemAt=function(t){return{index:t,size:this.rangeTree.findMaxValue(t),offset:NaN}},e.indexRange=function(t,e){if(this.rangeTree.empty())return[{index:this.initialTopMostItemIndex,size:0,offset:NaN}];for(var n,r=[],i=d(this.rangeTree.rangesWithin(t,e));!(n=i()).done;)for(var o=n.value,s=Math.max(t,o.start),u=Math.min(e,void 0===o.end?Infinity:o.end),a=s;a<=u;a++)r.push({index:a,size:o.value,offset:NaN});return r},e.range=function(t,e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=Infinity),this.offsetTree.empty())return[{index:this.initialTopMostItemIndex,size:0,offset:0}];for(var i,o=[],s=d(this.offsetTree.rangesWithin(t,e));!(i=s()).done;){var u=i.value,a=u.start,l=u.value,c=l.startIndex,f=l.endIndex,h=l.size,p=a,v=c;if(a<t&&(p+=((v+=Math.floor((t-a)/h))-c)*h),v<n&&(p+=(n-v)*h,v=n),isNaN(h))return o.push({index:v,size:0,offset:p}),o;f=Math.min(f,r);for(var g=v;g<=f&&!(p>e);g++)o.push({index:g,size:h,offset:p}),p+=h}return o},e.total=function(t){for(var e,n=0,r=d(this.rangeTree.rangesWithin(0,t));!(e=r()).done;){var i=e.value,o=i.start,s=i.end,u=i.value;n+=((s=Math.min(s,t))-o+1)*(isNaN(u)?0:u)}return n},e.getOffsets=function(t){var e=this,n=L.empty();return t.forEach((function(t){var r=e.offsetOf(t);n=n.insert(r,t)})),new j(n)},e.setInitialIndex=function(e){return new t(this.rangeTree,this.offsetTree,this.nanIndices,e)},e.getDefaultSize=function(){return this.rangeTree.findMaxValue(Infinity)},e.adjustForPrependedItems=function(t){return this.fromTree(this.rangeTree.shift(t))},e.configureMaxRangeSize=function(t,e){this.maxRangeSize=t,this.rangeSizeExceededCallback=e},t}(),j=function(){function t(t){this.tree=t}var e=t.prototype;return e.findMaxValue=function(t){return this.tree.findMaxValue(t)},e.empty=function(){return this.tree.empty()},t}();function P(t){var e;return function(n){e&&e(),n&&(e=t.subscribe(n))}}function V(t){return t.next}var W=function(t){var e=t.overscan,n=void 0===e?0:e,i=t.totalCount,s=void 0===i?0:i,u=t.itemHeight,a=t.initialTopMostItemIndex,l=t.defaultItemHeight,c=m(new z),f=m(0),h=m(0,!1),p=S(h),v=function(){var t=m([]),e=t.pipe($((function(t){return t.reduce((function(t,e){return t+e.size}),0)}))),n=t.pipe($((function(t){return t.length&&t[t.length-1].index+1})));return{topList$:t,topListHeight$:e,minListIndex$:n}}(),g=v.topList$,C=v.minListIndex$,H=v.topListHeight$,M=function(t){var e=t.totalCount,n=t.itemHeight,r=t.defaultItemHeight,i=t.initialTopMostItemIndex,o=t.viewportHeight$,s=t.scrollTop$,u=t.topList$,a=t.transposer$,l=m(0),c=m(e),f=m(),h=function(t){var e=t.itemHeights$,n=t.viewportHeight$,r=m(),i=m(!1),o=r.subscribe((function(t){e.next([{start:0,end:0,size:30}]),n.next(30*t),i.next(!0),o()}));return{initialItemCount$:r,pendingRenderAfterInitial$:i}}({itemHeights$:f,viewportHeight$:o}),p=h.pendingRenderAfterInitial$,v=h.initialItemCount$,g=x(),I=N.create();n&&(I=I.insert(0,0,n)),r&&(I=I.insert(0,0,r)),i&&(I=I.setInitialIndex(i));var C=m(I),T=function(t){var e=t.offsetList$,n=t.scrollTop$,r=t.topList$,i=t.transposer$,o=m([]),s=y(e,o).pipe($((function(t){return t[0].getOffsets(t[1])})));return y(e,s,n).pipe(b((function(t){return!t[1].empty()&&!t[0].empty()})),w(r,i),$((function(t){var e=t[0],n=e[0],r=t[1],i=t[2],o=e[1].findMaxValue(Math.max(e[2],0));if(1===r.length&&r[0].index===o)return r;var s=n.itemAt(o);return i.transpose([s])}))).subscribe(r.next),{stickyItems$:o}}({offsetList$:C,scrollTop$:s,topList$:u,transposer$:a}).stickyItems$,k=y(C,c,l).pipe($((function(t){var e=t[2];return t[0].total(t[1]-1)+e})));return n||f.pipe(w(C,T,p)).subscribe((function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=n;i&&(o=N.create(),i=!1);for(var s,u=d(e);!(s=u()).done;){var a=s.value,l=a.start,c=a.end,f=a.size;o=o.empty()&&l===c&&r.indexOf(l)>-1?o.insertSpots(r,f):o.insert(l,c,f)}o!==n?(C.next(o),g.next([!0,o])):g.next([!1,o])})),{totalCount$:c,offsetList$:C,totalHeight$:k,footerHeight$:l,initialItemCount$:v,itemHeights$:f,stickyItems$:T,heightsChanged$:g}}({totalCount:s,itemHeight:u,defaultItemHeight:l,initialTopMostItemIndex:a,viewportHeight$:f,scrollTop$:h,transposer$:c,topList$:g}),R=M.stickyItems$,L=M.initialItemCount$,j=M.itemHeights$,W=M.offsetList$,F=M.totalCount$,A=M.footerHeight$,_=M.totalHeight$,B=M.heightsChanged$,K=function(t){var e=t.transposer$,n=t.stickyItems$,r=t.totalCount$,i=m(),o=n.pipe();return i.subscribe((function(t){var i=new E(t);e.next(i),r.next(i.totalCount()),n.next(i.groupIndices())})),{groupCounts$:i,groupIndices$:o}}({totalCount$:F,transposer$:c,stickyItems$:R}),D=K.groupCounts$,G=K.groupIndices$,q=function(t){var e,n=t.totalHeight$,r=t.viewportHeight$,i=t.scrollTop$,o=m(!1);return y(i,r,n).pipe($((function(t){var e=t[1];return 0!==e&&t[0]===t[2]-e}))).subscribe((function(t){clearTimeout(e),t?o.next(!0):e=setTimeout((function(){return o.next(!1)}))})),{scrolledToBottom$:o}}({totalHeight$:_,viewportHeight$:f,scrollTop$:h}).scrolledToBottom$,U=function(t){var e=t.offsetList$,n=t.topListHeight$,r=t.stickyItems$,i=t.viewportHeight$,o=t.totalCount$,s=t.totalHeight$,u=t.initialTopMostItemIndex,a=t.heightsChanged$,l=t.scrollTop$,c=x(),f=m(!1),h=m(!0),d=x(),p=function(t){var e=t.initialTopMostItemIndex,n=t.scrollToIndex$,r=t.scrollTop$,i=t.scrollTo$,o=t.offsetList$,s=m(!e);return r.pipe(w(i,s)).subscribe((function(t){t[0]!==t[1].top||t[2]||setTimeout((function(){s.next(!0)}))})),o.pipe(w(s)).subscribe((function(t){t[1]||setTimeout((function(){n.next(e)}))})),{scrolledToTopMostItem$:s}}({scrollTo$:d,offsetList$:e,scrollToIndex$:c,scrollTop$:l,initialTopMostItemIndex:u}).scrolledToTopMostItem$;return a.pipe(w(p)).subscribe((function(t){!t[0][0]&&t[1]&&(f.next(!1),h.next(!0))})),c.pipe(w(e,n,r,i,o,s),$((function(t){var e,n=t[0],r=t[1],i=t[2],o=t[3],s=t[4],u=t[6];"number"==typeof n&&(n={index:n,align:"start",behavior:"auto"});var a=n.index,l=n.align,c=void 0===l?"start":l;a=Math.max(0,a,Math.min(t[5]-1,a));var f=r.offsetOf(a);return"end"===c?f=f-s+r.itemAt(a).size:"center"===c?f=Math.round(f-s/2+r.itemAt(a).size/2):-1===o.indexOf(a)&&(f-=i),h.next(!1),{top:Math.max(0,Math.min(f,Math.floor(u-s))),behavior:null!==(e=n.behavior)&&void 0!==e?e:"auto"}}))).subscribe(d.next),l.pipe(w(h)).subscribe((function(t){t[1]||(h.next(!0),f.next(!0))})),e.pipe(w(f,c)).subscribe((function(t){t[1]&&c.next(t[2])})),{scrollToIndex$:c,scrollTo$:d,scrolledToTopMostItem$:p}}({initialTopMostItemIndex:a,scrollTop$:h,offsetList$:W,viewportHeight$:f,totalHeight$:_,stickyItems$:R,totalCount$:F,topListHeight$:H,heightsChanged$:B}),Y=U.scrollToIndex$,J=U.scrollTo$,Q=function(t){var e=t.overscan,n=t.defaultItemHeight,r=t.viewportHeight$,i=t.scrollTop$,o=t.topListHeight$,s=t.footerHeight$,u=t.minListIndex$,a=t.totalCount$,l=t.offsetList$,c=t.scrolledToTopMostItem$,f=t.transposer$,h=t.totalHeight$,d=m(0),p=x(),v=m([]),g=m(0);y(i,h,r).pipe($((function(t){return Math.max(0,Math.min(t[0],t[1]-t[2]))}))).subscribe(g.next),y(r,g,o,d,s,u,a,l,c,f).pipe(k((function(t,r){var i=r[0],o=r[1],s=r[2],u=r[3],a=r[4],l=r[5],c=r[6],f=r[7],h=r[8],d=r[9],p=t.length;if(0===c)return[];var v=O(t),g=v-o+u-a-s,m=Math.max(c-1,0);if((g<i||p>0&&(t[0].index<l||t[p-1].index>m))&&(t=d.transpose(f.range(o,o+i+2*e-1,l,m))),v>o){var x=Math.max(o-2*e,0);t=d.transpose(f.range(x,o+i-1,l,m))}return t.length>1&&!h&&!n?[]:t}),[]),T()).subscribe(v.next);var I=y(v,i,o).pipe($((function(t){return O(t[0])}))),C=0;return v.pipe($((function(t){return t.length?t[t.length-1].index:0}))).pipe(w(a)).subscribe((function(t){var e=t[0],n=t[1];0!==n&&e===n-1&&C!==e&&(C=e,p.next(e))})),{list$:v,listOffset$:I,listHeight$:d,endReached$:p}}({overscan:n,defaultItemHeight:l,viewportHeight$:f,scrollTop$:h,totalHeight$:_,topListHeight$:H,footerHeight$:A,minListIndex$:C,totalCount$:F,offsetList$:W,scrolledToTopMostItem$:U.scrolledToTopMostItem$,transposer$:c}),X=Q.listHeight$,Z=Q.list$,tt=Q.listOffset$,et=Q.endReached$,nt=function(t){var e=t.offsetList$,n=t.scrollTop$,r=t.scrollTo$,i=x(),o=m(!1);return i.pipe(w(e,n,o)).subscribe((function(t){var n=t[0],i=t[1],s=t[2];t[3]||i.empty()||(o.next(!0),e.next(i.adjustForPrependedItems(n)),setTimeout((function(){r.next({top:n*i.getDefaultSize()+s}),o.next(!1)})))})),{adjustForPrependedItems$:i,adjustmentInProgress$:o}}({offsetList$:W,scrollTop$:h,scrollTo$:J}),rt=nt.adjustForPrependedItems$,it=nt.adjustmentInProgress$,ot=function(t){var e=t.list$,n=t.offsetList$,r=t.scrollTop$,i=t.scrollTo$,o=m(null),s=m(Infinity);return n.pipe(w(s,r,e)).subscribe((function(t){var e=t[2],n=t[3];return t[0].configureMaxRangeSize(t[1],(function(){o.next({index:n[0].index,offset:e-n[0].offset})}))})),n.pipe(w(o)).subscribe((function(t){var e=t[1];if(null!==e){var n=t[0].offsetOf(e.index)+e.offset;i.next({top:n}),o.next(null)}})),{maxRangeSize$:s}}({scrollTo$:J,offsetList$:W,scrollTop$:h,list$:Z}).maxRangeSize$,st=function(t){var e=t.topList$,n=t.transposer$,r=t.viewportHeight$,i=t.totalCount$,o=t.offsetList$,s=m();return y(o,s,i,r).pipe(b((function(t){return t[1]>0&&t[3]>0})),w(n),$((function(t){var e=t[0],n=e[0],r=t[1],i=Math.max(0,Math.min(e[1]-1,e[2]));return r.transpose(n.indexRange(0,i))}))).subscribe(e.next),{topItemCount$:s}}({offsetList$:W,totalCount$:F,transposer$:c,viewportHeight$:f,topList$:g}).topItemCount$,ut=function(t){var e=t.scrollToIndex$,n=t.scrolledToBottom$,r=t.totalCount$,i=m(!1);return y(i,r).pipe(w(n)).subscribe((function(t){var n=t[0],r=n[1];n[0]&&t[1]&&setTimeout((function(){e.next({index:r-1,align:"end",behavior:"auto"})}))})),{followOutput$:i}}({totalCount$:F,scrollToIndex$:Y,scrolledToBottom$:q}).followOutput$,at=tt.pipe($((function(t){return-t}))),lt=x();Z.pipe(w(it),b((function(t){return 0!==t[0].length&&!t[1]})),$((function(t){var e=t[0];return{startIndex:e[0].index,endIndex:e[e.length-1].index}})),T((function(t,e){return!t||t.startIndex!==e.startIndex||t.endIndex!==e.endIndex}))).subscribe(lt.next);var ct=function(t){var e,n,r=t.isScrolling$,i=t.scrollTop$,o=t.rangeChanged$,s=m(0),u=m(!1),a=m(!1);return r.pipe(b((function(t){return!t})),I(0)).subscribe(s.next),i.pipe((function(t,r){e=t,n||(n=setTimeout((function(){n=void 0,r(e)}),100))}),k((function(t,e){return[t[1],e]}),[0,0]),$((function(t){return t[1]-t[0]}))).subscribe(s.next),s.pipe(w(a,u,o),b((function(t){return!!t[1]})),$((function(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=n.enter;if(r){if((0,n.exit)(e,i))return!1}else if(o(e,i))return!0;return r})),T()).subscribe(u.next),y(u,s,o).pipe(w(a)).subscribe((function(t){var e=t[0],n=t[1];return e[0]&&n&&n.change(e[1],e[2])})),{isSeeking$:u,scrollSeekConfiguration$:a,scrollVelocity$:s}}({scrollTop$:h,isScrolling$:p,rangeChanged$:lt}),ft=ct.isSeeking$,ht=ct.scrollVelocity$,dt=ct.scrollSeekConfiguration$,pt=_.pipe($((function(t){return Math.min(t,15e6)}))),vt=y(_,pt,f).pipe($((function(t){var e=t[0],n=t[1],r=t[2];return e===n?1:(e-r)/(n-r)}))),gt=m(0,!1),mt=y(tt,vt).pipe($((function(t){return t[0]/t[1]})));y(gt,vt).pipe($((function(t){return t[0]*t[1]}))).subscribe(h.next);var xt=m((function(t){return t})),yt=m((function(t,e){return t})),$t=m((function(t){return t})),It=m("div"),Ct=m("div"),bt=m(!1),Tt=m(Symbol("data-key"));return y(yt,$t,dt,xt,It,Ct,Tt).pipe($((function(t){var e=t[0],n=t[1],i=t[2],s=t[3],u=t[4],a=t[5];return{render:function(t,l){var c,f=l.key,h=l.renderPlaceholder,d=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)e.indexOf(n=o[r])>=0||(i[n]=t[n]);return i}(l,["key","renderPlaceholder"]);return s&&(f=s(t.index)),"group"===t.type?r.createElement(a,o({key:f},d),n(t.groupIndex)):(c=i&&h?r.createElement(i.placeholder,{height:d["data-known-size"],index:t.index}):e(t.transposedIndex,t.groupIndex),r.createElement(u,o({},d,{key:f}),c))}}}))).subscribe(bt.next),{groupCounts:V(D),itemHeights:V(j),footerHeight:V(A),listHeight:V(X),viewportHeight:V(f),scrollTop:V(gt),topItemCount:V(st),totalCount:V(F),scrollToIndex:V(Y),initialItemCount:V(L),followOutput:V(ut),adjustForPrependedItems:V(rt),maxRangeSize:V(ot),scrollSeekConfiguration:V(dt),renderProp:V(yt),groupRenderProp:V($t),computeItemKey:V(xt),itemContainer:V(It),groupContainer:V(Ct),dataKey:V(Tt),itemRender:P(bt),list:P(Z),isSeeking:P(ft),scrollVelocity:P(ht),itemsRendered:P(Z),topList:P(g),listOffset:P(mt),totalHeight:P(pt),endReached:P(et),atBottomStateChange:P(q),totalListHeightChanged:P(_),rangeChanged:P(lt),isScrolling:P(p),stickyItems:P(R),groupIndices:P(G),stickyItemsOffset:P(at),scrollTo:P(J)}},F={top:0,position:"absolute",height:"100%",width:"100%"},A=function(t,r,i){var o=e.useRef(null),s=e.useRef(0),u=new n((function(e){var n=Math.round(e[0].contentRect.height);i&&(s.current=window.requestAnimationFrame((function(){var t=e[0].target;document.body.contains(t)&&i(t)}))),t(n)}));return e.useEffect((function(){return function(){return window.cancelAnimationFrame(s.current)}}),[]),function(t){t?(u.observe(t),r&&r(t),o.current=t):(u.unobserve(o.current),o.current=null)}};function _(t,n){var r=e.useState(function(t,e){return function(){var n=e;return t((function(t){n=t})),n}}(t,n)),i=r[0],o=r[1];return e.useEffect((function(){return t(o),function(){return t(void 0)}}),[t]),i}function B(t){var e,n=!1;return function(){return n||(n=!0,e=t()),e}}var K=B((function(){var t=document.createElement("div");return t.style.position="-webkit-sticky","-webkit-sticky"===t.style.position?"-webkit-sticky":"sticky"})),D=function(t){return r.createElement("div",{style:{height:t.height+"px",position:"absolute",top:0}}," ")},G=r.memo((function(){var t=e.useContext(i),n=t.isSeeking,o=t.topList,s=t.itemRender,u=_(t.list,[]),a=_(o,[]),l=_(s,!1),c=_(n,!1),f=[],h=0,d=[],p=a.reduce((function(t,e){return t+e.size}),0);return a.forEach((function(t,e){var n=t.index;d.push(n);var r={top:h+"px",marginTop:0===e?-p+"px":void 0,zIndex:2,position:K()};l&&f.push(l.render(t,{key:n,"data-index":n,"data-known-size":t.size,renderPlaceholder:c,style:r})),h+=t.size})),u.forEach((function(t){d.indexOf(t.index)>-1||l&&f.push(l.render(t,{key:t.index,"data-index":t.index,"data-known-size":t.size,renderPlaceholder:c}))})),r.createElement(r.Fragment,null,f)})),q={height:"40rem",overflowY:"auto",WebkitOverflowScrolling:"touch",position:"relative",outline:"none"},U=function(t){var n=t.className,i=t.style,o=t.reportScrollTop,s=t.scrollTo,u=t.children,a=e.useRef(null),l=e.useRef(null),c=e.useRef(),f=e.useCallback((function(t){var e=t.target.scrollTop;c.current=e,null!==l.current?l.current===e&&(l.current=null,o(e)):o(e)}),[o]),h=e.useCallback((function(t){t?(t.addEventListener("scroll",f,{passive:!0}),a.current=t):a.current&&a.current.removeEventListener("scroll",f)}),[f]);return s((function(t){c.current!==t.top&&("smooth"===t.behavior&&(l.current=t.top),a.current&&a.current.scrollTo(t))})),r.createElement("div",{ref:h,style:i,tabIndex:0,className:n},u)},Y=function(t){var e=t.children,n=t.className,i=t.ScrollContainer,s=t.scrollTop,u=t.scrollTo;return r.createElement(void 0===i?U:i,{style:o({},q,t.style),reportScrollTop:s,scrollTo:u,className:n},e)},J=function(t){return r.createElement("footer",{ref:t.footerRef},t.children)},Q=function(t){return r.createElement("div",{ref:t.listRef,style:t.style},t.children)},X=function(t){var n=t.footer,o=t.FooterContainer,s=void 0===o?J:o,u=A(e.useContext(i).footerHeight);return r.createElement(s,{footerRef:u},n())},Z=function(t){var n=t.fixedItemHeight,o=t.children,s=t.ListContainer,u=e.useContext(i),a=u.listHeight,l=u.itemHeights,c={marginTop:_(u.listOffset,0)+"px"},f=A(a,(function(){}),(function(t){if(!n){var e=function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t.item(n);if(i&&void 0!==i.dataset.index){var o=parseInt(i.dataset.index),s=parseInt(i.dataset.knownSize),u=i.offsetHeight;if(u!==s){var a=e[e.length-1];0===e.length||a.size!==u||a.end!==o-1?e.push({start:o,end:o,size:u}):e[e.length-1].end++}}}return e}(t.children);l(e)}}));return r.createElement(s,{listRef:f,style:c},o)},tt=function(t){var n=t.style,o=t.footer,s=t.fixedItemHeight,u=t.ScrollContainer,a=t.ListContainer,l=t.FooterContainer,c=t.className,f=e.useContext(i),h=f.scrollTo,d=f.scrollTop,p=f.viewportHeight,v=_(f.totalHeight,0),g=A(p);return r.createElement(Y,{style:n,ScrollContainer:u,className:c,scrollTo:h,scrollTop:function(t){d(Math.max(t,0))}},r.createElement("div",{ref:g,style:F},r.createElement(Z,{fixedItemHeight:s,ListContainer:a},r.createElement(G,null),o&&r.createElement(X,{footer:o,FooterContainer:l}))),r.createElement(D,{height:v}))},et={},nt=r.memo((function(t){return r.createElement(i.Provider,{value:t.contextValue},r.createElement(tt,{style:t.style||et,className:t.className,footer:t.footer,fixedItemHeight:void 0!==t.itemHeight,ScrollContainer:t.ScrollContainer,FooterContainer:t.FooterContainer,ListContainer:t.ListContainer||Q}))})),rt=e.forwardRef((function(t,n){var i=e.useState((function(){return W(t)}))[0];return e.useImperativeHandle(n,(function(){return{scrollToIndex:function(t){i.scrollToIndex(t)},adjustForPrependedItems:function(t){i.adjustForPrependedItems(t)}}}),[i]),e.useEffect((function(){return i.isScrolling(t.scrollingStateChange),i.atBottomStateChange(t.atBottomStateChange),i.endReached(t.endReached),i.topItemCount(t.topItems||0),i.totalCount(t.totalCount),t.initialItemCount&&i.initialItemCount(t.initialItemCount),i.itemsRendered(t.itemsRendered),i.totalListHeightChanged(t.totalListHeightChanged),i.followOutput(!!t.followOutput),i.maxRangeSize(t.maxHeightCacheSize||Infinity),i.rangeChanged(t.rangeChanged),i.scrollSeekConfiguration(t.scrollSeek),i.computeItemKey(t.computeItemKey||function(t){return t}),i.itemContainer(t.ItemContainer||"div"),i.renderProp(t.item),i.dataKey(t.dataKey),function(){i.itemsRendered(void 0),i.totalListHeightChanged(void 0)}}),[i,t.scrollingStateChange,t.atBottomStateChange,t.endReached,t.topItems,t.totalCount,t.initialItemCount,t.itemsRendered,t.totalListHeightChanged,t.followOutput,t.maxHeightCacheSize,t.rangeChanged,t.scrollSeek,t.item,t.ItemContainer,t.computeItemKey,t.dataKey]),r.createElement(nt,{contextValue:i,style:t.style,className:t.className,footer:t.footer,itemHeight:t.itemHeight,ScrollContainer:t.ScrollContainer,FooterContainer:t.FooterContainer,ListContainer:t.ListContainer})}));rt.displayName="Virtuoso";var it=e.forwardRef((function(t,n){var i=e.useState(W(t))[0];return e.useImperativeHandle(n,(function(){return{scrollToIndex:function(t){i.scrollToIndex(t)}}}),[i]),e.useEffect((function(){return i.endReached(t.endReached),i.rangeChanged(t.rangeChanged),i.atBottomStateChange(t.atBottomStateChange),i.isScrolling(t.scrollingStateChange),i.groupCounts(t.groupCounts),i.groupIndices(t.groupIndices),i.itemsRendered(t.itemsRendered),i.totalListHeightChanged(t.totalListHeightChanged),i.renderProp(t.item),i.groupRenderProp(t.group),i.itemContainer(t.ItemContainer||"div"),i.groupContainer(t.GroupContainer||"div"),i.scrollSeekConfiguration(t.scrollSeek),function(){i.itemsRendered(void 0),i.totalListHeightChanged(void 0)}}),[i,t.endReached,t.rangeChanged,t.atBottomStateChange,t.scrollingStateChange,t.groupCounts,t.groupIndices,t.itemsRendered,t.totalListHeightChanged,t.item,t.group,t.GroupContainer,t.ItemContainer,t.scrollSeek]),r.createElement(nt,{contextValue:i,style:t.style,className:t.className,footer:t.footer,itemHeight:t.itemHeight,ScrollContainer:t.ScrollContainer,FooterContainer:t.FooterContainer,ListContainer:t.ListContainer})}));it.displayName="GroupedVirtuoso";var ot=Math.ceil,st=Math.floor,ut=Math.min,at=Math.max,lt=function(t){return ot(t)-t<.03?ot(t):st(t)},ct=function(t){void 0===t&&(t=0);var e=m([0,0,void 0,void 0]),n=m(0),r=m(0),i=m(0),o=m([0,at(t-1,0)]),s=m(0),u=m(0),a=x(),l=x();y(e,r,i,n).pipe(w(o)).subscribe((function(t){var e=t[0],n=e[0],r=n[0],i=n[1],a=n[2],c=n[3],f=e[1],h=e[2],d=e[3],p=t[1];if(void 0!==a&&void 0!==c){if(0===d)return o.next([0,-1]),u.next(0),void l.next({startIndex:0,endIndex:-1});var v=p[0],g=p[1],m=lt(r/a),x=function(t,e){return void 0===e&&(e=st),e(t/m)},y=function(t){var e=t?[0,h]:[h,0],n=e[1],r=m*st((f-e[0])/c),s=m*ot((f+i+n)/c)-1;s=ut(d-1,s),r=ut(s,at(0,r)),o.next([r,s]),u.next(x(r)*c),l.next({startIndex:r,endIndex:s})},$=c*x(v),I=c*x(g)+c;d<g-1?y(!0):$>f?y(!1):I<f+i&&y(!0),s.next(c*x(d-g-1,ot))}}));var c=a.pipe(w(e,n),$((function(t){var e=t[0],n=t[1],r=n[0],i=n[1],o=n[2],s=n[3];if(void 0===o||void 0===s)return{top:0,behavior:"auto"};"number"==typeof e&&(e={index:e,align:"start"});var u=e.index,a=e.align,l=void 0===a?"start":a;u=Math.max(0,u,Math.min(t[2]-1,u));var c=lt(r/o),f=st(u/c)*s;return"end"===l?f=f-i+s:"center"===l&&(f=Math.round(f-i/2+s/2)),{top:f,behavior:"auto"}}))),f=S(r),h=x(),d=0;return o.pipe(w(n)).subscribe((function(t){var e=t[0][1],n=t[1];0!==n&&e===n-1&&d!==e&&(d=e,h.next(e))})),{gridDimensions:V(e),totalCount:V(n),scrollTop:V(r),overscan:V(i),scrollToIndex:V(a),itemRange:P(o),remainingHeight:P(s),listOffset:P(u),scrollTo:P(c),isScrolling:P(f),endReached:P(h),rangeChanged:P(l)}},ft=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).state=ct(e.props.initialItemCount),e}s(e,t),e.getDerivedStateFromProps=function(t,e){return e.overscan(t.overscan||0),e.totalCount(t.totalCount),e.isScrolling(t.scrollingStateChange),e.endReached(t.endReached),e.rangeChanged(t.rangeChanged),null};var n=e.prototype;return n.scrollToIndex=function(t){this.state.scrollToIndex(t)},n.render=function(){return r.createElement(ht,Object.assign({},this.props,{engine:this.state}))},e}(r.PureComponent),ht=function(t){var i,o,s,u,a=t.ScrollContainer,l=t.ItemContainer,c=void 0===l?"div":l,f=t.ListContainer,h=void 0===f?"div":f,d=t.className,p=t.item,v=t.itemClassName,g=void 0===v?"virtuoso-grid-item":v,m=t.listClassName,x=void 0===m?"virtuoso-grid-list":m,y=t.engine,$=t.style,I=void 0===$?{height:"40rem"}:$,C=t.computeItemKey,b=void 0===C?function(t){return t}:C,T=y.itemRange,k=y.listOffset,w=y.gridDimensions,S=y.scrollTo,H=y.scrollTop,M=_(y.remainingHeight,0),R={paddingTop:_(k,0)+"px",paddingBottom:M+"px"},L=_(T,[0,0]),z=(i=function(t){var e=t.element.firstChild.firstChild;w([t.width,t.height,e.offsetWidth,e.offsetHeight])},o=e.useRef(null),s=e.useRef([0,0]),u=new n((function(t){var e=t[0].contentRect,n=e.width,r=e.height;s.current[0]===n&&s.current[1]===r||(s.current=[n,r],i({element:t[0].target,width:Math.round(n),height:Math.round(r)}))})),function(t){t?(u.observe(t),o.current=t):(u.unobserve(o.current),o.current=null)});return r.createElement(Y,{style:I,ScrollContainer:a,className:d,scrollTo:S,scrollTop:H},r.createElement("div",{ref:z,style:F},r.createElement(h,{style:R,className:x},function(t,e,n,i,o){for(var s=t[1],u=[],a=t[0];a<=s;a++){var l=o(a);u.push(r.createElement(i,{key:l,className:n},e(a)))}return u}(L,p,g,c,b))))};t.GroupedVirtuoso=it,t.Virtuoso=rt,t.VirtuosoGrid=ft,t.VirtuosoPresentation=nt,Object.defineProperty(t,"__esModule",{value:!0})}));
