!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.skygear=e()}}(function(){var e;return function t(e,n,r){function i(u,a){if(!n[u]){if(!e[u]){var s="function"==typeof require&&require;if(!a&&s)return s(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[u]={exports:{}};e[u][0].call(l.exports,function(t){var n=e[u][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e){return y[e]||0}Object.defineProperty(n,"__esModule",{value:!0});var a,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=e("lodash"),l=r(c),f=e("./role"),h=r(f),p=e("./user"),d=r(p),v={NoAccessLevel:null,ReadOnlyLevel:"read",ReadWriteLevel:"write"};n.AccessLevel=v;var y=(a={},o(a,v.NoAccessLevel,0),o(a,v.ReadOnlyLevel,1),o(a,v.ReadWriteLevel,2),a),g=function(){function e(t){var n=this;i(this,e),this["public"]=v.ReadOnlyLevel,this.roles={},this.users={},t&&!function(){n["public"]=v.NoAccessLevel;var e=n;l["default"].forEach(t,function(t){if(t.level=t.level||v.ReadOnlyLevel,t["public"])u(t.level)>u(e["public"])&&(e["public"]=t.level);else if(t.role){var n=h["default"].define(t.role),r=e.roles[n.name];u(t.level)>u(r)&&(e.roles[n.name]=t.level)}else{if(!t.user_id)throw new Error("Invalid ACL Entry: "+JSON.stringify(t));var i=new d["default"]({user_id:t.user_id}),r=e.users[i.id];u(t.level)>u(r)&&(e.users[i.id]=t.level)}})}()}return s(e,[{key:"toJSON",value:function(){var e=[];return this["public"]&&e.push({"public":!0,level:this["public"]}),l["default"].map(this.roles,function(t,n){t&&e.push({role:n,level:t})}),l["default"].map(this.users,function(t,n){t&&e.push({user_id:n,level:t})}),e}},{key:"setPublicNoAccess",value:function(){this["public"]=v.NoAccessLevel}},{key:"setPublicReadOnly",value:function(){this["public"]=v.ReadOnlyLevel}},{key:"setPublicReadWriteAccess",value:function(){this["public"]=v.ReadWriteLevel}},{key:"setNoAccessForRole",value:function(e){if(!(e&&e instanceof h["default"]))throw new Error(e+" is not a role.");this.roles[e.name]=v.NoAccessLevel}},{key:"setReadOnlyForRole",value:function(e){if(!(e&&e instanceof h["default"]))throw new Error(e+" is not a role.");this.roles[e.name]=v.ReadOnlyLevel}},{key:"setReadWriteAccessForRole",value:function(e){if(!(e&&e instanceof h["default"]))throw new Error(e+" is not a role.");this.roles[e.name]=v.ReadWriteLevel}},{key:"setNoAccessForUser",value:function(e){if(!(e&&e instanceof d["default"]))throw new Error(e+" is not a user.");this.users[e.id]=v.NoAccessLevel}},{key:"setReadOnlyForUser",value:function(e){if(!(e&&e instanceof d["default"]))throw new Error(e+" is not a user.");this.users[e.id]=v.ReadOnlyLevel}},{key:"setReadWriteAccessForUser",value:function(e){if(!(e&&e instanceof d["default"]))throw new Error(e+" is not a user.");this.users[e.id]=v.ReadWriteLevel}},{key:"hasPublicReadAccess",value:function(){return u(this["public"])>=u(v.ReadOnlyLevel)}},{key:"hasPublicWriteAccess",value:function(){return u(this["public"])===u(v.ReadWriteLevel)}},{key:"hasReadAccess",value:function(e){return this.hasReadAccessForRole(e)}},{key:"hasWriteAccess",value:function(e){return this.hasWriteAccessForRole(e)}},{key:"hasReadAccessForRole",value:function(e){if(!(e&&e instanceof h["default"]))throw new Error(e+" is not a role.");return this.hasPublicReadAccess()||u(this.roles[e.name])>=u(v.ReadOnlyLevel)}},{key:"hasWriteAccessForRole",value:function(e){if(!(e&&e instanceof h["default"]))throw new Error(e+" is not a role.");return this.hasPublicWriteAccess()||u(this.roles[e.name])>=u(v.ReadWriteLevel)}},{key:"hasReadAccessForUser",value:function(e){if(!(e&&e instanceof d["default"]))throw new Error(e+" is not a user.");var t=e.roles;if(this.hasPublicReadAccess()||u(this.users[e.id])>=u(v.ReadOnlyLevel))return!0;var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(this.hasReadAccessForRole(s))return!0}}catch(c){r=!0,i=c}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}return!1}},{key:"hasWriteAccessForUser",value:function(e){if(!(e&&e instanceof d["default"]))throw new Error(e+" is not a user.");var t=e.roles;if(this.hasPublicWriteAccess()||u(this.users[e.id])>=u(v.ReadWriteLevel))return!0;var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(this.hasWriteAccessForRole(s))return!0}}catch(c){r=!0,i=c}finally{try{!n&&a["return"]&&a["return"]()}finally{if(r)throw i}}return!1}}],[{key:"fromJSON",value:function(t){return new e(t)}}]),e}();n["default"]=g},{"./role":15,"./user":18,lodash:45}],2:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){for(var t=(0,a.atob)(e),n=new ArrayBuffer(t.length),r=new Uint8Array(n),i=0;i<t.length;i++)r[i]=t.charCodeAt(i);var o=new c["default"]([n]);return o}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("Base64"),s=e("w3c-blob"),c=r(s),l=function(){function e(t){i(this,e),t=t||{};var n=t.name,r=t.file,u=t.contentType,a=t.url,s=t.base64;if(!n)throw new Error("Name should not be empty");if(r){if(!u&&r.type&&(u=r.type),!u)throw new Error("ContentType cannot be inferred from file, please provide a content type manually")}else if(a);else{if(!s)throw new Error("Either file or url should present");r=o(s)}this.name=n,this.file=r,this.contentType=u,this.url=a}return u(e,[{key:"toJSON",value:function(){return{$type:"asset",$name:this.name,$url:this.url}}}],[{key:"fromJSON",value:function(t){return new e({name:t.$name,url:t.$url})}}]),e}();n["default"]=l,t.exports=n["default"]},{Base64:20,"w3c-blob":58}],3:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("lodash"),a=r(u),s=e("./store"),c=r(s),l=function(){function e(t){i(this,e),this.prefix=t,this._keyStore=this.prefix+":keys",this.map={},this.keys=[],this.store=c["default"],this.store.getItem(this._keyStore).then(function(e){var t=JSON.parse(e);this.keys=a["default"].union(this.keys,t)}.bind(this),function(e){console.warn("Failed to get cached keys",this.prefix,e)}.bind(this))}return o(e,[{key:"_key",value:function(e){return this.prefix+":"+e}},{key:"set",value:function(e,t){var n=this._key(e);return new Promise(function(e){this.map[n]=t,this.keys=a["default"].union(this.keys,[n]),this.store.setItem(this._keyStore,JSON.stringify(this.keys)),this.store.setItem(n,JSON.stringify(t)),e()}.bind(this))}},{key:"get",value:function(e){var t=this._key(e);return new Promise(function(e,n){var r=this.map[t];r?e(r):this.store.getItem(t).then(function(t){if(t){var r=JSON.parse(t);e(r)}else n()},function(e){n(e)})}.bind(this))}},{key:"reset",value:function(){var e=this.store,t=a["default"].map(this.keys,function(t){return e.removeItem(t)});return this.keys=[],t.push(this.store.setItem(this._keyStore,JSON.stringify(this.keys))),Promise.all(t)}}]),e}();n["default"]=l,t.exports=n["default"]},{"./store":16,lodash:45}],4:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){if(e&&e.body)return e.body;if(e&&e.text)try{return JSON.parse(e.text)}catch(t){console.log("getRespJSON error. error: ",t)}return{}}Object.defineProperty(n,"__esModule",{value:!0});var u,a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./asset"),c=r(s),l=e("./user"),f=r(l),h=e("./role"),p=r(h),d=e("./acl"),v=r(d),y=e("./record"),g=r(y),_=e("./reference"),m=r(_),b=e("./query"),w=r(b),k=e("./database"),O=r(k),x=e("./pubsub"),A=r(x),S=e("./relation"),R=e("./geolocation"),j=r(R),E=e("./type"),I=e("./error"),T=e("./util"),C=e("superagent"),P=e("lodash"),N=e("./store"),D=e("event-emitter");"undefined"!=typeof window&&(u=e("react-native"));var q="userChanged",L=function(){function e(){i(this,e),this.url="http://ourd.pandawork.com/",this.apiKey=null,this.token=null,this._accessToken=null,this._user=null,this._deviceID=null,this._getAccessToken(),this._getDeviceID(),this._privateDB=null,this._publicDB=null,this.request=C,this._internalPubsub=new A["default"](this,(!0)),this._relation=new S.RelationAction(this),this._pubsub=new A["default"](this,(!1)),this.autoPubsub=!0,this.ee=D({})}return a(e,[{key:"config",value:function(e){e.apiKey&&(this.apiKey=e.apiKey),e.endPoint&&(this.endPoint=e.endPoint);var t=[this._getUser(),this._getAccessToken(),this._getDeviceID()],n=this;return Promise.all(t).then(function(){return n.reconfigurePubsubIfNeeded(),n},function(){return n})}},{key:"configApiKey",value:function(e){this.apiKey=e}},{key:"clearCache",value:function(){var e=[];return this._publicDB&&e.push(this._publicDB.clearCache()),this._privateDB&&e.push(this._privateDB.clearCache()),Promise.all(e)}},{key:"onUserChanged",value:function(e){return this.ee.on(q,e),new T.EventHandle(this.ee,q,e)}},{key:"signupWithUsername",value:function(e,t){return this._signup(e,null,t)}},{key:"signupWithEmail",value:function(e,t){return this._signup(null,e,t)}},{key:"signupAnonymously",value:function(){return this._signup(null,null,null)}},{key:"_signup",value:function(e,t,n){var r=this;return new Promise(function(i,o){r.makeRequest("auth:signup",{username:e,email:t,password:n}).then(r._authResolve.bind(r)).then(i,o)})}},{key:"_authResolve",value:function(e){var t=this;return Promise.all([this._setUser(e.result),this._setAccessToken(e.result.access_token)]).then(function(){return t.reconfigurePubsubIfNeeded(),t.currentUser})}},{key:"loginWithUsername",value:function(e,t){var n=this;return new Promise(function(r,i){n.makeRequest("auth:login",{username:e,password:t}).then(n._authResolve.bind(n)).then(r,i)})}},{key:"loginWithEmail",value:function(e,t){var n=this;return new Promise(function(r,i){n.makeRequest("auth:login",{email:e,password:t}).then(n._authResolve.bind(n)).then(r,i)})}},{key:"loginWithProvider",value:function(e,t){var n=this;return new Promise(function(r,i){n.makeRequest("auth:login",{provider:e,auth_data:t}).then(n._authResolve.bind(n)).then(r,i)})}},{key:"logout",value:function(){var e=this;return this.clearCache(),e.makeRequest("auth:logout",{}).then(function(){return Promise.all([e._setAccessToken(null),e._setUser(null)]).then(function(){return null})},function(t){return e._setAccessToken(null).then(function(){return Promise.reject(t)})})}},{key:"whoami",value:function(){var e=this;return new Promise(function(t,n){e.makeRequest("me",{}).then(e._authResolve.bind(e)).then(t,n)})}},{key:"changePassword",value:function(e,t){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];if(n)throw Error("Invalidate is not yet implements");var r=this;return new Promise(function(n,i){r.makeRequest("auth:password",{old_password:e,password:t}).then(function(e){return r._setAccessToken(e.result.access_token)}).then(n,i)})}},{key:"saveUser",value:function(e){var t=this;return new Promise(function(n,r){var i={_id:e.id,email:e.email,username:e.username};e.roles&&(i.roles=P.map(e.roles,function(e){return e.name})),t.makeRequest("user:update",i).then(function(e){var n=t.User.fromJSON(e.result),r=t.currentUser;return n&&r&&n.id===r.id?t._setUser(e.result):n}).then(function(e){n(e)},function(e){r(e)})})}},{key:"getUsersByEmail",value:function(e){var t=this;return new Promise(function(n,r){t.makeRequest("user:query",{emails:e}).then(function(e){for(var r=e.result,i=r.length,o=new Array(i),u=0;u<i;u++)o[u]=new t.User(r[u].data);n(o)},function(e){r(e)})})}},{key:"discoverUserByEmails",value:function(e){var t=this;return new Promise(function(n,r){var i=new w["default"](t.UserRecord);i.havingEmails(e),t.publicDB.query(i).then(function(e){n(e)},function(e){r(e)})})}},{key:"discoverUserByUsernames",value:function(e){var t=this;return new Promise(function(n,r){var i=new w["default"](t.UserRecord);i.havingUsernames(e),t.publicDB.query(i).then(function(e){n(e)},function(e){r(e)})})}},{key:"setAdminRole",value:function(e){var t=P.map(e,function(e){return e.name}),n=this;return new Promise(function(e,r){n.makeRequest("role:admin",{roles:t}).then(function(t){e(t.result)},function(e){r(e)})})}},{key:"setDefaultRole",value:function(e){var t=P.map(e,function(e){return e.name}),n=this;return new Promise(function(e,r){n.makeRequest("role:default",{roles:t}).then(function(t){e(t.result)},function(e){r(e)})})}},{key:"setDefaultACL",value:function(e){this.Record.defaultACL=e}},{key:"setRecordCreateAccess",value:function(e,t){var n=P.map(t,function(e){return e.name}),r=this;return new Promise(function(t,i){r.makeRequest("schema:access",{type:e.recordType,create_roles:n}).then(function(e){t(e.result)},function(e){i(e)})})}},{key:"registerDevice",value:function(e,t){if(!e)throw new Error("Token cannot be empty");if(!t){if(!u)throw new Error("Failed to infer type, please supply a value");t="ios"===u.Platform.OS?"ios":"android"}var n=void 0;this.deviceID&&(n=this.deviceID);var r=this;return r.makeRequest("device:register",{type:t,id:n,device_token:e}).then(function(e){return r._setDeviceID(e.result.id)},function(n){var i=null;return n.error&&(i=n.error.code),r.deviceID&&110===i?r._setDeviceID(null).then(function(){return r.registerDevice(e,t)}):Promise.reject(n)})}},{key:"lambda",value:function(e,t){var n=this;return new Promise(function(r,i){n.makeRequest(e,{args:t}).then(function(e){r(e.result)},i)})}},{key:"makeUploadAssetRequest",value:function(e){var t=this;return new Promise(function(n,r){t.makeRequest("asset:put",{filename:e.name,"content-type":e.contentType,"content-size":e.file.size}).then(function(i){var o=c["default"].fromJSON(i.result.asset),u=i.result["post-request"],a=u.action;0===a.indexOf("/")&&(a=a.substring(1)),0!==a.indexOf("http")&&(a=t.url+a);var s=t.request.post(a).set("X-Skygear-API-Key",t.apiKey);u["extra-fields"]&&P.forEach(u["extra-fields"],function(e,t){s=s.field(t,e)}),s.attach("file",e.file).end(function(e){return e?void r(e):void n(o)})},function(e){r(e)})})}},{key:"makeRequest",value:function(e,t){var n=this;if(null===this.apiKey)throw Error("Please config ApiKey");var r=P.assign({action:e,api_key:this.apiKey,access_token:this.accessToken},t),i=e.replace(":","/"),u=this.request.post(this.url+i).set("X-Skygear-API-Key",this.apiKey).set("X-Skygear-Access-Token",this.accessToken).set("Accept","application/json").send(r);return new Promise(function(e,t){u.end(function(r,i){var u=o(i);if(r){var a=function(){var e=u.error||r;return e.code===I.AccessTokenNotAccepted?{v:Promise.all([n._setAccessToken(null),n._setUser(null)]).then(function(){t({status:r.status,error:e})})}:void t({status:r.status,error:e})}();if("object"==typeof a)return a.v}else e(u)})})}},{key:"_getUser",value:function(){var e=this;return N.getItem("skygear-user").then(function(t){var n=JSON.parse(t);e._user=e.User.fromJSON(n)},function(t){return console.warn("Failed to get user",t),e._user=null,null})}},{key:"_setUser",value:function(e){var t=this,n=void 0;null!==e?(this._user=new this.User(e),n=JSON.stringify(this._user.toJSON())):(this._user=null,n=null);var r=null===n?N.removeItem("skygear-user"):N.setItem("skygear-user",n);return r.then(function(){return t.ee.emit(q,t._user),n},function(e){return console.warn("Failed to persist user",e),n})}},{key:"_getAccessToken",value:function(){var e=this;return N.getItem("skygear-accesstoken").then(function(t){return e._accessToken=t,t},function(t){return console.warn("Failed to get access",t),e._accessToken=null,null})}},{key:"_setAccessToken",value:function(e){this._accessToken=e;var t=null===e?N.removeItem("skygear-accesstoken"):N.setItem("skygear-accesstoken",e);return t.then(function(){return e},function(t){return console.warn("Failed to persist accesstoken",t),e})}},{key:"_getDeviceID",value:function(){var e=this;return N.getItem("skygear-deviceid").then(function(t){return e._deviceID=t,t},function(t){return console.warn("Failed to get deviceid",t),e._deviceID=null,null})}},{key:"_setDeviceID",value:function(e){var t=this;this._deviceID=e;var n=null===e?N.removeItem("skygear-deviceid"):N.setItem("skygear-deviceid",e);return n.then(function(){return e},function(t){return console.warn("Failed to persist deviceid",t),e}).then(function(e){return t.reconfigurePubsubIfNeeded(),e})}},{key:"reconfigurePubsubIfNeeded",value:function(){this.autoPubsub&&(this._internalPubsub.reset(),null!==this.deviceID&&this._internalPubsub.subscribe("_sub_"+this.deviceID,function(e){console.log("Receivied data for subscription: "+e)}),this._internalPubsub.reconfigure(),this._pubsub.reconfigure())}},{key:"on",value:function(e,t){return this.pubsub.on(e,t)}},{key:"off",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];this.pubsub.off(e,t)}},{key:"defaultACL",get:function(){return this.Record.defaultACL}},{key:"Query",get:function(){return w["default"]}},{key:"User",get:function(){return f["default"]}},{key:"Role",get:function(){return p["default"]}},{key:"ACL",get:function(){return v["default"]}},{key:"Record",get:function(){return g["default"]}},{key:"UserRecord",get:function(){return g["default"].extend("user")}},{key:"Sequence",get:function(){return E.Sequence}},{key:"Asset",get:function(){return c["default"]}},{key:"Reference",get:function(){return m["default"]}},{key:"Geolocation",get:function(){return j["default"]}},{key:"currentUser",get:function(){return this._user}},{key:"accessToken",get:function(){return this._accessToken}},{key:"deviceID",get:function(){return this._deviceID}},{key:"endPoint",get:function(){return this.url},set:function(e){e&&(this.url=e)}},{key:"publicDB",get:function(){return null===this._publicDB&&(this._publicDB=new O["default"]("_public",this)),this._publicDB}},{key:"privateDB",get:function(){if(null===this.accessToken)throw new Error("You must login before access to privateDB");return null===this._privateDB&&(this._privateDB=new O["default"]("_private",this)),this._privateDB}},{key:"relation",get:function(){return this._relation}},{key:"pubsub",get:function(){return this._pubsub}}]),e}();n["default"]=L,t.exports=n["default"]},{"./acl":1,"./asset":2,"./database":5,"./error":6,"./geolocation":7,"./pubsub":9,"./query":10,"./record":12,"./reference":13,"./relation":14,"./role":15,"./store":16,"./type":17,"./user":18,"./util":19,"event-emitter":41,lodash:45,"react-native":21,superagent:52}],5:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(s){i=!0,o=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=e("./cache"),s=r(a),c=e("./asset"),l=r(c),f=e("./record"),h=r(f),p=e("./query"),d=r(p),v=e("./query_result"),y=r(v),g=e("lodash"),_=function(){function e(t,n){if(i(this,e),"_public"!==t&&"_private"!==t)throw new Error("Invalid database_id");this.dbID=t,this.container=n,this._cacheStore=new s["default"](this.dbID)}return u(e,[{key:"getRecordByID",value:function(e){var t=this,n=h["default"].parseID(e),r=o(n,2),i=r[0],u=r[1],a=new d["default"](h["default"].extend(i)).equalTo("_id",u);return new Promise(function(n,r){t.query(a).then(function(t){1===t.length?n(t[0]):r(new Error(e+" does not exist"))},r)})}},{key:"query",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n=!1,r=this.cacheStore,i=e.recordCls,o=e.toJSON();!o.offset&&o.page>0&&(o.offset=o.limit*(o.page-1));var u=g.assign({database_id:this.dbID},o);return t&&r.get(e.hash).then(function(e){if(!n){var r=g.map(e.result,function(e){return new i(e)}),o=y["default"].createFromResult(r,e.info);t(o,!0)}},function(e){console.log("No cache found",e)}),new Promise(function(t,o){this.container.makeRequest("record:query",u).then(function(o){var u=g.map(o.result,function(e){return new i(e)}),a=y["default"].createFromResult(u,o.info);n=!0,r.set(e.hash,o),t(a)},function(e){o(e)})}.bind(this))}},{key:"_presaveAssetTask",value:function(e,t){return t.file?new Promise(function(n,r){this.container.makeUploadAssetRequest(t).then(function(t){n([e,t])},function(e){r(e)})}.bind(this)):Promise.resolve([e,t])}},{key:"_presave",value:function(e){var t=this;return new Promise(function(n,r){var i=g.map(e,function(e,n){return e instanceof l["default"]?t._presaveAssetTask(n,e):Promise.resolve([n,e])});Promise.all(i).then(function(t){g.each(t,function(t){var n=o(t,2),r=n[0],i=n[1];e[r]=i}),n(e)},function(e){r(e)})})}},{key:"del",value:function(e){return this["delete"](e)}},{key:"save",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=this,r=e;return g.isArray(r)||(r=[r]),new Promise(function(e,i){g.map(r,function(e){void 0!==e&&null!==e||i("Invalid input, unable to save undefined and null")});var o=g.map(r,n._presave.bind(n));Promise.all(o).then(function(e){var r={database_id:n.dbID};return t.atomic&&(r.atomic=!0),r.records=g.map(e,function(e){return e.toJSON()}),n.container.makeRequest("record:save",r)}).then(function(t){var n=t.result,o=[],u=[];g.forEach(n,function(e,t){"error"===e._type?(o[t]=void 0,u[t]=e):(r[t].update(e),r[t].updateTransient(e._transient,!0),o[t]=r[t],u[t]=void 0)}),1===r.length?u[0]?i(u[0]):e(o[0]):e({savedRecords:o,errors:u})},function(e){i(e)})["catch"](function(e){i(e)})})}},{key:"delete",value:function(e){var t=this,n=e;g.isArray(n)||(n=[n]);var r=g.map(n,function(e){return e.id}),i={database_id:this.dbID,ids:r};return new Promise(function(e,r){t.container.makeRequest("record:delete",i).then(function(t){var i=t.result,o=[];g.forEach(i,function(e,t){"error"===e._type?o[t]=e:o[t]=void 0}),1===n.length?o[0]?r(o[0]):e():e(o)},function(e){r(e)})})}},{key:"clearCache",value:function(){return this._cacheStore.reset()}},{key:"cacheStore",get:function(){return this._cacheStore}}]),e}();n["default"]=_,t.exports=n["default"]},{"./asset":2,"./cache":3,"./query":10,"./query_result":11,"./record":12,lodash:45}],6:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=101;n.NotAuthenticated=r;var i=102;n.PermissionDenied=i;var o=103;n.AccessKeyNotAccepted=o;var u=104;n.AccessTokenNotAccepted=u;var a=105;n.InvalidCredentials=a;var s=106;n.InvalidSignature=s;var c=107;n.BadRequest=c;var l=108;n.InvalidArgument=l;var f=109;n.Duplicated=f;var h=110;n.ResourceNotFound=h;var p=111;n.NotSupported=p;var d=112;n.NotImplemented=d;var v=113;n.ConstraintViolated=v;var y=114;n.IncompatibleSchema=y;var g=115;n.AtomicOperationFailure=g;var _=116;n.PartialOperationFailure=_;var m=117;n.UndefinedOperation=m;var b=118;n.PluginUnavailable=b;var w=119;n.PluginTimeout=w;var k=120;n.RecordQueryInvalid=k},{}],7:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("lodash"),a=r(u),s=function(){function e(t,n){if(i(this,e),!a["default"].isNumber(t))throw new Error("Latitude is not a number");if(t<-90||t>90)throw new Error("Latitude is not in expected range (-90, 90)");if(!a["default"].isNumber(n))throw new Error("Longitude is not a number");if(n<-180||n>180)throw new Error("Longitude is not in expected range (-180, 180)");this.latitude=t,this.longitude=n}return o(e,[{key:"toJSON",value:function(){return{$lat:this.latitude,$lng:this.longitude,$type:"geo"}}}],[{key:"fromJSON",value:function(t){return new e(t.$lat,t.$lng)}}]),e}();n["default"]=s,t.exports=n["default"]},{lodash:45}],8:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(n,"__esModule",{value:!0});var i=e("./container"),o=r(i),u=new o["default"];n["default"]=u,t.exports=n["default"]},{"./container":4}],9:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=e("./util"),u=e("lodash"),a=e("websocket"),s=null;s=a?a.w3cwebsocket:window.WebSocket;var c=e("url"),l=e("event-emitter"),f="onOpen",h="onClose",p=function(){function e(t){var n=!(arguments.length<=1||void 0===arguments[1])&&arguments[1];r(this,e),this._container=t,this._ws=null,this._internal=n,this._queue=[],this.ee=l({}),this._handlers={},this._reconnectWait=5e3,this._retryCount=0}return i(e,[{key:"onOpen",value:function(e){return this.ee.on(f,e),new o.EventHandle(this.ee,f,e)}},{key:"onClose",value:function(e){return this.ee.on(h,e),new o.EventHandle(this.ee,h,e)}},{key:"_pubsubUrl",value:function(){var e=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],t=c.parse(this._container.endPoint),n="https:"===t.protocol?"wss:":"ws:",r=e?"/_/pubsub":"/pubsub",i="?api_key="+this._container.apiKey;return n+"//"+t.host+r+i}},{key:"_hasCredentials",value:function(){return!!this._container.apiKey}},{key:"reconfigure",value:function(){return this._hasCredentials()?void this.connect():void this.close()}},{key:"_onopen",value:function(){var e=this;this.ee.emit(f,!0),u.forEach(this._handlers,function(t,n){e._sendSubscription(n)}),u.forEach(this._queue,function(t){e._ws.send(JSON.stringify(t))}),this._queue=[]}},{key:"_onmessage",value:function(e){u.forEach(this._handlers[e.channel],function(t){t(e.data)})}},{key:"on",value:function(e,t){return this.subscribe(e,t)}},{key:"publish",value:function(e,t){if(!e)throw new Error("Missing channel to publish");if(!t)throw new Error("Missing data to publish");var n={action:"pub",channel:e,data:t};this.connected?this._ws.send(JSON.stringify(n)):this._queue.push(n)}},{key:"_sendSubscription",value:function(e){if(this.connected){var t={action:"sub",channel:e};this._ws.send(JSON.stringify(t))}}},{key:"_sendRemoveSubscription",value:function(e){if(this.connected){var t={action:"unsub",channel:e};this._ws.send(JSON.stringify(t))}}},{key:"off",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];this.unsubscribe(e,t)}},{key:"subscribe",value:function(e,t){if(!e)throw new Error("Missing channel to subscribe");var n=this.hasHandlers(e);return this._register(e,t),n||this._sendSubscription(e),t}},{key:"unsubscribe",value:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(!e)throw new Error("Missing channel to unsubscribe");if(this.hasHandlers(e)){var n;n=t?[t]:this._handlers[e];var r=this;u.forEach(n,function(t){r._unregister(e,t)}),this.hasHandlers(e)||this._sendRemoveSubscription(e)}}},{key:"hasHandlers",value:function(e){var t=this._handlers[e];return!!t&&t.length>0}},{key:"_register",value:function(e,t){this._handlers[e]||(this._handlers[e]=[]),this._handlers[e].push(t)}},{key:"_unregister",value:function(e,t){var n=this._handlers[e];n=u.reject(n,function(e){return e===t}),n.length>0?this._handlers[e]=n:delete this._handlers[e]}},{key:"_reconnect",value:function(){var e=this,t=u.min([this._reconnectWait*this._retryCount,6e4]);u.delay(function(){e._retryCount+=1,e.connect()},t)}},{key:"reset",value:function(){this.close(),this._handlers={}}},{key:"close",value:function(){this._ws&&(this._ws.close(),this._ws=null)}},{key:"_setWebSocket",value:function(e){var t=this.ee;if(this._ws=e,this._ws){var n=this;this._ws.onopen=function(){n._retryCount=0,n._onopen()},this._ws.onclose=function(){t.emit(h,!1),n._reconnect()},this._ws.onmessage=function(e){var t;try{t=JSON.parse(e.data)}catch(r){return void console.log("Got malformed websocket data:",e.data)}n._onmessage(t)}}}},{key:"connect",value:function(){if(this._hasCredentials()&&!this.connected){var e=this._pubsubUrl(this._internal),t=new this.WebSocket(e);this._setWebSocket(t)}}},{key:"connected",get:function(){return this._ws&&1===this._ws.readyState}},{key:"WebSocket",get:function(){return s}}]),e}();n["default"]=p,t.exports=n["default"]},{"./util":19,"event-emitter":41,lodash:45,url:22,websocket:59}],10:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("lodash"),a=r(u),s=e("md5"),c=r(s),l=e("./util"),f=e("./record"),h=r(f),p=function(){function e(t){if(i(this,e),!h["default"].validType(t.recordType))throw new Error("RecordType is not valid. Please start with alphanumeric string.");this.recordCls=t,this.recordType=t.recordType,this._predicate=[],this._orPredicate=[],this._sort=[],this._include={},this._negation=!1,this.overallCount=!1,this.limit=50,this.offset=0,this.page=0}return o(e,[{key:"like",value:function(e,t){return this._predicate.push(["like",{$type:"keypath",$val:e},t]),this}},{key:"notLike",value:function(e,t){return this._predicate.push(["not",["like",{$type:"keypath",$val:e},t]]),this}},{key:"caseInsensitiveLike",value:function(e,t){return this._predicate.push(["ilike",{$type:"keypath",$val:e},t]),this}},{key:"caseInsensitiveNotLike",value:function(e,t){return this._predicate.push(["not",["ilike",{$type:"keypath",$val:e},t]]),this}},{key:"equalTo",value:function(e,t){return this._predicate.push(["eq",{$type:"keypath",$val:e
},t]),this}},{key:"notEqualTo",value:function(e,t){return this._predicate.push(["neq",{$type:"keypath",$val:e},t]),this}},{key:"greaterThan",value:function(e,t){return this._predicate.push(["gt",{$type:"keypath",$val:e},t]),this}},{key:"greaterThanOrEqualTo",value:function(e,t){return this._predicate.push(["gte",{$type:"keypath",$val:e},t]),this}},{key:"lessThan",value:function(e,t){return this._predicate.push(["lt",{$type:"keypath",$val:e},t]),this}},{key:"lessThanOrEqualTo",value:function(e,t){return this._predicate.push(["lte",{$type:"keypath",$val:e},t]),this}},{key:"distanceLessThan",value:function(e,t,n){return this._predicate.push(["lt",["func","distance",{$type:"keypath",$val:e},{$type:"geo",$lng:t.longitude,$lat:t.latitude}],n]),this}},{key:"distanceGreaterThan",value:function(e,t,n){return this._predicate.push(["gt",["func","distance",{$type:"keypath",$val:e},{$type:"geo",$lng:t.longitude,$lat:t.latitude}],n]),this}},{key:"contains",value:function(e,t){if(!a["default"].isArray(t))throw new Error("The second argument of contains must be an array.");return this._predicate.push(["in",{$type:"keypath",$val:e},t]),this}},{key:"notContains",value:function(e,t){if(!a["default"].isArray(t))throw new Error("The second argument of contains must be an array.");return this._predicate.push(["not",["in",{$type:"keypath",$val:e},t]]),this}},{key:"containsValue",value:function(e,t){if(!a["default"].isString(t))throw new Error("The second argument of containsValue must be a string.");return this._predicate.push(["in",t,{$type:"keypath",$val:e}]),this}},{key:"notContainsValue",value:function(e,t){if(!a["default"].isString(t))throw new Error("The second argument of containsValue must be a string.");return this._predicate.push(["not",["in",t,{$type:"keypath",$val:e}]]),this}},{key:"havingRelation",value:function(e,t){var n=t.prototype.identifier;return"friend"===n?n="_friend":"follow"===n&&(n="_follow"),this._predicate.push(["func","userRelation",{$type:"keypath",$val:e},{$type:"relation",$name:n,$direction:t.prototype.direction}]),this}},{key:"notHavingRelation",value:function(e,t){var n=t.prototype.identifier;return"friend"===n?n="_friend":"follow"===n&&(n="_follow"),this._predicate.push(["not",["func","userRelation",{$type:"keypath",$val:e},{$type:"relation",$name:n,$direction:t.prototype.direction}]]),this}},{key:"havingEmails",value:function(e){if("user"!==this.recordType)throw new Error("havingEmails predicate only works on user record");return a["default"].isArray(e)||(e=[e]),this._predicate.push(["func","userDiscover",{emails:e}]),this}},{key:"havingUsernames",value:function(e){if("user"!==this.recordType)throw new Error("havingUsernames predicate only works on user record");return a["default"].isArray(e)||(e=[e]),this._predicate.push(["func","userDiscover",{usernames:e}]),this}},{key:"addDescending",value:function(e){return this._sort.push([{$type:"keypath",$val:e},"desc"]),this}},{key:"addAscending",value:function(e){return this._sort.push([{$type:"keypath",$val:e},"asc"]),this}},{key:"addDescendingByDistance",value:function(e,t){return this._sort.push([["func","distance",{$type:"keypath",$val:e},{$type:"geo",$lng:t.longitude,$lat:t.latitude}],"desc"]),this}},{key:"addAscendingByDistance",value:function(e,t){return this._sort.push([["func","distance",{$type:"keypath",$val:e},{$type:"geo",$lng:t.longitude,$lat:t.latitude}],"asc"]),this}},{key:"transientInclude",value:function(e,t){return t=t||e,this._include[t]={$type:"keypath",$val:e},this}},{key:"transientIncludeDistance",value:function(e,t,n){return t=t||e,this._include[t]=["func","distance",{$type:"keypath",$val:e},{$type:"geo",$lng:n.longitude,$lat:n.latitude}],this}},{key:"_orQuery",value:function(e){var t=this;a["default"].forEach(e,function(e){t._orPredicate.push(e.predicate)})}},{key:"_getOrPredicate",value:function(){var e=a["default"].clone(this._orPredicate);return 0===e.length?[]:1===e.length?e[0]:(e.unshift("or"),e)}},{key:"toJSON",value:function(){var e={record_type:this.recordType,limit:this.limit,sort:this._sort,include:this._include,count:this.overallCount};return this.predicate.length>1&&(e.predicate=(0,l.toJSON)(this.predicate)),this.offset&&(e.offset=this.offset),this.page&&(e.page=this.page),e}},{key:"predicate",get:function(){var e=a["default"].clone(this._predicate);this._orPredicate.length>0&&e.push(this._getOrPredicate());var t=[];return 1===e.length?t=e[0]:e.length>0&&(e.unshift("and"),t=e),this._negation?["not",t]:t}},{key:"hash",get:function(){return(0,c["default"])(JSON.stringify(this.toJSON()))}}],[{key:"clone",value:function(t){return e.fromJSON(t.toJSON())}},{key:"fromJSON",value:function(t){var n=a["default"].cloneDeep(t),r=h["default"].extend(n.record_type),i=new e(r);return i.limit=n.limit,i._sort=n.sort,i.overallCount=n.count,n.offset&&(i.offset=n.offset),n.page&&(i.page=n.page),n.predicate&&n.predicate.length>1&&!function(){var e=(0,l.fromJSON)(n.predicate);"not"===e[0]&&(i._negation=!0,e=e[1]),e.length>1&&"and"===e[0]&&e.shift();var t=[],r=[];a["default"].each(e,function(e){e.length>1&&"or"===e[0]?r=e:t.push(e)}),r.length>1&&r.shift(),t.length>1&&"string"==typeof t[0]&&"and"!==t[0]&&(t=[t]),i._predicate=t,i._orPredicate=r}(),i}},{key:"or",value:function(){for(var t=null,n=null,r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];a["default"].forEach(i,function(e){if(t||(t=e.recordType,n=e.recordCls),t!==e.recordType)throw new Error("All queries must be for the same recordType.")});var u=new e(n);return u._orQuery(i),u}},{key:"not",value:function(t){var n=e.clone(t);return n._negation=!n._negation,n}}]),e}();n["default"]=p,t.exports=n["default"]},{"./record":12,"./util":19,lodash:45,md5:46}],11:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e,t,n){for(var r=!0;r;){var i=e,o=t,u=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var s=a.get;if(void 0===s)return;return s.call(u)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=u,r=!0,a=c=void 0}},a=function(e){function t(){r(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),o(t,[{key:"overallCount",get:function(){return this._overallCount}}],[{key:"createFromResult",value:function(e,n){var r=new t;return e.forEach(function(e){return r.push(e)}),r._overallCount=n?n.count:void 0,r}}]),t}(Array);n["default"]=a,t.exports=n["default"]},{}],12:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){var t=m.extend(e._id.split("/")[0]);return new t(e)}Object.defineProperty(n,"__esModule",{value:!0});var u=function(){function e(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);r=!0);}catch(s){i=!0,o=s}finally{try{!r&&a["return"]&&a["return"]()}finally{if(i)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("uuid"),c=r(s),l=e("lodash"),f=r(l),h=e("./util"),p=e("./acl"),d=r(p),v={_id:null,_type:null},y={_created_at:{parser:function(e){return new Date(e)},newKey:"createdAt"},_updated_at:{parser:function(e){return new Date(e)},newKey:"updatedAt"},_ownerID:{parser:function(e){return e},newKey:"ownerID"},_created_by:{parser:function(e){return e},newKey:"createdBy"},_updated_by:{parser:function(e){return e},newKey:"updatedBy"},_access:{parser:function(e){return d["default"].fromJSON(e)},newKey:"_access"}},g=f["default"].map(y,function(e){return e.newKey}),_=(new d["default"]).toJSON(),m=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?v:arguments[1];if(i(this,e),!e.validType(t))throw new Error("RecordType is not valid. Please start with alphanumeric string.");this._recordType=t;var r=n._id;if(null===r||void 0===r)r=c["default"].v4();else{var o=e.parseID(r),a=u(o,2),s=a[0],l=a[1];if(s!==this._recordType)throw new Error("_id is not valid. RecordType mismatch.");r=l}this._id=r,this._access=e.defaultACL,this.update(n),this.updateTransient(n._transient)}return a(e,[{key:"setAccess",value:function(t){this._access=t||e.defaultACL}},{key:"update",value:function(e){f["default"].each(this.attributeKeys,function(e){delete this[e]},this),f["default"].each(e,function(e,t){if(0!==t.indexOf("_"))f["default"].isObject(e)?this[t]=(0,h.fromJSON)(e):this[t]=e;else if(t in y){var n=y[t];this[n.newKey]=n.parser(e)}},this)}},{key:"setPublicNoAccess",value:function(){this.access.setPublicNoAccess()}},{key:"setPublicReadOnly",value:function(){this.access.setPublicReadOnly()}},{key:"setPublicReadWriteAccess",value:function(){this.access.setPublicReadWriteAccess()}},{key:"setNoAccessForRole",value:function(e){this.access.setNoAccessForRole(e)}},{key:"setReadOnlyForRole",value:function(e){this.access.setReadOnlyForRole(e)}},{key:"setReadWriteAccessForRole",value:function(e){this.access.setReadWriteAccessForRole(e)}},{key:"setNoAccessForUser",value:function(e){this.access.setNoAccessForUser(e)}},{key:"setReadOnlyForUser",value:function(e){this.access.setReadOnlyForUser(e)}},{key:"setReadWriteAccessForUser",value:function(e){this.access.setReadWriteAccessForUser(e)}},{key:"hasPublicReadAccess",value:function(){this.access.hasPublicReadAccess()}},{key:"hasPublicWriteAccess",value:function(){this.access.hasPublicWriteAccess()}},{key:"hasReadAccess",value:function(e){this.access.hasReadAccess(e)}},{key:"hasWriteAccess",value:function(e){this.access.hasWriteAccess(e)}},{key:"hasReadAccessForRole",value:function(e){this.access.hasReadAccessForRole(e)}},{key:"hasWriteAccessForRole",value:function(e){this.access.hasWriteAccessForRole(e)}},{key:"hasReadAccessForUser",value:function(e){this.access.hasReadAccessForUser(e)}},{key:"hasWriteAccessForUser",value:function(e){this.access.hasWriteAccessForUser(e)}},{key:"updateTransient",value:function(e){var t=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n=t?f["default"].clone(this._transient):{};f["default"].each(e,function(e,t){f["default"].isObject(e)&&"_id"in e?n[t]=o(e):f["default"].isObject(e)?n[t]=(0,h.fromJSON)(e):n[t]=e}),this._transient=n}},{key:"toJSON",value:function(){var e={_id:this.id,_access:this.access.toJSON()};return f["default"].each(this.attributeKeys,function(t){e[t]=(0,h.toJSON)(this[t])},this),e}},{key:"recordType",get:function(){return this._recordType}},{key:"id",get:function(){return this._recordType+"/"+this._id}},{key:"access",get:function(){return this._access}},{key:"attributeKeys",get:function(){var e=Object.keys(this);return f["default"].filter(e,function(e){return 0!==e.indexOf("_")&&!f["default"].includes(g,e)})}},{key:"$transient",get:function(){return this._transient}}],[{key:"validType",value:function(e){return e&&0!==e.indexOf("_")}},{key:"parseID",value:function(e){var t=e.split("/");if(t.length<2)throw new Error("_id is not valid. _id has to be in the format `type/id`");return[t[0],t.slice(1).join("/")]}},{key:"extend",value:function(t,n){function r(){var n=arguments.length<=0||void 0===arguments[0]?v:arguments[0];e.call(this,t,n)}if(!e.validType(t))throw new Error("RecordType is not valid. Please start with alphanumeric string.");var i={};return f["default"].assign(i,n,{constructor:r}),r.prototype=f["default"].create(e.prototype,i),r.recordType=t,r}},{key:"defaultACL",get:function(){return d["default"].fromJSON(_)},set:function(e){_=(e||new d["default"]).toJSON()}}]),e}();n["default"]=m,t.exports=n["default"]},{"./acl":1,"./util":19,lodash:45,uuid:57}],13:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("./record"),a=r(u),s=function(){function e(t){i(this,e);var n;if("string"==typeof t?n=t:(n=t.$id,n||(n=t.id)),!n)throw new Error("Empty record id");a["default"].parseID(n),this._id=n}return o(e,[{key:"toJSON",value:function(){return{$id:this._id,$type:"ref"}}},{key:"id",get:function(){return this._id}}]),e}();n["default"]=s,t.exports=n["default"]},{"./record":12}],14:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var u=function(e,t,n){for(var r=!0;r;){var i=e,o=t,u=n;r=!1,null===i&&(i=Function.prototype);var a=Object.getOwnPropertyDescriptor(i,o);if(void 0!==a){if("value"in a)return a.value;var s=a.get;if(void 0===s)return;return s.call(u)}var c=Object.getPrototypeOf(i);if(null===c)return;e=c,t=o,n=u,r=!0,a=c=void 0}},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=e("./user"),c=r(s),l=e("lodash"),f="outward";n.Outward=f;var h="inward";n.Inward=h;var p="mutual";n.Mutual=p;var d=/^[a-zA-Z]+$/,v=function(){function e(t,n){var r=arguments.length<=2||void 0===arguments[2]?[]:arguments[2];if(o(this,e),!e.validName(t))throw new Error("Relation identifier can only be [a-zA-Z]+");if(this.identifier=t,!e.validDirection(n))throw new Error("Relation direction not supported.");this.direction=n,this.targets=r,this.fails=[]}return a(e,[{key:"targetsID",get:function(){return l.map(this.targets,function(e){return e.id})}}],[{key:"validDirection",value:function(e){return e===p||e===f||e===h}},{key:"validName",value:function(e){return d.test(e)}}]),e}();n.Relation=v;var y=function(){function e(t){o(this,e),this.identifier=t.prototype.identifier,this.direction=t.prototype.direction,this.limit=50,this.page=0}return a(e,[{key:"toJSON",value:function(){return{name:this.identifier,direction:this.direction,limit:this.limit,page:this.page}}}]),e}();n.RelationQuery=y;var g=function b(e){o(this,b),this.success=[],this.fails=[],this.partialError=!1;for(var t=e.length,n=0;n<t;n++)"error"===e[n].type?(this.fails.push(e[n]),this.partialError=!0):this.success.push(new c["default"](e[n].data))};n.RelationResult=g;var _=function(e){function t(){o(this,t),u(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),a(t,[{key:"overallCount",get:function(){return this._overallCount}}],[{key:"createFromBody",value:function(e){var n=l.map(e.result,function(e){return new c["default"](e.data)}),r=new t;n.forEach(function(e){return r.push(e)});var i=e.info;return r._overallCount=i?i.count:void 0,r}}]),t}(Array);n.RelationQueryResult=_;var m=function(){function e(t){o(this,e),this.container=t}return a(e,[{key:"query",value:function(e){var t=this;return new Promise(function(n,r){t.container.makeRequest("relation:query",e.toJSON()).then(function(e){var t=_.createFromBody(e);n(t)},function(e){r(e)})})}},{key:"queryFriend",value:function(e){null===e&&(e=this.container.currentUser);var t=new y(this.Friend);return t.user=e,this.query(t)}},{key:"queryFollower",value:function(e){null===e&&(e=this.container.currentUser);var t=new y(this.Follower);return t.user=e,this.query(t)}},{key:"queryFollowing",value:function(e){null===e&&(e=this.container.currentUser);var t=new y(this.Following);return t.user=e,this.query(t)}},{key:"add",value:function(e){return new Promise(function(t,n){this.container.makeRequest("relation:add",{name:e.identifier,direction:e.direction,targets:e.targetsID}).then(function(e){var n=new g(e.result);t(n)},function(e){n(e)})}.bind(this))}},{key:"remove",value:function(e){return new Promise(function(t,n){this.container.makeRequest("relation:remove",{name:e.identifier,direction:e.direction,targets:e.targetsID}).then(function(e){var n=new g(e.result);t(n)},function(e){n(e)})}.bind(this))}},{key:"Query",get:function(){return y}},{key:"Friend",get:function(){return e.extend("friend",p)}},{key:"Follower",get:function(){return e.extend("follow",h)}},{key:"Following",get:function(){return e.extend("follow",f)}}],[{key:"extend",value:function(e,t){function n(){var n=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];v.call(this,e,t),this.targets=n}if(!v.validName(e))throw new Error("Relation identifier can only be [a-zA-Z]+");var r={identifier:e,direction:t};return n.prototype=l.create(v.prototype,r),n}}]),e}();n.RelationAction=m},{"./user":18,lodash:45}],15:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("lodash"),a=r(u),s={},c=function(){function e(t){if(i(this,e),!e.isValidName(t))throw new Error("Role name is not valid. Please start with alphanumeric string.");this._name=t}return o(e,[{key:"name",get:function(){return this._name}}],[{key:"isValidName",value:function(e){return!!e}},{key:"define",value:function(t){var n=s[t];return void 0!==n?n:(n=new e(t),s[t]=n,n)}},{key:"union",value:function(e,t){var n=a["default"].find(e,function(e){return e.name===t.name});return void 0===n?a["default"].union(e,[t]):e}},{key:"subtract",value:function(e,t){return a["default"].filter(e,function(e){return e.name!==t.name})}},{key:"contain",value:function(e,t){return void 0!==a["default"].find(e,function(e){return e.name===t.name})}}]),e}();n["default"]=c,t.exports=n["default"]},{lodash:45}],16:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("cookie-storage"),a=e("./util"),s=["skygear-deviceid","skygear-user","skygear-accesstoken"],c=function(){function e(t,n){r(this,e),this.storage=t,this.keyWhiteList=n}return o(e,[{key:"clear",value:function(e){return new Promise(function(t){this.storage.clear(),e&&e(),t()}.bind(this))}},{key:"getItem",value:function(e,t){return new Promise(function(n){var r=this.storage.getItem(e);t&&t(null,r),n(r)}.bind(this))}},{key:"setItem",value:function(e,t,n){return new Promise(function(r,i){return this.keyWhiteList&&this.keyWhiteList.indexOf(e)===-1?void i("Saving key is not permitted"):(this.storage.setItem(e,t),n&&n(t),void r(t))}.bind(this))}},{key:"removeItem",value:function(e,t){return new Promise(function(n){this.storage.removeItem(e),t&&t(),n()}.bind(this))}}]),e}();if("undefined"!=typeof window){var l=e("localforage"),f=e("react-native");if(f&&f.AsyncStorage){var h=f.AsyncStorage,p={_driver:"ReactNativeAsyncStorage",_support:!0,_initStorage:function(e){console.log("Init ReactNativeAsyncStorage")},clear:function(e){return h.clear(e)},getItem:function(e,t){return h.getItem(e,t)},setItem:function(e,t,n){return h.setItem(e,t,n)},removeItem:function(e,t){return h.removeItem(e,t)},key:function(e,t){throw Error("Not support key in ReactNativeAsyncStorage")},keys:function(e){h.getAllKeys(e)},length:function(e){throw Error("Not support length in ReactNativeAsyncStorage")},iterate:function(e,t){throw Error("Not support iterate in ReactNativeAsyncStorage")}};i=p}else if((0,a.isLocalStorageValid)())i=l;else{var d=new u.CookieStorage;i=new c(d,s)}}else{var v=e("localstorage-memory");i=new c(v)}n["default"]=i,t.exports=n["default"]},{"./util":19,"cookie-storage":25,localforage:43,"localstorage-memory":44,"react-native":21}],17:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){r(this,e)}return i(e,[{key:"toJSON",value:function(){return{$type:"seq"}}}]),e}();n.Sequence=o},{}],18:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=e("lodash"),a=r(u),s=e("./role"),c=r(s),l=function(){function e(t){i(this,e);var n=t.user_id||t._id;if(!a["default"].isString(n))throw new Error("Missing user_id.");this.email=t.email,this.username=t.username,this.id=n,t.last_login_at&&(this.lastLoginAt=new Date(t.last_login_at)),t.last_seen_at&&(this.lastSeenAt=new Date(t.last_seen_at)),this.roles=[],t.roles&&(this.roles=a["default"].map(t.roles,c["default"].define))}return o(e,[{key:"toJSON",value:function(){var e={user_id:this.id,username:this.username,email:this.email,roles:a["default"].map(this.roles,function(e){return e.name})};return this.lastLoginAt&&(e.last_login_at=this.lastLoginAt.toJSON()),this.lastSeenAt&&(e.last_seen_at=this.lastSeenAt.toJSON()),e}},{key:"addRole",value:function(e){this.roles=c["default"].union(this.roles,e)}},{key:"removeRole",value:function(e){this.roles=c["default"].subtract(this.roles,e)}},{key:"hasRole",value:function(e){return c["default"].contain(this.roles,e)}}],[{key:"fromJSON",value:function(t){return new e(t)}}]),e}();n["default"]=l,t.exports=n["default"]},{"./role":15,lodash:45}],19:[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return null===e?null:l["default"].isArray(e)?l["default"].map(e,o):l["default"].isDate(e)?{$type:"date",$date:e.toJSON()}:e.toJSON?e.toJSON():l["default"].isObject(e)?l["default"].chain(e).map(function(e,t){return[t,o(e)]}).object().value():e}function u(e){if(!l["default"].isObject(e))return e;switch(e.$type){case"geo":return y["default"].fromJSON(e);case"asset":return h["default"].fromJSON(e);case"date":return new Date(e.$date);case"ref":return new d["default"](e);default:return e}}function a(){try{var e="undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem;return e&&(localStorage.setItem("_skygear_test","test"),localStorage.removeItem("_skygear_test")),e}catch(t){return!1}}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n.toJSON=o,n.fromJSON=u,n.isLocalStorageValid=a;var c=e("lodash"),l=r(c),f=e("./asset"),h=r(f),p=e("./reference"),d=r(p),v=e("./geolocation"),y=r(v),g=function(){function e(t,n,r){i(this,e),this.emitter=t,this.name=n,this.listener=r}return s(e,[{key:"cancel",value:function(){this.emitter.off(this.name,this.listener)}}]),e}();n.EventHandle=g},{"./asset":2,"./geolocation":7,"./reference":13,lodash:45}],20:[function(e,t,n){!function(){function e(e){this.message=e}var t="undefined"!=typeof n?n:this,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e.prototype=new Error,e.prototype.name="InvalidCharacterError",t.btoa||(t.btoa=function(t){for(var n,i,o=String(t),u=0,a=r,s="";o.charAt(0|u)||(a="=",u%1);s+=a.charAt(63&n>>8-u%1*8)){if(i=o.charCodeAt(u+=.75),i>255)throw new e("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");n=n<<8|i}return s}),t.atob||(t.atob=function(t){var n=String(t).replace(/=+$/,"");if(n.length%4==1)throw new e("'atob' failed: The string to be decoded is not correctly encoded.");for(var i,o,u=0,a=0,s="";o=n.charAt(a++);~o&&(i=u%4?64*i+o:o,u++%4)?s+=String.fromCharCode(255&i>>(-2*u&6)):0)o=r.indexOf(o);return s})}()},{}],21:[function(e,t,n){},{}],22:[function(e,t,n){function r(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function i(e,t,n){if(e&&c(e)&&e instanceof r)return e;var i=new r;return i.parse(e,t,n),i}function o(e){return s(e)&&(e=i(e)),e instanceof r?e.format():r.prototype.format.call(e)}function u(e,t){return i(e,!1,!0).resolve(t)}function a(e,t){return e?i(e,!1,!0).resolveObject(t):t}function s(e){return"string"==typeof e}function c(e){return"object"==typeof e&&null!==e}function l(e){return null===e}function f(e){return null==e}var h=e("punycode");n.parse=i,n.resolve=u,n.resolveObject=a,n.format=o,n.Url=r;var p=/^([a-z0-9.+-]+:)/i,d=/:[0-9]*$/,v=["<",">",'"',"`"," ","\r","\n","\t"],y=["{","}","|","\\","^","`"].concat(v),g=["'"].concat(y),_=["%","/","?",";","#"].concat(g),m=["/","?","#"],b=255,w=/^[a-z0-9A-Z_-]{0,63}$/,k=/^([a-z0-9A-Z_-]{0,63})(.*)$/,O={javascript:!0,"javascript:":!0},x={javascript:!0,"javascript:":!0},A={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},S=e("querystring");r.prototype.parse=function(e,t,n){if(!s(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var r=e;r=r.trim();var i=p.exec(r);if(i){i=i[0];var o=i.toLowerCase();this.protocol=o,r=r.substr(i.length)}if(n||i||r.match(/^\/\/[^@\/]+@[^@\/]+/)){var u="//"===r.substr(0,2);!u||i&&x[i]||(r=r.substr(2),this.slashes=!0)}if(!x[i]&&(u||i&&!A[i])){for(var a=-1,c=0;c<m.length;c++){var l=r.indexOf(m[c]);l!==-1&&(a===-1||l<a)&&(a=l)}var f,d;d=a===-1?r.lastIndexOf("@"):r.lastIndexOf("@",a),d!==-1&&(f=r.slice(0,d),r=r.slice(d+1),this.auth=decodeURIComponent(f)),a=-1;for(var c=0;c<_.length;c++){var l=r.indexOf(_[c]);l!==-1&&(a===-1||l<a)&&(a=l)}a===-1&&(a=r.length),this.host=r.slice(0,a),r=r.slice(a),this.parseHost(),this.hostname=this.hostname||"";var v="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!v)for(var y=this.hostname.split(/\./),c=0,R=y.length;c<R;c++){var j=y[c];if(j&&!j.match(w)){for(var E="",I=0,T=j.length;I<T;I++)E+=j.charCodeAt(I)>127?"x":j[I];if(!E.match(w)){var C=y.slice(0,c),P=y.slice(c+1),N=j.match(k);N&&(C.push(N[1]),P.unshift(N[2])),P.length&&(r="/"+P.join(".")+r),this.hostname=C.join(".");break}}}if(this.hostname.length>b?this.hostname="":this.hostname=this.hostname.toLowerCase(),!v){for(var D=this.hostname.split("."),q=[],c=0;c<D.length;++c){var L=D[c];q.push(L.match(/[^A-Za-z0-9_-]/)?"xn--"+h.encode(L):L)}this.hostname=q.join(".")}var B=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+B,this.href+=this.host,v&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==r[0]&&(r="/"+r))}if(!O[o])for(var c=0,R=g.length;c<R;c++){var F=g[c],$=encodeURIComponent(F);$===F&&($=escape(F)),r=r.split(F).join($)}var M=r.indexOf("#");M!==-1&&(this.hash=r.substr(M),r=r.slice(0,M));var W=r.indexOf("?");if(W!==-1?(this.search=r.substr(W),this.query=r.substr(W+1),t&&(this.query=S.parse(this.query)),r=r.slice(0,W)):t&&(this.search="",this.query={}),r&&(this.pathname=r),A[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",L=this.search||"";this.path=B+L}return this.href=this.format(),this},r.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&c(this.query)&&Object.keys(this.query).length&&(o=S.stringify(this.query));var u=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||A[t])&&i!==!1?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),r&&"#"!==r.charAt(0)&&(r="#"+r),u&&"?"!==u.charAt(0)&&(u="?"+u),n=n.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),u=u.replace("#","%23"),t+i+n+u+r},r.prototype.resolve=function(e){return this.resolveObject(i(e,!1,!0)).format()},r.prototype.resolveObject=function(e){if(s(e)){var t=new r;t.parse(e,!1,!0),e=t}var n=new r;if(Object.keys(this).forEach(function(e){n[e]=this[e]},this),n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol)return Object.keys(e).forEach(function(t){"protocol"!==t&&(n[t]=e[t])}),A[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n;if(e.protocol&&e.protocol!==n.protocol){if(!A[e.protocol])return Object.keys(e).forEach(function(t){n[t]=e[t]}),n.href=n.format(),n;if(n.protocol=e.protocol,e.host||x[e.protocol])n.pathname=e.pathname;else{for(var i=(e.pathname||"").split("/");i.length&&!(e.host=i.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==i[0]&&i.unshift(""),i.length<2&&i.unshift(""),n.pathname=i.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var o=n.pathname||"",u=n.search||"";n.path=o+u}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var a=n.pathname&&"/"===n.pathname.charAt(0),c=e.host||e.pathname&&"/"===e.pathname.charAt(0),h=c||a||n.host&&e.pathname,p=h,d=n.pathname&&n.pathname.split("/")||[],i=e.pathname&&e.pathname.split("/")||[],v=n.protocol&&!A[n.protocol];if(v&&(n.hostname="",n.port=null,n.host&&(""===d[0]?d[0]=n.host:d.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===i[0]?i[0]=e.host:i.unshift(e.host)),e.host=null),h=h&&(""===i[0]||""===d[0])),c)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,d=i;else if(i.length)d||(d=[]),d.pop(),d=d.concat(i),n.search=e.search,n.query=e.query;else if(!f(e.search)){if(v){n.hostname=n.host=d.shift();var y=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");y&&(n.auth=y.shift(),
n.host=n.hostname=y.shift())}return n.search=e.search,n.query=e.query,l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!d.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var g=d.slice(-1)[0],_=(n.host||e.host)&&("."===g||".."===g)||""===g,m=0,b=d.length;b>=0;b--)g=d[b],"."==g?d.splice(b,1):".."===g?(d.splice(b,1),m++):m&&(d.splice(b,1),m--);if(!h&&!p)for(;m--;m)d.unshift("..");!h||""===d[0]||d[0]&&"/"===d[0].charAt(0)||d.unshift(""),_&&"/"!==d.join("/").substr(-1)&&d.push("");var w=""===d[0]||d[0]&&"/"===d[0].charAt(0);if(v){n.hostname=n.host=w?"":d.length?d.shift():"";var y=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@");y&&(n.auth=y.shift(),n.host=n.hostname=y.shift())}return h=h||n.host&&d.length,h&&!w&&d.unshift(""),d.length?n.pathname=d.join("/"):(n.pathname=null,n.path=null),l(n.pathname)&&l(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},r.prototype.parseHost=function(){var e=this.host,t=d.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{punycode:47,querystring:50}],23:[function(e,t,n){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};t.exports=r},{}],24:[function(e,t,n){function r(e){if(e)return i(e)}function i(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}"undefined"!=typeof t&&(t.exports=r),r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===t||r.fn===t){n.splice(i,1);break}return this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),n=this._callbacks["$"+e];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},{}],25:[function(t,n,r){!function(t){"function"==typeof e&&e.amd?e(["exports"],t):"undefined"!=typeof r&&t(r)}(function(e){"use strict";var t=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,r=[],i=e[Symbol.iterator]();!(n=i.next()).done&&(r.push(n.value),!t||r.length!==t););return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},n=function(){function e(e,t){for(var n in t){var r=t[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(e,t)}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(t){var n=this;r(this,e),t=t||{},this._defaultOptions=this._extends({path:null,domain:null,expires:null,secure:!1},t),Object.defineProperty(this,"length",{get:function(){var e=n._parse(document.cookie);return Object.keys(e).length}})}return n(e,{clear:{value:function(){var e=this,t=this._parse(document.cookie);Object.keys(t).forEach(function(t){return e.removeItem(t)})}},getItem:{value:function(e){var t=this._parse(document.cookie);return t[e]}},key:{value:function(e){var t=this._parse(document.cookie);return Object.keys(t).sort()[e]}},removeItem:{value:function(e){var t="",n=this._clone(this._defaultOptions);n.expires=new Date(0);var r=this._format(e,t,n);document.cookie=r}},setItem:{value:function(e,t,n){n=n||{},n=this._extends(this._clone(this._defaultOptions),n);var r=this._format(e,t,n);document.cookie=r}},_clone:{value:function(e){var t={};return Object.keys(e).forEach(function(n){return t[n]=e[n]}),t}},_extends:{value:function(e,t){return Object.keys(t).forEach(function(n){return e[n]=t[n]}),e}},_format:{value:function(e,t,n){return[encodeURIComponent(e),"=",encodeURIComponent(t),this._formatOptions(n)].join("")}},_formatOptions:{value:function(e){return[this._isDefined(e.path)?";path="+e.path:"",this._isDefined(e.domain)?";domain="+e.domain:"",this._isDefined(e.expires)?";expires="+e.expires.toUTCString():"",this._isDefined(e.secure)&&e.secure?";secure":""].join("")}},_isDefined:{value:function(e){return"undefined"!=typeof e&&null!==e}},_parse:{value:function(e){if(!this._isDefined(e)||0===e.length)return{};var n={},r=new RegExp("\\s*;\\s*");return e.split(r).forEach(function(e){var r=e.split("="),i=t(r,2),o=i[0],u=i[1],a=decodeURIComponent(o),s=decodeURIComponent(u);n[a]=s}),n}}}),e}();e.CookieStorage=i})},{}],26:[function(e,t,n){!function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(t){for(var n=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?n.push(e.charAt(i>>>6*(3-o)&63)):n.push("=");return n.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var n=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&n.push((e.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|e.indexOf(t.charAt(r))>>>6-2*i);return n}};t.exports=n}()},{}],27:[function(e,t,n){"use strict";var r,i=e("es5-ext/object/assign"),o=e("es5-ext/object/normalize-options"),u=e("es5-ext/object/is-callable"),a=e("es5-ext/string/#/contains");r=t.exports=function(e,t){var n,r,u,s,c;return arguments.length<2||"string"!=typeof e?(s=t,t=e,e=null):s=arguments[2],null==e?(n=u=!0,r=!1):(n=a.call(e,"c"),r=a.call(e,"e"),u=a.call(e,"w")),c={value:t,configurable:n,enumerable:r,writable:u},s?i(o(s),c):c},r.gs=function(e,t,n){var r,s,c,l;return"string"!=typeof e?(c=n,n=t,t=e,e=null):c=arguments[3],null==t?t=void 0:u(t)?null==n?n=void 0:u(n)||(c=n,n=void 0):(c=t,t=n=void 0),null==e?(r=!0,s=!1):(r=a.call(e,"c"),s=a.call(e,"e")),l={get:t,set:n,configurable:r,enumerable:s},c?i(o(c),l):l}},{"es5-ext/object/assign":28,"es5-ext/object/is-callable":31,"es5-ext/object/normalize-options":35,"es5-ext/string/#/contains":38}],28:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":29,"./shim":30}],29:[function(e,t,n){"use strict";t.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(e={foo:"raz"},t(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},{}],30:[function(e,t,n){"use strict";var r=e("../keys"),i=e("../valid-value"),o=Math.max;t.exports=function(e,t){var n,u,a,s=o(arguments.length,2);for(e=Object(i(e)),a=function(r){try{e[r]=t[r]}catch(i){n||(n=i)}},u=1;u<s;++u)t=arguments[u],r(t).forEach(a);if(void 0!==n)throw n;return e}},{"../keys":32,"../valid-value":37}],31:[function(e,t,n){"use strict";t.exports=function(e){return"function"==typeof e}},{}],32:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":33,"./shim":34}],33:[function(e,t,n){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},{}],34:[function(e,t,n){"use strict";var r=Object.keys;t.exports=function(e){return r(null==e?e:Object(e))}},{}],35:[function(e,t,n){"use strict";var r=Array.prototype.forEach,i=Object.create,o=function(e,t){var n;for(n in e)t[n]=e[n]};t.exports=function(e){var t=i(null);return r.call(arguments,function(e){null!=e&&o(Object(e),t)}),t}},{}],36:[function(e,t,n){"use strict";t.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},{}],37:[function(e,t,n){"use strict";t.exports=function(e){if(null==e)throw new TypeError("Cannot use null or undefined");return e}},{}],38:[function(e,t,n){"use strict";t.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":39,"./shim":40}],39:[function(e,t,n){"use strict";var r="razdwatrzy";t.exports=function(){return"function"==typeof r.contains&&(r.contains("dwa")===!0&&r.contains("foo")===!1)}},{}],40:[function(e,t,n){"use strict";var r=String.prototype.indexOf;t.exports=function(e){return r.call(this,e,arguments[1])>-1}},{}],41:[function(e,t,n){"use strict";var r,i,o,u,a,s,c,l=e("d"),f=e("es5-ext/object/valid-callable"),h=Function.prototype.apply,p=Function.prototype.call,d=Object.create,v=Object.defineProperty,y=Object.defineProperties,g=Object.prototype.hasOwnProperty,_={configurable:!0,enumerable:!1,writable:!0};r=function(e,t){var n;return f(t),g.call(this,"__ee__")?n=this.__ee__:(n=_.value=d(null),v(this,"__ee__",_),_.value=null),n[e]?"object"==typeof n[e]?n[e].push(t):n[e]=[n[e],t]:n[e]=t,this},i=function(e,t){var n,i;return f(t),i=this,r.call(this,e,n=function(){o.call(i,e,n),h.call(t,this,arguments)}),n.__eeOnceListener__=t,this},o=function(e,t){var n,r,i,o;if(f(t),!g.call(this,"__ee__"))return this;if(n=this.__ee__,!n[e])return this;if(r=n[e],"object"==typeof r)for(o=0;i=r[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===r.length?n[e]=r[o?0:1]:r.splice(o,1));else r!==t&&r.__eeOnceListener__!==t||delete n[e];return this},u=function(e){var t,n,r,i,o;if(g.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;r=i[t];++t)h.call(r,this,o)}else switch(arguments.length){case 1:p.call(i,this);break;case 2:p.call(i,this,arguments[1]);break;case 3:p.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),t=1;t<n;++t)o[t-1]=arguments[t];h.call(i,this,o)}},a={on:r,once:i,off:o,emit:u},s={on:l(r),once:l(i),off:l(o),emit:l(u)},c=y({},s),t.exports=n=function(e){return null==e?d(c):y(Object(e),s)},n.methods=a},{d:27,"es5-ext/object/valid-callable":36}],42:[function(e,t,n){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function i(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}t.exports=function(e){return null!=e&&(r(e)||i(e)||!!e._isBuffer)}},{}],43:[function(t,n,r){(function(i){!function(t){if("object"==typeof r&&"undefined"!=typeof n)n.exports=t();else if("function"==typeof e&&e.amd)e([],t);else{var o;o="undefined"!=typeof window?window:"undefined"!=typeof i?i:"undefined"!=typeof self?self:this,o.localforage=t()}}(function(){return function e(n,r,i){function o(a,s){if(!r[a]){if(!n[a]){var c="function"==typeof t&&t;if(!s&&c)return c(a,!0);if(u)return u(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[a]={exports:{}};n[a][0].call(f.exports,function(e){var t=n[a][1][e];return o(t?t:e)},f,f.exports,e,n,r,i)}return r[a].exports}for(var u="function"==typeof t&&t,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(e,t,n){"use strict";function r(){}function i(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,e!==r&&s(this,e)}function o(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function u(e,t,n){d(function(){var r;try{r=t(n)}catch(i){return v.reject(e,i)}r===e?v.reject(e,new TypeError("Cannot resolve promise with itself")):v.resolve(e,r)})}function a(e){var t=e&&e.then;if(e&&"object"==typeof e&&"function"==typeof t)return function(){t.apply(e,arguments)}}function s(e,t){function n(t){o||(o=!0,v.reject(e,t))}function r(t){o||(o=!0,v.resolve(e,t))}function i(){t(r,n)}var o=!1,u=c(i);"error"===u.status&&n(u.value)}function c(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}function l(e){return e instanceof this?e:v.resolve(new this(r),e)}function f(e){var t=new this(r);return v.reject(t,e)}function h(e){function t(e,t){function r(e){u[t]=e,++a!==i||o||(o=!0,v.resolve(c,u))}n.resolve(e).then(r,function(e){o||(o=!0,v.reject(c,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var u=new Array(i),a=0,s=-1,c=new this(r);++s<i;)t(e[s],s);return c}function p(e){function t(e){n.resolve(e).then(function(e){o||(o=!0,v.resolve(a,e))},function(e){o||(o=!0,v.reject(a,e))})}var n=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var i=e.length,o=!1;if(!i)return this.resolve([]);for(var u=-1,a=new this(r);++u<i;)t(e[u]);return a}var d=e(2),v={},y=["REJECTED"],g=["FULFILLED"],_=["PENDING"];t.exports=n=i,i.prototype["catch"]=function(e){return this.then(null,e)},i.prototype.then=function(e,t){if("function"!=typeof e&&this.state===g||"function"!=typeof t&&this.state===y)return this;var n=new this.constructor(r);if(this.state!==_){var i=this.state===g?e:t;u(n,i,this.outcome)}else this.queue.push(new o(n,e,t));return n},o.prototype.callFulfilled=function(e){v.resolve(this.promise,e)},o.prototype.otherCallFulfilled=function(e){u(this.promise,this.onFulfilled,e)},o.prototype.callRejected=function(e){v.reject(this.promise,e)},o.prototype.otherCallRejected=function(e){u(this.promise,this.onRejected,e)},v.resolve=function(e,t){var n=c(a,t);if("error"===n.status)return v.reject(e,n.value);var r=n.value;if(r)s(e,r);else{e.state=g,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},v.reject=function(e,t){e.state=y,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},n.resolve=l,n.reject=f,n.all=h,n.race=p},{2:2}],2:[function(e,t,n){(function(e){"use strict";function n(){l=!0;for(var e,t,n=f.length;n;){for(t=f,f=[],e=-1;++e<n;)t[e]();n=f.length}l=!1}function r(e){1!==f.push(e)||l||i()}var i,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var u=0,a=new o(n),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),i=function(){s.data=u=++u%2}}else if(e.setImmediate||"undefined"==typeof e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){n(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(n,0)};else{var c=new e.MessageChannel;c.port1.onmessage=n,i=function(){c.port2.postMessage(0)}}var l,f=[];t.exports=r}).call(this,"undefined"!=typeof i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){(function(t){"use strict";"function"!=typeof t.Promise&&(t.Promise=e(1))}).call(this,"undefined"!=typeof i?i:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{1:1}],4:[function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){return"undefined"!=typeof indexedDB?indexedDB:"undefined"!=typeof webkitIndexedDB?webkitIndexedDB:"undefined"!=typeof mozIndexedDB?mozIndexedDB:"undefined"!=typeof OIndexedDB?OIndexedDB:"undefined"!=typeof msIndexedDB?msIndexedDB:void 0}function o(){try{return!!oe&&(!("undefined"!=typeof openDatabase&&"undefined"!=typeof navigator&&navigator.userAgent&&/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent))&&(oe&&"function"==typeof oe.open&&"undefined"!=typeof IDBKeyRange))}catch(e){return!1}}function u(){return"function"==typeof openDatabase}function a(){try{return"undefined"!=typeof localStorage&&"setItem"in localStorage&&localStorage.setItem}catch(e){return!1}}function s(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(n){if("TypeError"!==n.name)throw n;for(var r="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,i=new r,o=0;o<e.length;o+=1)i.append(e[o]);return i.getBlob(t.type)}}function c(e,t){t&&e.then(function(e){t(null,e)},function(e){t(e)})}function l(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),i=0;i<t;i++)r[i]=e.charCodeAt(i);return n}function f(e){return new se(function(t){var n=s([""]);e.objectStore(ce).put(n,"key"),e.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},e.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})["catch"](function(){return!1})}function h(e){return"boolean"==typeof ue?se.resolve(ue):f(e).then(function(e){return ue=e})}function p(e){var t=ae[e.name],n={};n.promise=new se(function(e){n.resolve=e}),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then(function(){return n.promise}):t.dbReady=n.promise}function d(e){var t=ae[e.name],n=t.deferredOperations.pop();n&&n.resolve()}function v(e,t){return new se(function(n,r){if(e.db){if(!t)return n(e.db);p(e),e.db.close()}var i=[e.name];t&&i.push(e.version);var o=oe.open.apply(oe,i);t&&(o.onupgradeneeded=function(t){var n=o.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(ce)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),o.onerror=function(){r(o.error)},o.onsuccess=function(){n(o.result),d(e)}})}function y(e){return v(e,!1)}function g(e){return v(e,!0)}function _(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,i=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),i||n){if(n){var o=e.db.version+1;o>e.version&&(e.version=o)}return!0}return!1}function m(e){return new se(function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)})}function b(e){var t=l(atob(e.data));return s([t],{type:e.type})}function w(e){return e&&e.__local_forage_encoded_blob}function k(e){var t=this,n=t._initReady().then(function(){var e=ae[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady});return n.then(e,e),n}function O(e){function t(){return se.resolve()}var n=this,r={db:null};if(e)for(var i in e)r[i]=e[i];ae||(ae={});var o=ae[r.name];o||(o={forages:[],db:null,dbReady:null,deferredOperations:[]},ae[r.name]=o),o.forages.push(n),n._initReady||(n._initReady=n.ready,n.ready=k);for(var u=[],a=0;a<o.forages.length;a++){var s=o.forages[a];s!==n&&u.push(s._initReady()["catch"](t))}var c=o.forages.slice(0);return se.all(u).then(function(){return r.db=o.db,y(r)}).then(function(e){return r.db=e,_(r,n._defaultConfig.version)?g(r):e}).then(function(e){r.db=o.db=e,n._dbInfo=r;for(var t=0;t<c.length;t++){var i=c[t];i!==n&&(i._dbInfo.db=r.db,i._dbInfo.version=r.version)}})}function x(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new se(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),u=o.get(e);u.onsuccess=function(){var e=u.result;void 0===e&&(e=null),w(e)&&(e=b(e)),t(e)},u.onerror=function(){r(u.error)}})["catch"](r)});return c(r,t),r}function A(e,t){var n=this,r=new se(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),u=o.openCursor(),a=1;u.onsuccess=function(){var n=u.result;if(n){var r=n.value;w(r)&&(r=b(r));var i=e(r,n.key,a++);void 0!==i?t(i):n["continue"]()}else t()},u.onerror=function(){r(u.error)}})["catch"](r)});return c(r,t),r}function S(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new se(function(n,i){var o;r.ready().then(function(){return o=r._dbInfo,t instanceof Blob?h(o.db).then(function(e){return e?t:m(t)}):t}).then(function(t){var r=o.db.transaction(o.storeName,"readwrite"),u=r.objectStore(o.storeName);null===t&&(t=void 0),r.oncomplete=function(){void 0===t&&(t=null),n(t)},r.onabort=r.onerror=function(){var e=a.error?a.error:a.transaction.error;i(e)};var a=u.put(t,e)})["catch"](i)});return c(i,n),i}function R(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new se(function(t,r){n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readwrite"),u=o.objectStore(i.storeName),a=u["delete"](e);o.oncomplete=function(){t()},o.onerror=function(){r(a.error)},o.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}})["catch"](r)});return c(r,t),r}function j(e){var t=this,n=new se(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readwrite"),o=i.objectStore(r.storeName),u=o.clear();i.oncomplete=function(){e()},i.onabort=i.onerror=function(){var e=u.error?u.error:u.transaction.error;n(e)}})["catch"](n)});return c(n,e),n}function E(e){var t=this,n=new se(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),o=i.count();o.onsuccess=function(){e(o.result)},o.onerror=function(){n(o.error)}})["catch"](n)});return c(n,e),n}function I(e,t){var n=this,r=new se(function(t,r){return e<0?void t(null):void n.ready().then(function(){var i=n._dbInfo,o=i.db.transaction(i.storeName,"readonly").objectStore(i.storeName),u=!1,a=o.openCursor();a.onsuccess=function(){var n=a.result;return n?void(0===e?t(n.key):u?t(n.key):(u=!0,n.advance(e))):void t(null)},a.onerror=function(){r(a.error)}})["catch"](r)});return c(r,t),r}function T(e){var t=this,n=new se(function(e,n){t.ready().then(function(){var r=t._dbInfo,i=r.db.transaction(r.storeName,"readonly").objectStore(r.storeName),o=i.openCursor(),u=[];o.onsuccess=function(){var t=o.result;return t?(u.push(t.key),void t["continue"]()):void e(u)},o.onerror=function(){n(o.error)}})["catch"](n)});return c(n,e),n}function C(e){var t,n,r,i,o,u=.75*e.length,a=e.length,s=0;"="===e[e.length-1]&&(u--,"="===e[e.length-2]&&u--);var c=new ArrayBuffer(u),l=new Uint8Array(c);for(t=0;t<a;t+=4)n=fe.indexOf(e[t]),r=fe.indexOf(e[t+1]),i=fe.indexOf(e[t+2]),o=fe.indexOf(e[t+3]),l[s++]=n<<2|r>>4,l[s++]=(15&r)<<4|i>>2,l[s++]=(3&i)<<6|63&o;return c}function P(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=fe[n[t]>>2],r+=fe[(3&n[t])<<4|n[t+1]>>4],r+=fe[(15&n[t+1])<<2|n[t+2]>>6],r+=fe[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function N(e,t){var n="";if(e&&(n=e.toString()),e&&("[object ArrayBuffer]"===e.toString()||e.buffer&&"[object ArrayBuffer]"===e.buffer.toString())){var r,i=de;e instanceof ArrayBuffer?(r=e,i+=ye):(r=e.buffer,"[object Int8Array]"===n?i+=_e:"[object Uint8Array]"===n?i+=me:"[object Uint8ClampedArray]"===n?i+=be:"[object Int16Array]"===n?i+=we:"[object Uint16Array]"===n?i+=Oe:"[object Int32Array]"===n?i+=ke:"[object Uint32Array]"===n?i+=xe:"[object Float32Array]"===n?i+=Ae:"[object Float64Array]"===n?i+=Se:t(new Error("Failed to get type for BinaryArray"))),t(i+P(r))}else if("[object Blob]"===n){var o=new FileReader;o.onload=function(){var n=he+e.type+"~"+P(this.result);t(de+ge+n)},o.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(u){console.error("Couldn't convert value into a JSON string: ",e),t(null,u)}}function D(e){if(e.substring(0,ve)!==de)return JSON.parse(e);var t,n=e.substring(Re),r=e.substring(ve,Re);if(r===ge&&pe.test(n)){var i=n.match(pe);t=i[1],n=n.substring(i[0].length)}var o=C(n);switch(r){case ye:return o;case ge:return s([o],{type:t});case _e:return new Int8Array(o);case me:return new Uint8Array(o);case be:return new Uint8ClampedArray(o);case we:return new Int16Array(o);case Oe:return new Uint16Array(o);case ke:return new Int32Array(o);case xe:return new Uint32Array(o);case Ae:return new Float32Array(o);case Se:return new Float64Array(o);default:throw new Error("Unkown type: "+r)}}function q(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!=typeof e[r]?e[r].toString():e[r];var i=new se(function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(i){return r(i)}n.db.transaction(function(i){i.executeSql("CREATE TABLE IF NOT EXISTS "+n.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],function(){t._dbInfo=n,e()},function(e,t){r(t)})})});return n.serializer=je,i}function L(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new se(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName+" WHERE key = ? LIMIT 1",[e],function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=i.serializer.deserialize(r)),t(r)},function(e,t){r(t)})})})["catch"](r)});return c(r,t),r}function B(e,t){var n=this,r=new se(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT * FROM "+i.storeName,[],function(n,r){for(var o=r.rows,u=o.length,a=0;a<u;a++){var s=o.item(a),c=s.value;if(c&&(c=i.serializer.deserialize(c)),c=e(c,s.key,a+1),void 0!==c)return void t(c)}t()},function(e,t){r(t)})})})["catch"](r)});return c(r,t),r}function U(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=new se(function(n,i){r.ready().then(function(){void 0===t&&(t=null);var o=t,u=r._dbInfo;u.serializer.serialize(t,function(t,r){r?i(r):u.db.transaction(function(r){r.executeSql("INSERT OR REPLACE INTO "+u.storeName+" (key, value) VALUES (?, ?)",[e,t],function(){n(o)},function(e,t){i(t)})},function(e){e.code===e.QUOTA_ERR&&i(e)})})})["catch"](i)});return c(i,n),i}function F(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=new se(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("DELETE FROM "+i.storeName+" WHERE key = ?",[e],function(){t()},function(e,t){r(t)})})})["catch"](r)});return c(r,t),r}function $(e){var t=this,n=new se(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("DELETE FROM "+r.storeName,[],function(){e()},function(e,t){n(t)})})})["catch"](n)});return c(n,e),n}function M(e){var t=this,n=new se(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT COUNT(key) as c FROM "+r.storeName,[],function(t,n){var r=n.rows.item(0).c;e(r)},function(e,t){n(t)})})})["catch"](n)});return c(n,e),n}function W(e,t){var n=this,r=new se(function(t,r){n.ready().then(function(){var i=n._dbInfo;i.db.transaction(function(n){n.executeSql("SELECT key FROM "+i.storeName+" WHERE id = ? LIMIT 1",[e+1],function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)},function(e,t){r(t)})})})["catch"](r)});return c(r,t),r}function z(e){var t=this,n=new se(function(e,n){t.ready().then(function(){var r=t._dbInfo;r.db.transaction(function(t){t.executeSql("SELECT key FROM "+r.storeName,[],function(t,n){for(var r=[],i=0;i<n.rows.length;i++)r.push(n.rows.item(i).key);e(r)},function(e,t){n(t)})})})["catch"](n)});return c(n,e),n}function J(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=n.name+"/",n.storeName!==t._defaultConfig.storeName&&(n.keyPrefix+=n.storeName+"/"),t._dbInfo=n,n.serializer=je,se.resolve()}function K(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}});return c(n,e),n}function H(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r});return c(r,t),r}function X(e,t){var n=this,r=n.ready().then(function(){for(var t=n._dbInfo,r=t.keyPrefix,i=r.length,o=localStorage.length,u=1,a=0;a<o;a++){var s=localStorage.key(a);if(0===s.indexOf(r)){var c=localStorage.getItem(s);if(c&&(c=t.serializer.deserialize(c)),c=e(c,s.substring(i),u++),void 0!==c)return c}}});return c(r,t),r}function V(e,t){var n=this,r=n.ready().then(function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(i){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t});return c(r,t),r}function Q(e){var t=this,n=t.ready().then(function(){for(var e=t._dbInfo,n=localStorage.length,r=[],i=0;i<n;i++)0===localStorage.key(i).indexOf(e.keyPrefix)&&r.push(localStorage.key(i).substring(e.keyPrefix.length));return r});return c(n,e),n}function G(e){var t=this,n=t.keys().then(function(e){return e.length});return c(n,e),n}function Z(e,t){var n=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var r=n.ready().then(function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)});return c(r,t),r}function Y(e,t,n){var r=this;"string"!=typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e));var i=r.ready().then(function(){void 0===t&&(t=null);var n=t;return new se(function(i,o){var u=r._dbInfo;u.serializer.serialize(t,function(t,r){if(r)o(r);else try{localStorage.setItem(u.keyPrefix+e,t),i(n)}catch(a){"QuotaExceededError"!==a.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==a.name||o(a),o(a)}})})});return c(i,n),i}function ee(e,t,n){"function"==typeof t&&e.then(t),"function"==typeof n&&e["catch"](n)}function te(e,t){e[t]=function(){var n=arguments;return e.ready().then(function(){return e[t].apply(e,n)})}}function ne(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Le(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}function re(e){for(var t in Ce)if(Ce.hasOwnProperty(t)&&Ce[t]===e)return!0;return!1}var ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},oe=i();"undefined"==typeof Promise&&"undefined"!=typeof e&&e(3);var ue,ae,se=Promise,ce="local-forage-detect-blob-support",le={_driver:"asyncStorage",_initStorage:O,iterate:A,getItem:x,setItem:S,removeItem:R,clear:j,length:E,key:I,keys:T},fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",he="~~local_forage_type~",pe=/^~~local_forage_type~([^~]+)~/,de="__lfsc__:",ve=de.length,ye="arbf",ge="blob",_e="si08",me="ui08",be="uic8",we="si16",ke="si32",Oe="ur16",xe="ui32",Ae="fl32",Se="fl64",Re=ve+ye.length,je={
serialize:N,deserialize:D,stringToBuffer:C,bufferToString:P},Ee={_driver:"webSQLStorage",_initStorage:q,iterate:B,getItem:L,setItem:U,removeItem:F,clear:$,length:M,key:W,keys:z},Ie={_driver:"localStorageWrapper",_initStorage:J,iterate:X,getItem:H,setItem:Y,removeItem:Z,clear:K,length:G,key:V,keys:Q},Te={},Ce={INDEXEDDB:"asyncStorage",LOCALSTORAGE:"localStorageWrapper",WEBSQL:"webSQLStorage"},Pe=[Ce.INDEXEDDB,Ce.WEBSQL,Ce.LOCALSTORAGE],Ne=["clear","getItem","iterate","key","keys","length","removeItem","setItem"],De={description:"",driver:Pe.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1},qe={};qe[Ce.INDEXEDDB]=o(),qe[Ce.WEBSQL]=u(),qe[Ce.LOCALSTORAGE]=a();var Le=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Be=function(){function e(t){r(this,e),this.INDEXEDDB=Ce.INDEXEDDB,this.LOCALSTORAGE=Ce.LOCALSTORAGE,this.WEBSQL=Ce.WEBSQL,this._defaultConfig=ne({},De),this._config=ne({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver)}return e.prototype.config=function(e){if("object"===("undefined"==typeof e?"undefined":ie(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e)"storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),this._config[t]=e[t];return"driver"in e&&e.driver&&this.setDriver(this._config.driver),!0}return"string"==typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new se(function(t,n){try{var r=e._driver,i=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver"),o=new Error("Custom driver name already in use: "+e._driver);if(!e._driver)return void n(i);if(re(e._driver))return void n(o);for(var u=Ne.concat("_initStorage"),a=0;a<u.length;a++){var s=u[a];if(!s||!e[s]||"function"!=typeof e[s])return void n(i)}var c=se.resolve(!0);"_support"in e&&(c=e._support&&"function"==typeof e._support?e._support():se.resolve(!!e._support)),c.then(function(n){qe[r]=n,Te[r]=e,t()},n)}catch(l){n(l)}});return ee(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=this,i=se.resolve().then(function(){if(!re(e)){if(Te[e])return Te[e];throw new Error("Driver not found.")}switch(e){case r.INDEXEDDB:return le;case r.LOCALSTORAGE:return Ie;case r.WEBSQL:return Ee}});return ee(i,t,n),i},e.prototype.getSerializer=function(e){var t=se.resolve(je);return ee(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then(function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready});return ee(n,e,e),n},e.prototype.setDriver=function(e,t,n){function r(){o._config.driver=o.driver()}function i(e){return function(){function t(){for(;n<e.length;){var i=e[n];return n++,o._dbInfo=null,o._ready=null,o.getDriver(i).then(function(e){return o._extend(e),r(),o._ready=o._initStorage(o._config),o._ready})["catch"](t)}r();var u=new Error("No available storage method found.");return o._driverSet=se.reject(u),o._driverSet}var n=0;return t()}}var o=this;Le(e)||(e=[e]);var u=this._getSupportedDrivers(e),a=null!==this._driverSet?this._driverSet["catch"](function(){return se.resolve()}):se.resolve();return this._driverSet=a.then(function(){var e=u[0];return o._dbInfo=null,o._ready=null,o.getDriver(e).then(function(e){o._driver=e._driver,r(),o._wrapLibraryMethodsWithReady(),o._initDriver=i(u)})})["catch"](function(){r();var e=new Error("No available storage method found.");return o._driverSet=se.reject(e),o._driverSet}),ee(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!qe[e]},e.prototype._extend=function(e){ne(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];this.supports(i)&&t.push(i)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0;e<Ne.length;e++)te(this,Ne[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),Ue=new Be;t.exports=Ue},{3:3}]},{},[4])(4)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],44:[function(e,t,n){!function(e){var r={},i={};r.length=0,r.getItem=function(e){return i[e]||null},r.setItem=function(e,t){"undefined"==typeof t?r.removeItem(e):(i.hasOwnProperty(e)||r.length++,i[e]=""+t)},r.removeItem=function(e){i.hasOwnProperty(e)&&(delete i[e],r.length--)},r.key=function(e){return Object.keys(i)[e]||null},r.clear=function(){i={},r.length=0},"object"==typeof n?t.exports=r:e.localStorageMemory=r}(this)},{}],45:[function(t,n,r){(function(t){(function(){function i(e,t){if(e!==t){var n=null===e,r=e===S,i=e===e,o=null===t,u=t===S,a=t===t;if(e>t&&!o||!i||n&&!u&&a||r&&a)return 1;if(e<t&&!n||!a||o&&!r&&i||u&&i)return-1}return 0}function o(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function u(e,t,n){if(t!==t)return g(e,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function a(e){return"function"==typeof e||!1}function s(e){return null==e?"":e+""}function c(e,t){for(var n=-1,r=e.length;++n<r&&t.indexOf(e.charAt(n))>-1;);return n}function l(e,t){for(var n=e.length;n--&&t.indexOf(e.charAt(n))>-1;);return n}function f(e,t){return i(e.criteria,t.criteria)||e.index-t.index}function h(e,t,n){for(var r=-1,o=e.criteria,u=t.criteria,a=o.length,s=n.length;++r<a;){var c=i(o[r],u[r]);if(c){if(r>=s)return c;var l=n[r];return c*("asc"===l||l===!0?1:-1)}}return e.index-t.index}function p(e){return Je[e]}function d(e){return Ke[e]}function v(e,t,n){return t?e=Ve[e]:n&&(e=Qe[e]),"\\"+e}function y(e){return"\\"+Qe[e]}function g(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var o=e[i];if(o!==o)return i}return-1}function _(e){return!!e&&"object"==typeof e}function m(e){return e<=160&&e>=9&&e<=13||32==e||160==e||5760==e||6158==e||e>=8192&&(e<=8202||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function b(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;)e[n]===t&&(e[n]=J,o[++i]=n);return o}function w(e,t){for(var n,r=-1,i=e.length,o=-1,u=[];++r<i;){var a=e[r],s=t?t(a,r,e):a;r&&n===s||(n=s,u[++o]=a)}return u}function k(e){for(var t=-1,n=e.length;++t<n&&m(e.charCodeAt(t)););return t}function O(e){for(var t=e.length;t--&&m(e.charCodeAt(t)););return t}function x(e){return He[e]}function A(e){function t(e){if(_(e)&&!Ea(e)&&!(e instanceof m)){if(e instanceof r)return e;if(tu.call(e,"__chain__")&&tu.call(e,"__wrapped__"))return pr(e)}return new r(e)}function n(){}function r(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function m(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ju,this.__views__=[]}function Z(){var e=new m(this.__wrapped__);return e.__actions__=et(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=et(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=et(this.__views__),e}function ne(){if(this.__filtered__){var e=new m(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function ie(){var e=this.__wrapped__.value(),t=this.__dir__,n=Ea(e),r=t<0,i=n?e.length:0,o=Kn(0,i,this.__views__),u=o.start,a=o.end,s=a-u,c=r?a:u-1,l=this.__iteratees__,f=l.length,h=0,p=Ou(s,this.__takeCount__);if(!n||i<$||i==s&&p==s)return nn(r&&n?e.reverse():e,this.__actions__);var d=[];e:for(;s--&&h<p;){c+=t;for(var v=-1,y=e[c];++v<f;){var g=l[v],_=g.iteratee,m=g.type,b=_(y);if(m==W)y=b;else if(!b){if(m==M)continue e;break e}}d[h++]=y}return d}function Je(){this.__data__={}}function Ke(e){return this.has(e)&&delete this.__data__[e]}function He(e){return"__proto__"==e?S:this.__data__[e]}function Xe(e){return"__proto__"!=e&&tu.call(this.__data__,e)}function Ve(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this}function Qe(e){var t=e?e.length:0;for(this.data={hash:gu(null),set:new fu};t--;)this.push(e[t])}function Ge(e,t){var n=e.data,r="string"==typeof t||Ni(t)?n.set.has(t):n.hash[t];return r?0:-1}function Ze(e){var t=this.data;"string"==typeof e||Ni(e)?t.set.add(e):t.hash[e]=!0}function Ye(e,t){for(var n=-1,r=e.length,i=-1,o=t.length,u=$o(r+o);++n<r;)u[n]=e[n];for(;++i<o;)u[n++]=t[i];return u}function et(e,t){var n=-1,r=e.length;for(t||(t=$o(r));++n<r;)t[n]=e[n];return t}function tt(e,t){for(var n=-1,r=e.length;++n<r&&t(e[n],n,e)!==!1;);return e}function nt(e,t){for(var n=e.length;n--&&t(e[n],n,e)!==!1;);return e}function ot(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function ut(e,t,n,r){for(var i=-1,o=e.length,u=r,a=u;++i<o;){var s=e[i],c=+t(s);n(c,u)&&(u=c,a=s)}return a}function at(e,t){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var u=e[n];t(u,n,e)&&(o[++i]=u)}return o}function st(e,t){for(var n=-1,r=e.length,i=$o(r);++n<r;)i[n]=t(e[n],n,e);return i}function ct(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function lt(e,t,n,r){var i=-1,o=e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function ft(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function ht(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function pt(e,t){for(var n=e.length,r=0;n--;)r+=+t(e[n])||0;return r}function dt(e,t){return e===S?t:e}function vt(e,t,n,r){return e!==S&&tu.call(r,n)?e:t}function yt(e,t,n){for(var r=-1,i=Fa(t),o=i.length;++r<o;){var u=i[r],a=e[u],s=n(a,t[u],u,e,t);(s===s?s===a:a!==a)&&(a!==S||u in e)||(e[u]=s)}return e}function gt(e,t){return null==t?e:mt(t,Fa(t),e)}function _t(e,t){for(var n=-1,r=null==e,i=!r&&Gn(e),o=i?e.length:0,u=t.length,a=$o(u);++n<u;){var s=t[n];i?a[n]=Zn(s,o)?e[s]:S:a[n]=r?S:e[s]}return a}function mt(e,t,n){n||(n={});for(var r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}function bt(e,t,n){var r=typeof e;return"function"==r?t===S?e:un(e,t,n):null==e?jo:"object"==r?Ut(e):t===S?No(e):Ft(e,t)}function wt(e,t,n,r,i,o,u){var a;if(n&&(a=i?n(e,r,i):n(e)),a!==S)return a;if(!Ni(e))return e;var s=Ea(e);if(s){if(a=Hn(e),!t)return et(e,a)}else{var c=ru.call(e),l=c==G;if(c!=ee&&c!=K&&(!l||i))return ze[c]?Vn(e,c,t):i?e:{};if(a=Xn(l?{}:e),!t)return gt(a,e)}o||(o=[]),u||(u=[]);for(var f=o.length;f--;)if(o[f]==e)return u[f];return o.push(e),u.push(a),(s?tt:Tt)(e,function(r,i){a[i]=wt(r,t,n,i,e,o,u)}),a}function kt(e,t,n){if("function"!=typeof e)throw new Qo(z);return hu(function(){e.apply(S,n)},t)}function Ot(e,t){var n=e?e.length:0,r=[];if(!n)return r;var i=-1,o=Wn(),a=o==u,s=a&&t.length>=$?vn(t):null,c=t.length;s&&(o=Ge,a=!1,t=s);e:for(;++i<n;){var l=e[i];if(a&&l===l){for(var f=c;f--;)if(t[f]===l)continue e;r.push(l)}else o(t,l,0)<0&&r.push(l)}return r}function xt(e,t){var n=!0;return qu(e,function(e,r,i){return n=!!t(e,r,i)}),n}function At(e,t,n,r){var i=r,o=i;return qu(e,function(e,u,a){var s=+t(e,u,a);(n(s,i)||s===r&&s===o)&&(i=s,o=e)}),o}function St(e,t,n,r){var i=e.length;for(n=null==n?0:+n||0,n<0&&(n=-n>i?0:i+n),r=r===S||r>i?i:+r||0,r<0&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)e[n++]=t;return e}function Rt(e,t){var n=[];return qu(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function jt(e,t,n,r){var i;return n(e,function(e,n,o){if(t(e,n,o))return i=r?n:e,!1}),i}function Et(e,t,n,r){r||(r=[]);for(var i=-1,o=e.length;++i<o;){var u=e[i];_(u)&&Gn(u)&&(n||Ea(u)||Ai(u))?t?Et(u,t,n,r):ct(r,u):n||(r[r.length]=u)}return r}function It(e,t){return Bu(e,t,eo)}function Tt(e,t){return Bu(e,t,Fa)}function Ct(e,t){return Uu(e,t,Fa)}function Pt(e,t){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var u=t[n];Pi(e[u])&&(o[++i]=u)}return o}function Nt(e,t,n){if(null!=e){n!==S&&n in fr(e)&&(t=[n]);for(var r=0,i=t.length;null!=e&&r<i;)e=e[t[r++]];return r&&r==i?e:S}}function Dt(e,t,n,r,i,o){return e===t||(null==e||null==t||!Ni(e)&&!_(t)?e!==e&&t!==t:qt(e,t,Dt,n,r,i,o))}function qt(e,t,n,r,i,o,u){var a=Ea(e),s=Ea(t),c=H,l=H;a||(c=ru.call(e),c==K?c=ee:c!=ee&&(a=Wi(e))),s||(l=ru.call(t),l==K?l=ee:l!=ee&&(s=Wi(t)));var f=c==ee,h=l==ee,p=c==l;if(p&&!a&&!f)return Un(e,t,c);if(!i){var d=f&&tu.call(e,"__wrapped__"),v=h&&tu.call(t,"__wrapped__");if(d||v)return n(d?e.value():e,v?t.value():t,r,i,o,u)}if(!p)return!1;o||(o=[]),u||(u=[]);for(var y=o.length;y--;)if(o[y]==e)return u[y]==t;o.push(e),u.push(t);var g=(a?Bn:Fn)(e,t,n,r,i,o,u);return o.pop(),u.pop(),g}function Lt(e,t,n){var r=t.length,i=r,o=!n;if(null==e)return!i;for(e=fr(e);r--;){var u=t[r];if(o&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++r<i;){u=t[r];var a=u[0],s=e[a],c=u[1];if(o&&u[2]){if(s===S&&!(a in e))return!1}else{var l=n?n(s,c,a):S;if(!(l===S?Dt(c,s,n,!0):l))return!1}}return!0}function Bt(e,t){var n=-1,r=Gn(e)?$o(e.length):[];return qu(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function Ut(e){var t=zn(e);if(1==t.length&&t[0][2]){var n=t[0][0],r=t[0][1];return function(e){return null!=e&&(e[n]===r&&(r!==S||n in fr(e)))}}return function(e){return Lt(e,t)}}function Ft(e,t){var n=Ea(e),r=er(e)&&rr(t),i=e+"";return e=hr(e),function(o){if(null==o)return!1;var u=i;if(o=fr(o),(n||!r)&&!(u in o)){if(o=1==e.length?o:Nt(o,Xt(e,0,-1)),null==o)return!1;u=Sr(e),o=fr(o)}return o[u]===t?t!==S||u in o:Dt(t,o[u],S,!0)}}function $t(e,t,n,r,i){if(!Ni(e))return e;var o=Gn(t)&&(Ea(t)||Wi(t)),u=o?S:Fa(t);return tt(u||t,function(a,s){if(u&&(s=a,a=t[s]),_(a))r||(r=[]),i||(i=[]),Mt(e,t,s,$t,n,r,i);else{var c=e[s],l=n?n(c,a,s,e,t):S,f=l===S;f&&(l=a),l===S&&(!o||s in e)||!f&&(l===l?l===c:c!==c)||(e[s]=l)}}),e}function Mt(e,t,n,r,i,o,u){for(var a=o.length,s=t[n];a--;)if(o[a]==s)return void(e[n]=u[a]);var c=e[n],l=i?i(c,s,n,e,t):S,f=l===S;f&&(l=s,Gn(s)&&(Ea(s)||Wi(s))?l=Ea(c)?c:Gn(c)?et(c):[]:Fi(s)||Ai(s)?l=Ai(c)?Xi(c):Fi(c)?c:{}:f=!1),o.push(s),u.push(l),f?e[n]=r(l,s,i,o,u):(l===l?l!==c:c===c)&&(e[n]=l)}function Wt(e){return function(t){return null==t?S:t[e]}}function zt(e){var t=e+"";return e=hr(e),function(n){return Nt(n,e,t)}}function Jt(e,t){for(var n=e?t.length:0;n--;){var r=t[n];if(r!=i&&Zn(r)){var i=r;pu.call(e,r,1)}}return e}function Kt(e,t){return e+_u(Su()*(t-e+1))}function Ht(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function Xt(e,t,n){var r=-1,i=e.length;t=null==t?0:+t||0,t<0&&(t=-t>i?0:i+t),n=n===S||n>i?i:+n||0,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=$o(i);++r<i;)o[r]=e[r+t];return o}function Vt(e,t){var n;return qu(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function Qt(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function Gt(e,t,n){var r=$n(),i=-1;t=st(t,function(e){return r(e)});var o=Bt(e,function(e){var n=st(t,function(t){return t(e)});return{criteria:n,index:++i,value:e}});return Qt(o,function(e,t){return h(e,t,n)})}function Zt(e,t){var n=0;return qu(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function Yt(e,t){var n=-1,r=Wn(),i=e.length,o=r==u,a=o&&i>=$,s=a?vn():null,c=[];s?(r=Ge,o=!1):(a=!1,s=t?[]:c);e:for(;++n<i;){var l=e[n],f=t?t(l,n,e):l;if(o&&l===l){for(var h=s.length;h--;)if(s[h]===f)continue e;t&&s.push(f),c.push(l)}else r(s,f,0)<0&&((t||a)&&s.push(f),c.push(l))}return c}function en(e,t){for(var n=-1,r=t.length,i=$o(r);++n<r;)i[n]=e[t[n]];return i}function tn(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Xt(e,r?0:o,r?o+1:i):Xt(e,r?o+1:0,r?i:o)}function nn(e,t){var n=e;n instanceof m&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var o=t[r];n=o.func.apply(o.thisArg,ct([n],o.args))}return n}function rn(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t===t&&i<=Tu){for(;r<i;){var o=r+i>>>1,u=e[o];(n?u<=t:u<t)&&null!==u?r=o+1:i=o}return i}return on(e,t,jo,n)}function on(e,t,n,r){t=n(t);for(var i=0,o=e?e.length:0,u=t!==t,a=null===t,s=t===S;i<o;){var c=_u((i+o)/2),l=n(e[c]),f=l!==S,h=l===l;if(u)var p=h||r;else p=a?h&&f&&(r||null!=l):s?h&&(r||f):null!=l&&(r?l<=t:l<t);p?i=c+1:o=c}return Ou(o,Iu)}function un(e,t,n){if("function"!=typeof e)return jo;if(t===S)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)};case 5:return function(n,r,i,o,u){return e.call(t,n,r,i,o,u)}}return function(){return e.apply(t,arguments)}}function an(e){var t=new uu(e.byteLength),n=new du(t);return n.set(new du(e)),t}function sn(e,t,n){for(var r=n.length,i=-1,o=ku(e.length-r,0),u=-1,a=t.length,s=$o(a+o);++u<a;)s[u]=t[u];for(;++i<r;)s[n[i]]=e[i];for(;o--;)s[u++]=e[i++];return s}function cn(e,t,n){for(var r=-1,i=n.length,o=-1,u=ku(e.length-i,0),a=-1,s=t.length,c=$o(u+s);++o<u;)c[o]=e[o];for(var l=o;++a<s;)c[l+a]=t[a];for(;++r<i;)c[l+n[r]]=e[o++];return c}function ln(e,t){return function(n,r,i){var o=t?t():{};if(r=$n(r,i,3),Ea(n))for(var u=-1,a=n.length;++u<a;){var s=n[u];e(o,s,r(s,u,n),n)}else qu(n,function(t,n,i){e(o,t,r(t,n,i),i)});return o}}function fn(e){return gi(function(t,n){var r=-1,i=null==t?0:n.length,o=i>2?n[i-2]:S,u=i>2?n[2]:S,a=i>1?n[i-1]:S;for("function"==typeof o?(o=un(o,a,5),i-=2):(o="function"==typeof a?a:S,i-=o?1:0),u&&Yn(n[0],n[1],u)&&(o=i<3?S:o,i=1);++r<i;){var s=n[r];s&&e(t,s,o)}return t})}function hn(e,t){return function(n,r){var i=n?Mu(n):0;if(!nr(i))return e(n,r);for(var o=t?i:-1,u=fr(n);(t?o--:++o<i)&&r(u[o],o,u)!==!1;);return n}}function pn(e){return function(t,n,r){for(var i=fr(t),o=r(t),u=o.length,a=e?u:-1;e?a--:++a<u;){var s=o[a];if(n(i[s],s,i)===!1)break}return t}}function dn(e,t){function n(){var i=this&&this!==rt&&this instanceof n?r:e;return i.apply(t,arguments)}var r=gn(e);return n}function vn(e){return gu&&fu?new Qe(e):null}function yn(e){return function(t){for(var n=-1,r=Ao(lo(t)),i=r.length,o="";++n<i;)o=e(o,r[n],n);return o}}function gn(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Du(e.prototype),r=e.apply(n,t);return Ni(r)?r:n}}function _n(e){function t(n,r,i){i&&Yn(n,r,i)&&(r=S);var o=Ln(n,e,S,S,S,S,S,r);return o.placeholder=t.placeholder,o}return t}function mn(e,t){return gi(function(n){var r=n[0];return null==r?r:(n.push(t),e.apply(S,n))})}function bn(e,t){return function(n,r,i){if(i&&Yn(n,r,i)&&(r=S),r=$n(r,i,3),1==r.length){n=Ea(n)?n:lr(n);var o=ut(n,r,e,t);if(!n.length||o!==t)return o}return At(n,r,e,t)}}function wn(e,t){return function(n,r,i){if(r=$n(r,i,3),Ea(n)){var u=o(n,r,t);return u>-1?n[u]:S}return jt(n,r,e)}}function kn(e){return function(t,n,r){return t&&t.length?(n=$n(n,r,3),o(t,n,e)):-1}}function On(e){return function(t,n,r){return n=$n(n,r,3),jt(t,n,e,!0)}}function xn(e){return function(){for(var t,n=arguments.length,i=e?n:-1,o=0,u=$o(n);e?i--:++i<n;){var a=u[o++]=arguments[i];if("function"!=typeof a)throw new Qo(z);!t&&r.prototype.thru&&"wrapper"==Mn(a)&&(t=new r([],(!0)))}for(i=t?-1:n;++i<n;){a=u[i];var s=Mn(a),c="wrapper"==s?$u(a):S;t=c&&tr(c[0])&&c[1]==(D|T|P|q)&&!c[4].length&&1==c[9]?t[Mn(c[0])].apply(t,c[3]):1==a.length&&tr(a)?t[s]():t.thru(a)}return function(){var e=arguments,r=e[0];if(t&&1==e.length&&Ea(r)&&r.length>=$)return t.plant(r).value();for(var i=0,o=n?u[i].apply(this,e):r;++i<n;)o=u[i].call(this,o);return o}}}function An(e,t){return function(n,r,i){return"function"==typeof r&&i===S&&Ea(n)?e(n,r):t(n,un(r,i,3))}}function Sn(e){return function(t,n,r){return"function"==typeof n&&r===S||(n=un(n,r,3)),e(t,n,eo)}}function Rn(e){return function(t,n,r){return"function"==typeof n&&r===S||(n=un(n,r,3)),e(t,n)}}function jn(e){return function(t,n,r){var i={};return n=$n(n,r,3),Tt(t,function(t,r,o){var u=n(t,r,o);r=e?u:r,t=e?t:u,i[r]=t}),i}}function En(e){return function(t,n,r){return t=s(t),(e?t:"")+Pn(t,n,r)+(e?"":t)}}function In(e){var t=gi(function(n,r){var i=b(r,t.placeholder);return Ln(n,e,S,r,i)});return t}function Tn(e,t){return function(n,r,i,o){var u=arguments.length<3;return"function"==typeof r&&o===S&&Ea(n)?e(n,r,i,u):Ht(n,$n(r,o,4),i,u,t)}}function Cn(e,t,n,r,i,o,u,a,s,c){function l(){for(var _=arguments.length,m=_,w=$o(_);m--;)w[m]=arguments[m];if(r&&(w=sn(w,r,i)),o&&(w=cn(w,o,u)),d||y){var k=l.placeholder,O=b(w,k);if(_-=O.length,_<c){var x=a?et(a):S,A=ku(c-_,0),R=d?O:S,I=d?S:O,T=d?w:S,C=d?S:w;t|=d?P:N,t&=~(d?N:P),v||(t&=~(j|E));var D=[e,t,n,T,R,C,I,x,s,A],q=Cn.apply(S,D);return tr(e)&&Wu(q,D),q.placeholder=k,q}}var L=h?n:this,B=p?L[e]:e;return a&&(w=sr(w,a)),f&&s<w.length&&(w.length=s),this&&this!==rt&&this instanceof l&&(B=g||gn(e)),B.apply(L,w)}var f=t&D,h=t&j,p=t&E,d=t&T,v=t&I,y=t&C,g=p?S:gn(e);return l}function Pn(e,t,n){var r=e.length;if(t=+t,r>=t||!bu(t))return"";var i=t-r;return n=null==n?" ":n+"",go(n,yu(i/n.length)).slice(0,i)}function Nn(e,t,n,r){function i(){for(var t=-1,a=arguments.length,s=-1,c=r.length,l=$o(c+a);++s<c;)l[s]=r[s];for(;a--;)l[s++]=arguments[++t];var f=this&&this!==rt&&this instanceof i?u:e;return f.apply(o?n:this,l)}var o=t&j,u=gn(e);return i}function Dn(e){var t=Jo[e];return function(e,n){return n=n===S?0:+n||0,n?(n=cu(10,n),t(e*n)/n):t(e)}}function qn(e){return function(t,n,r,i){var o=$n(r);return null==r&&o===bt?rn(t,n,e):on(t,n,o(r,i,1),e)}}function Ln(e,t,n,r,i,o,u,a){var s=t&E;if(!s&&"function"!=typeof e)throw new Qo(z);var c=r?r.length:0;if(c||(t&=~(P|N),r=i=S),c-=i?i.length:0,t&N){var l=r,f=i;r=i=S}var h=s?S:$u(e),p=[e,t,n,r,i,l,f,o,u,a];if(h&&(ir(p,h),t=p[1],a=p[9]),p[9]=null==a?s?0:e.length:ku(a-c,0)||0,t==j)var d=dn(p[0],p[2]);else d=t!=P&&t!=(j|P)||p[4].length?Cn.apply(S,p):Nn.apply(S,p);var v=h?Fu:Wu;return v(d,p)}function Bn(e,t,n,r,i,o,u){var a=-1,s=e.length,c=t.length;if(s!=c&&!(i&&c>s))return!1;for(;++a<s;){var l=e[a],f=t[a],h=r?r(i?f:l,i?l:f,a):S;if(h!==S){if(h)continue;return!1}if(i){if(!ht(t,function(e){return l===e||n(l,e,r,i,o,u)}))return!1}else if(l!==f&&!n(l,f,r,i,o,u))return!1}return!0}function Un(e,t,n){switch(n){case X:case V:return+e==+t;case Q:return e.name==t.name&&e.message==t.message;case Y:return e!=+e?t!=+t:e==+t;case te:case re:return e==t+""}return!1}function Fn(e,t,n,r,i,o,u){var a=Fa(e),s=a.length,c=Fa(t),l=c.length;if(s!=l&&!i)return!1;for(var f=s;f--;){var h=a[f];if(!(i?h in t:tu.call(t,h)))return!1}for(var p=i;++f<s;){h=a[f];var d=e[h],v=t[h],y=r?r(i?v:d,i?d:v,h):S;if(!(y===S?n(d,v,r,i,o,u):y))return!1;p||(p="constructor"==h)}if(!p){var g=e.constructor,_=t.constructor;if(g!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof g&&g instanceof g&&"function"==typeof _&&_ instanceof _))return!1}return!0}function $n(e,n,r){var i=t.callback||So;return i=i===So?bt:i,r?i(e,n,r):i}function Mn(e){for(var t=e.name,n=Nu[t],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function Wn(e,n,r){var i=t.indexOf||xr;return i=i===xr?u:i,e?i(e,n,r):i}function zn(e){for(var t=to(e),n=t.length;n--;)t[n][2]=rr(t[n][1]);return t}function Jn(e,t){var n=null==e?S:e[t];return Li(n)?n:S}function Kn(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],u=o.size;switch(o.type){case"drop":e+=u;break;case"dropRight":t-=u;break;case"take":t=Ou(t,e+u);break;case"takeRight":e=ku(e,t-u)}}return{start:e,end:t}}function Hn(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&tu.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Xn(e){var t=e.constructor;return"function"==typeof t&&t instanceof t||(t=Ho),new t}function Vn(e,t,n){var r=e.constructor;switch(t){case oe:return an(e);case X:case V:return new r((+e));case ue:case ae:case se:case ce:case le:case fe:case he:case pe:case de:var i=e.buffer;return new r(n?an(i):i,e.byteOffset,e.length);case Y:case re:return new r(e);case te:var o=new r(e.source,Pe.exec(e));o.lastIndex=e.lastIndex}return o}function Qn(e,t,n){null==e||er(t,e)||(t=hr(t),e=1==t.length?e:Nt(e,Xt(t,0,-1)),t=Sr(t));var r=null==e?e:e[t];return null==r?S:r.apply(e,n)}function Gn(e){return null!=e&&nr(Mu(e))}function Zn(e,t){return e="number"==typeof e||qe.test(e)?+e:-1,t=null==t?Cu:t,e>-1&&e%1==0&&e<t}function Yn(e,t,n){if(!Ni(n))return!1;var r=typeof t;if("number"==r?Gn(n)&&Zn(t,n.length):"string"==r&&t in n){var i=n[t];return e===e?e===i:i!==i}return!1}function er(e,t){var n=typeof e;if("string"==n&&Se.test(e)||"number"==n)return!0;if(Ea(e))return!1;var r=!Ae.test(e);return r||null!=t&&e in fr(t)}function tr(e){var n=Mn(e);if(!(n in m.prototype))return!1;var r=t[n];if(e===r)return!0;var i=$u(r);return!!i&&e===i[0]}function nr(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Cu}function rr(e){return e===e&&!Ni(e)}function ir(e,t){var n=e[1],r=t[1],i=n|r,o=i<D,u=r==D&&n==T||r==D&&n==q&&e[7].length<=t[8]||r==(D|q)&&n==T;if(!o&&!u)return e;r&j&&(e[2]=t[2],i|=n&j?0:I);var a=t[3];if(a){var s=e[3];e[3]=s?sn(s,a,t[4]):et(a),e[4]=s?b(e[3],J):et(t[4])}return a=t[5],a&&(s=e[5],e[5]=s?cn(s,a,t[6]):et(a),e[6]=s?b(e[5],J):et(t[6])),a=t[7],a&&(e[7]=et(a)),r&D&&(e[8]=null==e[8]?t[8]:Ou(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function or(e,t){return e===S?t:Ia(e,t,or)}function ur(e,t){e=fr(e);for(var n=-1,r=t.length,i={};++n<r;){var o=t[n];o in e&&(i[o]=e[o])}return i}function ar(e,t){var n={};return It(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function sr(e,t){for(var n=e.length,r=Ou(t.length,n),i=et(e);r--;){var o=t[r];e[r]=Zn(o,n)?i[o]:S}return e}function cr(e){for(var t=eo(e),n=t.length,r=n&&e.length,i=!!r&&nr(r)&&(Ea(e)||Ai(e)),o=-1,u=[];++o<n;){var a=t[o];(i&&Zn(a,r)||tu.call(e,a))&&u.push(a)}return u}function lr(e){return null==e?[]:Gn(e)?Ni(e)?e:Ho(e):oo(e)}function fr(e){return Ni(e)?e:Ho(e)}function hr(e){if(Ea(e))return e;var t=[];return s(e).replace(Re,function(e,n,r,i){t.push(r?i.replace(Te,"$1"):n||e)}),t}function pr(e){return e instanceof m?e.clone():new r(e.__wrapped__,e.__chain__,et(e.__actions__))}function dr(e,t,n){t=(n?Yn(e,t,n):null==t)?1:ku(_u(t)||1,1);for(var r=0,i=e?e.length:0,o=-1,u=$o(yu(i/t));r<i;)u[++o]=Xt(e,r,r+=t);return u}function vr(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var o=e[t];o&&(i[++r]=o)}return i}function yr(e,t,n){var r=e?e.length:0;return r?((n?Yn(e,t,n):null==t)&&(t=1),Xt(e,t<0?0:t)):[]}function gr(e,t,n){var r=e?e.length:0;return r?((n?Yn(e,t,n):null==t)&&(t=1),t=r-(+t||0),Xt(e,0,t<0?0:t)):[]}function _r(e,t,n){return e&&e.length?tn(e,$n(t,n,3),!0,!0):[]}function mr(e,t,n){return e&&e.length?tn(e,$n(t,n,3),!0):[]}function br(e,t,n,r){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Yn(e,t,n)&&(n=0,r=i),St(e,t,n,r)):[]}function wr(e){return e?e[0]:S}function kr(e,t,n){var r=e?e.length:0;return n&&Yn(e,t,n)&&(t=!1),r?Et(e,t):[]}function Or(e){var t=e?e.length:0;return t?Et(e,!0):[]}function xr(e,t,n){var r=e?e.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?ku(r+n,0):n;else if(n){var i=rn(e,t);return i<r&&(t===t?t===e[i]:e[i]!==e[i])?i:-1}return u(e,t,n||0)}function Ar(e){return gr(e,1)}function Sr(e){var t=e?e.length:0;return t?e[t-1]:S}function Rr(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?ku(r+n,0):Ou(n||0,r-1))+1;else if(n){i=rn(e,t,!0)-1;var o=e[i];return(t===t?t===o:o!==o)?i:-1}if(t!==t)return g(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1}function jr(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=Wn(),i=e.length;++n<i;)for(var o=0,u=e[n];(o=r(t,u,o))>-1;)pu.call(t,o,1);return t}function Er(e,t,n){var r=[];if(!e||!e.length)return r;var i=-1,o=[],u=e.length;for(t=$n(t,n,3);++i<u;){var a=e[i];t(a,i,e)&&(r.push(a),o.push(i))}return Jt(e,o),r}function Ir(e){return yr(e,1)}function Tr(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Yn(e,t,n)&&(t=0,n=r),Xt(e,t,n)):[]}function Cr(e,t,n){var r=e?e.length:0;return r?((n?Yn(e,t,n):null==t)&&(t=1),Xt(e,0,t<0?0:t)):[]}function Pr(e,t,n){var r=e?e.length:0;return r?((n?Yn(e,t,n):null==t)&&(t=1),t=r-(+t||0),Xt(e,t<0?0:t)):[]}function Nr(e,t,n){return e&&e.length?tn(e,$n(t,n,3),!1,!0):[]}function Dr(e,t,n){return e&&e.length?tn(e,$n(t,n,3)):[]}function qr(e,t,n,r){var i=e?e.length:0;if(!i)return[];null!=t&&"boolean"!=typeof t&&(r=n,n=Yn(e,t,r)?S:t,t=!1);var o=$n();return null==n&&o===bt||(n=o(n,r,3)),t&&Wn()==u?w(e,n):Yt(e,n)}function Lr(e){if(!e||!e.length)return[];var t=-1,n=0;e=at(e,function(e){if(Gn(e))return n=ku(e.length,n),!0});for(var r=$o(n);++t<n;)r[t]=st(e,Wt(t));return r}function Br(e,t,n){var r=e?e.length:0;if(!r)return[];var i=Lr(e);return null==t?i:(t=un(t,n,4),st(i,function(e){return lt(e,t,S,!0)}))}function Ur(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(Gn(n))var r=r?ct(Ot(r,n),Ot(n,r)):n}return r?Yt(r):[]}function Fr(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||Ea(e[0])||(t=[]);++n<r;){var o=e[n];t?i[o]=t[n]:o&&(i[o[0]]=o[1])}return i}function $r(e){var n=t(e);return n.__chain__=!0,n}function Mr(e,t,n){return t.call(n,e),e}function Wr(e,t,n){return t.call(n,e)}function zr(){return $r(this)}function Jr(){return new r(this.value(),this.__chain__)}function Kr(e){for(var t,r=this;r instanceof n;){var i=pr(r);t?o.__wrapped__=i:t=i;var o=i;r=r.__wrapped__}return o.__wrapped__=e,t}function Hr(){var e=this.__wrapped__,t=function(e){return n&&n.__dir__<0?e:e.reverse()};if(e instanceof m){var n=e;return this.__actions__.length&&(n=new m(this)),n=n.reverse(),n.__actions__.push({func:Wr,args:[t],thisArg:S}),new r(n,this.__chain__)}return this.thru(t)}function Xr(){return this.value()+""}function Vr(){return nn(this.__wrapped__,this.__actions__)}function Qr(e,t,n){var r=Ea(e)?ot:xt;return n&&Yn(e,t,n)&&(t=S),"function"==typeof t&&n===S||(t=$n(t,n,3)),r(e,t)}function Gr(e,t,n){var r=Ea(e)?at:Rt;return t=$n(t,n,3),r(e,t)}function Zr(e,t){return ia(e,Ut(t))}function Yr(e,t,n,r){var i=e?Mu(e):0;return nr(i)||(e=oo(e),i=e.length),n="number"!=typeof n||r&&Yn(t,n,r)?0:n<0?ku(i+n,0):n||0,"string"==typeof e||!Ea(e)&&Mi(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&Wn(e,t,n)>-1}function ei(e,t,n){var r=Ea(e)?st:Bt;return t=$n(t,n,3),r(e,t)}function ti(e,t){return ei(e,No(t))}function ni(e,t,n){var r=Ea(e)?at:Rt;return t=$n(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})}function ri(e,t,n){if(n?Yn(e,t,n):null==t){e=lr(e);var r=e.length;return r>0?e[Kt(0,r-1)]:S}var i=-1,o=Hi(e),r=o.length,u=r-1;for(t=Ou(t<0?0:+t||0,r);++i<t;){var a=Kt(i,u),s=o[a];o[a]=o[i],o[i]=s}return o.length=t,o}function ii(e){return ri(e,ju)}function oi(e){var t=e?Mu(e):0;return nr(t)?t:Fa(e).length}function ui(e,t,n){var r=Ea(e)?ht:Vt;return n&&Yn(e,t,n)&&(t=S),"function"==typeof t&&n===S||(t=$n(t,n,3)),r(e,t)}function ai(e,t,n){if(null==e)return[];n&&Yn(e,t,n)&&(t=S);var r=-1;t=$n(t,n,3);var i=Bt(e,function(e,n,i){return{criteria:t(e,n,i),index:++r,value:e}});return Qt(i,f)}function si(e,t,n,r){return null==e?[]:(r&&Yn(t,n,r)&&(n=S),Ea(t)||(t=null==t?[]:[t]),Ea(n)||(n=null==n?[]:[n]),Gt(e,t,n))}function ci(e,t){return Gr(e,Ut(t))}function li(e,t){if("function"!=typeof t){if("function"!=typeof e)throw new Qo(z);var n=e;e=t,t=n}return e=bu(e=+e)?e:0,function(){if(--e<1)return t.apply(this,arguments)}}function fi(e,t,n){return n&&Yn(e,t,n)&&(t=S),t=e&&null==t?e.length:ku(+t||0,0),Ln(e,D,S,S,S,S,t)}function hi(e,t){var n;if("function"!=typeof t){if("function"!=typeof e)throw new Qo(z);var r=e;e=t,t=r}return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=S),n}}function pi(e,t,n){function r(){p&&au(p),c&&au(c),v=0,c=p=d=S}function i(t,n){n&&au(n),c=p=d=S,t&&(v=va(),l=e.apply(h,s),p||c||(s=h=S))}function o(){var e=t-(va()-f);e<=0||e>t?i(d,c):p=hu(o,e)}function u(){i(g,p)}function a(){if(s=arguments,f=va(),h=this,d=g&&(p||!_),y===!1)var n=_&&!p;else{c||_||(v=f);var r=y-(f-v),i=r<=0||r>y;i?(c&&(c=au(c)),v=f,l=e.apply(h,s)):c||(c=hu(u,r))}return i&&p?p=au(p):p||t===y||(p=hu(o,t)),n&&(i=!0,l=e.apply(h,s)),!i||p||c||(s=h=S),l}var s,c,l,f,h,p,d,v=0,y=!1,g=!0;if("function"!=typeof e)throw new Qo(z);if(t=t<0?0:+t||0,n===!0){var _=!0;g=!1}else Ni(n)&&(_=!!n.leading,y="maxWait"in n&&ku(+n.maxWait||0,t),g="trailing"in n?!!n.trailing:g);return a.cancel=r,a}function di(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new Qo(z);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var u=e.apply(this,r);return n.cache=o.set(i,u),u};return n.cache=new di.Cache,n}function vi(e){if("function"!=typeof e)throw new Qo(z);
return function(){return!e.apply(this,arguments)}}function yi(e){return hi(2,e)}function gi(e,t){if("function"!=typeof e)throw new Qo(z);return t=ku(t===S?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=ku(n.length-t,0),o=$o(i);++r<i;)o[r]=n[t+r];switch(t){case 0:return e.call(this,o);case 1:return e.call(this,n[0],o);case 2:return e.call(this,n[0],n[1],o)}var u=$o(t+1);for(r=-1;++r<t;)u[r]=n[r];return u[t]=o,e.apply(this,u)}}function _i(e){if("function"!=typeof e)throw new Qo(z);return function(t){return e.apply(this,t)}}function mi(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new Qo(z);return n===!1?r=!1:Ni(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),pi(e,t,{leading:r,maxWait:+t,trailing:i})}function bi(e,t){return t=null==t?jo:t,Ln(t,P,S,[e],[])}function wi(e,t,n,r){return t&&"boolean"!=typeof t&&Yn(e,t,n)?t=!1:"function"==typeof t&&(r=n,n=t,t=!1),"function"==typeof n?wt(e,t,un(n,r,1)):wt(e,t)}function ki(e,t,n){return"function"==typeof t?wt(e,!0,un(t,n,1)):wt(e,!0)}function Oi(e,t){return e>t}function xi(e,t){return e>=t}function Ai(e){return _(e)&&Gn(e)&&tu.call(e,"callee")&&!lu.call(e,"callee")}function Si(e){return e===!0||e===!1||_(e)&&ru.call(e)==X}function Ri(e){return _(e)&&ru.call(e)==V}function ji(e){return!!e&&1===e.nodeType&&_(e)&&!Fi(e)}function Ei(e){return null==e||(Gn(e)&&(Ea(e)||Mi(e)||Ai(e)||_(e)&&Pi(e.splice))?!e.length:!Fa(e).length)}function Ii(e,t,n,r){n="function"==typeof n?un(n,r,3):S;var i=n?n(e,t):S;return i===S?Dt(e,t,n):!!i}function Ti(e){return _(e)&&"string"==typeof e.message&&ru.call(e)==Q}function Ci(e){return"number"==typeof e&&bu(e)}function Pi(e){return Ni(e)&&ru.call(e)==G}function Ni(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Di(e,t,n,r){return n="function"==typeof n?un(n,r,3):S,Lt(e,zn(t),n)}function qi(e){return Ui(e)&&e!=+e}function Li(e){return null!=e&&(Pi(e)?ou.test(eu.call(e)):_(e)&&De.test(e))}function Bi(e){return null===e}function Ui(e){return"number"==typeof e||_(e)&&ru.call(e)==Y}function Fi(e){var t;if(!_(e)||ru.call(e)!=ee||Ai(e)||!tu.call(e,"constructor")&&(t=e.constructor,"function"==typeof t&&!(t instanceof t)))return!1;var n;return It(e,function(e,t){n=t}),n===S||tu.call(e,n)}function $i(e){return Ni(e)&&ru.call(e)==te}function Mi(e){return"string"==typeof e||_(e)&&ru.call(e)==re}function Wi(e){return _(e)&&nr(e.length)&&!!We[ru.call(e)]}function zi(e){return e===S}function Ji(e,t){return e<t}function Ki(e,t){return e<=t}function Hi(e){var t=e?Mu(e):0;return nr(t)?t?et(e):[]:oo(e)}function Xi(e){return mt(e,eo(e))}function Vi(e,t,n){var r=Du(e);return n&&Yn(e,t,n)&&(t=S),t?gt(r,t):r}function Qi(e){return Pt(e,eo(e))}function Gi(e,t,n){var r=null==e?S:Nt(e,hr(t),t+"");return r===S?n:r}function Zi(e,t){if(null==e)return!1;var n=tu.call(e,t);if(!n&&!er(t)){if(t=hr(t),e=1==t.length?e:Nt(e,Xt(t,0,-1)),null==e)return!1;t=Sr(t),n=tu.call(e,t)}return n||nr(e.length)&&Zn(t,e.length)&&(Ea(e)||Ai(e))}function Yi(e,t,n){n&&Yn(e,t,n)&&(t=S);for(var r=-1,i=Fa(e),o=i.length,u={};++r<o;){var a=i[r],s=e[a];t?tu.call(u,s)?u[s].push(a):u[s]=[a]:u[s]=a}return u}function eo(e){if(null==e)return[];Ni(e)||(e=Ho(e));var t=e.length;t=t&&nr(t)&&(Ea(e)||Ai(e))&&t||0;for(var n=e.constructor,r=-1,i="function"==typeof n&&n.prototype===e,o=$o(t),u=t>0;++r<t;)o[r]=r+"";for(var a in e)u&&Zn(a,t)||"constructor"==a&&(i||!tu.call(e,a))||o.push(a);return o}function to(e){e=fr(e);for(var t=-1,n=Fa(e),r=n.length,i=$o(r);++t<r;){var o=n[t];i[t]=[o,e[o]]}return i}function no(e,t,n){var r=null==e?S:e[t];return r===S&&(null==e||er(t,e)||(t=hr(t),e=1==t.length?e:Nt(e,Xt(t,0,-1)),r=null==e?S:e[Sr(t)]),r=r===S?n:r),Pi(r)?r.call(e):r}function ro(e,t,n){if(null==e)return e;var r=t+"";t=null!=e[r]||er(t,e)?[r]:hr(t);for(var i=-1,o=t.length,u=o-1,a=e;null!=a&&++i<o;){var s=t[i];Ni(a)&&(i==u?a[s]=n:null==a[s]&&(a[s]=Zn(t[i+1])?[]:{})),a=a[s]}return e}function io(e,t,n,r){var i=Ea(e)||Wi(e);if(t=$n(t,r,4),null==n)if(i||Ni(e)){var o=e.constructor;n=i?Ea(e)?new o:[]:Du(Pi(o)?o.prototype:S)}else n={};return(i?tt:Tt)(e,function(e,r,i){return t(n,e,r,i)}),n}function oo(e){return en(e,Fa(e))}function uo(e){return en(e,eo(e))}function ao(e,t,n){return t=+t||0,n===S?(n=t,t=0):n=+n||0,e>=Ou(t,n)&&e<ku(t,n)}function so(e,t,n){n&&Yn(e,t,n)&&(t=n=S);var r=null==e,i=null==t;if(null==n&&(i&&"boolean"==typeof e?(n=e,e=1):"boolean"==typeof t&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1){var o=Su();return Ou(e+o*(t-e+su("1e-"+((o+"").length-1))),t)}return Kt(e,t)}function co(e){return e=s(e),e&&e.charAt(0).toUpperCase()+e.slice(1)}function lo(e){return e=s(e),e&&e.replace(Le,p).replace(Ie,"")}function fo(e,t,n){e=s(e),t+="";var r=e.length;return n=n===S?r:Ou(n<0?0:+n||0,r),n-=t.length,n>=0&&e.indexOf(t,n)==n}function ho(e){return e=s(e),e&&we.test(e)?e.replace(me,d):e}function po(e){return e=s(e),e&&Ee.test(e)?e.replace(je,v):e||"(?:)"}function vo(e,t,n){e=s(e),t=+t;var r=e.length;if(r>=t||!bu(t))return e;var i=(t-r)/2,o=_u(i),u=yu(i);return n=Pn("",u,n),n.slice(0,o)+e+n}function yo(e,t,n){return(n?Yn(e,t,n):null==t)?t=0:t&&(t=+t),e=bo(e),Au(e,t||(Ne.test(e)?16:10))}function go(e,t){var n="";if(e=s(e),t=+t,t<1||!e||!bu(t))return n;do t%2&&(n+=e),t=_u(t/2),e+=e;while(t);return n}function _o(e,t,n){return e=s(e),n=null==n?0:Ou(n<0?0:+n||0,e.length),e.lastIndexOf(t,n)==n}function mo(e,n,r){var i=t.templateSettings;r&&Yn(e,n,r)&&(n=r=S),e=s(e),n=yt(gt({},r||n),i,vt);var o,u,a=yt(gt({},n.imports),i.imports,vt),c=Fa(a),l=en(a,c),f=0,h=n.interpolate||Be,p="__p += '",d=Xo((n.escape||Be).source+"|"+h.source+"|"+(h===xe?Ce:Be).source+"|"+(n.evaluate||Be).source+"|$","g"),v="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Me+"]")+"\n";e.replace(d,function(t,n,r,i,a,s){return r||(r=i),p+=e.slice(f,s).replace(Ue,y),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),a&&(u=!0,p+="';\n"+a+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),f=s+t.length,t}),p+="';\n";var g=n.variable;g||(p="with (obj) {\n"+p+"\n}\n"),p=(u?p.replace(ve,""):p).replace(ye,"$1").replace(ge,"$1;"),p="function("+(g||"obj")+") {\n"+(g?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var _=Ga(function(){return zo(c,v+"return "+p).apply(S,l)});if(_.source=p,Ti(_))throw _;return _}function bo(e,t,n){var r=e;return(e=s(e))?(n?Yn(r,t,n):null==t)?e.slice(k(e),O(e)+1):(t+="",e.slice(c(e,t),l(e,t)+1)):e}function wo(e,t,n){var r=e;return e=s(e),e?(n?Yn(r,t,n):null==t)?e.slice(k(e)):e.slice(c(e,t+"")):e}function ko(e,t,n){var r=e;return e=s(e),e?(n?Yn(r,t,n):null==t)?e.slice(0,O(e)+1):e.slice(0,l(e,t+"")+1):e}function Oo(e,t,n){n&&Yn(e,t,n)&&(t=S);var r=L,i=B;if(null!=t)if(Ni(t)){var o="separator"in t?t.separator:o;r="length"in t?+t.length||0:r,i="omission"in t?s(t.omission):i}else r=+t||0;if(e=s(e),r>=e.length)return e;var u=r-i.length;if(u<1)return i;var a=e.slice(0,u);if(null==o)return a+i;if($i(o)){if(e.slice(u).search(o)){var c,l,f=e.slice(0,u);for(o.global||(o=Xo(o.source,(Pe.exec(o)||"")+"g")),o.lastIndex=0;c=o.exec(f);)l=c.index;a=a.slice(0,null==l?u:l)}}else if(e.indexOf(o,u)!=u){var h=a.lastIndexOf(o);h>-1&&(a=a.slice(0,h))}return a+i}function xo(e){return e=s(e),e&&be.test(e)?e.replace(_e,x):e}function Ao(e,t,n){return n&&Yn(e,t,n)&&(t=S),e=s(e),e.match(t||Fe)||[]}function So(e,t,n){return n&&Yn(e,t,n)&&(t=S),_(e)?Eo(e):bt(e,t)}function Ro(e){return function(){return e}}function jo(e){return e}function Eo(e){return Ut(wt(e,!0))}function Io(e,t){return Ft(e,wt(t,!0))}function To(e,t,n){if(null==n){var r=Ni(t),i=r?Fa(t):S,o=i&&i.length?Pt(t,i):S;(o?o.length:r)||(o=!1,n=t,t=e,e=this)}o||(o=Pt(t,Fa(t)));var u=!0,a=-1,s=Pi(e),c=o.length;n===!1?u=!1:Ni(n)&&"chain"in n&&(u=n.chain);for(;++a<c;){var l=o[a],f=t[l];e[l]=f,s&&(e.prototype[l]=function(t){return function(){var n=this.__chain__;if(u||n){var r=e(this.__wrapped__),i=r.__actions__=et(this.__actions__);return i.push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return t.apply(e,ct([this.value()],arguments))}}(f))}return e}function Co(){return rt._=iu,this}function Po(){}function No(e){return er(e)?Wt(e):zt(e)}function Do(e){return function(t){return Nt(e,hr(t),t+"")}}function qo(e,t,n){n&&Yn(e,t,n)&&(t=n=S),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;for(var r=-1,i=ku(yu((t-e)/(n||1)),0),o=$o(i);++r<i;)o[r]=e,e+=n;return o}function Lo(e,t,n){if(e=_u(e),e<1||!bu(e))return[];var r=-1,i=$o(Ou(e,Eu));for(t=un(t,n,1);++r<e;)r<Eu?i[r]=t(r):t(r);return i}function Bo(e){var t=++nu;return s(e)+t}function Uo(e,t){return(+e||0)+(+t||0)}function Fo(e,t,n){return n&&Yn(e,t,n)&&(t=S),t=$n(t,n,3),1==t.length?pt(Ea(e)?e:lr(e),t):Zt(e,t)}e=e?it.defaults(rt.Object(),e,it.pick(rt,$e)):rt;var $o=e.Array,Mo=e.Date,Wo=e.Error,zo=e.Function,Jo=e.Math,Ko=e.Number,Ho=e.Object,Xo=e.RegExp,Vo=e.String,Qo=e.TypeError,Go=$o.prototype,Zo=Ho.prototype,Yo=Vo.prototype,eu=zo.prototype.toString,tu=Zo.hasOwnProperty,nu=0,ru=Zo.toString,iu=rt._,ou=Xo("^"+eu.call(tu).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),uu=e.ArrayBuffer,au=e.clearTimeout,su=e.parseFloat,cu=Jo.pow,lu=Zo.propertyIsEnumerable,fu=Jn(e,"Set"),hu=e.setTimeout,pu=Go.splice,du=e.Uint8Array,vu=Jn(e,"WeakMap"),yu=Jo.ceil,gu=Jn(Ho,"create"),_u=Jo.floor,mu=Jn($o,"isArray"),bu=e.isFinite,wu=Jn(Ho,"keys"),ku=Jo.max,Ou=Jo.min,xu=Jn(Mo,"now"),Au=e.parseInt,Su=Jo.random,Ru=Ko.NEGATIVE_INFINITY,ju=Ko.POSITIVE_INFINITY,Eu=4294967295,Iu=Eu-1,Tu=Eu>>>1,Cu=9007199254740991,Pu=vu&&new vu,Nu={};t.support={};t.templateSettings={escape:ke,evaluate:Oe,interpolate:xe,variable:"",imports:{_:t}};var Du=function(){function e(){}return function(t){if(Ni(t)){e.prototype=t;var n=new e;e.prototype=S}return n||{}}}(),qu=hn(Tt),Lu=hn(Ct,!0),Bu=pn(),Uu=pn(!0),Fu=Pu?function(e,t){return Pu.set(e,t),e}:jo,$u=Pu?function(e){return Pu.get(e)}:Po,Mu=Wt("length"),Wu=function(){var e=0,t=0;return function(n,r){var i=va(),o=F-(i-t);if(t=i,o>0){if(++e>=U)return n}else e=0;return Fu(n,r)}}(),zu=gi(function(e,t){return _(e)&&Gn(e)?Ot(e,Et(t,!1,!0)):[]}),Ju=kn(),Ku=kn(!0),Hu=gi(function(e){for(var t=e.length,n=t,r=$o(f),i=Wn(),o=i==u,a=[];n--;){var s=e[n]=Gn(s=e[n])?s:[];r[n]=o&&s.length>=120?vn(n&&s):null}var c=e[0],l=-1,f=c?c.length:0,h=r[0];e:for(;++l<f;)if(s=c[l],(h?Ge(h,s):i(a,s,0))<0){for(var n=t;--n;){var p=r[n];if((p?Ge(p,s):i(e[n],s,0))<0)continue e}h&&h.push(s),a.push(s)}return a}),Xu=gi(function(e,t){t=Et(t);var n=_t(e,t);return Jt(e,t.sort(i)),n}),Vu=qn(),Qu=qn(!0),Gu=gi(function(e){return Yt(Et(e,!1,!0))}),Zu=gi(function(e,t){return Gn(e)?Ot(e,t):[]}),Yu=gi(Lr),ea=gi(function(e){var t=e.length,n=t>2?e[t-2]:S,r=t>1?e[t-1]:S;return t>2&&"function"==typeof n?t-=2:(n=t>1&&"function"==typeof r?(--t,r):S,r=S),e.length=t,Br(e,n,r)}),ta=gi(function(e){return e=Et(e),this.thru(function(t){return Ye(Ea(t)?t:[fr(t)],e)})}),na=gi(function(e,t){return _t(e,Et(t))}),ra=ln(function(e,t,n){tu.call(e,n)?++e[n]:e[n]=1}),ia=wn(qu),oa=wn(Lu,!0),ua=An(tt,qu),aa=An(nt,Lu),sa=ln(function(e,t,n){tu.call(e,n)?e[n].push(t):e[n]=[t]}),ca=ln(function(e,t,n){e[n]=t}),la=gi(function(e,t,n){var r=-1,i="function"==typeof t,o=er(t),u=Gn(e)?$o(e.length):[];return qu(e,function(e){var a=i?t:o&&null!=e?e[t]:S;u[++r]=a?a.apply(e,n):Qn(e,t,n)}),u}),fa=ln(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),ha=Tn(lt,qu),pa=Tn(ft,Lu),da=gi(function(e,t){if(null==e)return[];var n=t[2];return n&&Yn(t[0],t[1],n)&&(t.length=1),Gt(e,Et(t),[])}),va=xu||function(){return(new Mo).getTime()},ya=gi(function(e,t,n){var r=j;if(n.length){var i=b(n,ya.placeholder);r|=P}return Ln(e,r,t,n,i)}),ga=gi(function(e,t){t=t.length?Et(t):Qi(e);for(var n=-1,r=t.length;++n<r;){var i=t[n];e[i]=Ln(e[i],j,e)}return e}),_a=gi(function(e,t,n){var r=j|E;if(n.length){var i=b(n,_a.placeholder);r|=P}return Ln(t,r,e,n,i)}),ma=_n(T),ba=_n(C),wa=gi(function(e,t){return kt(e,1,t)}),ka=gi(function(e,t,n){return kt(e,t,n)}),Oa=xn(),xa=xn(!0),Aa=gi(function(e,t){if(t=Et(t),"function"!=typeof e||!ot(t,a))throw new Qo(z);var n=t.length;return gi(function(r){for(var i=Ou(r.length,n);i--;)r[i]=t[i](r[i]);return e.apply(this,r)})}),Sa=In(P),Ra=In(N),ja=gi(function(e,t){return Ln(e,q,S,S,S,Et(t))}),Ea=mu||function(e){return _(e)&&nr(e.length)&&ru.call(e)==H},Ia=fn($t),Ta=fn(function(e,t,n){return n?yt(e,t,n):gt(e,t)}),Ca=mn(Ta,dt),Pa=mn(Ia,or),Na=On(Tt),Da=On(Ct),qa=Sn(Bu),La=Sn(Uu),Ba=Rn(Tt),Ua=Rn(Ct),Fa=wu?function(e){var t=null==e?S:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&Gn(e)?cr(e):Ni(e)?wu(e):[]}:cr,$a=jn(!0),Ma=jn(),Wa=gi(function(e,t){if(null==e)return{};if("function"!=typeof t[0]){var t=st(Et(t),Vo);return ur(e,Ot(eo(e),t))}var n=un(t[0],t[1],3);return ar(e,function(e,t,r){return!n(e,t,r)})}),za=gi(function(e,t){return null==e?{}:"function"==typeof t[0]?ar(e,un(t[0],t[1],3)):ur(e,Et(t))}),Ja=yn(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Ka=yn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Ha=En(),Xa=En(!0),Va=yn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Qa=yn(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Ga=gi(function(e,t){try{return e.apply(S,t)}catch(n){return Ti(n)?n:new Wo(n)}}),Za=gi(function(e,t){return function(n){return Qn(n,e,t)}}),Ya=gi(function(e,t){return function(n){return Qn(e,n,t)}}),es=Dn("ceil"),ts=Dn("floor"),ns=bn(Oi,Ru),rs=bn(Ji,ju),is=Dn("round");return t.prototype=n.prototype,r.prototype=Du(n.prototype),r.prototype.constructor=r,m.prototype=Du(n.prototype),m.prototype.constructor=m,Je.prototype["delete"]=Ke,Je.prototype.get=He,Je.prototype.has=Xe,Je.prototype.set=Ve,Qe.prototype.push=Ze,di.Cache=Je,t.after=li,t.ary=fi,t.assign=Ta,t.at=na,t.before=hi,t.bind=ya,t.bindAll=ga,t.bindKey=_a,t.callback=So,t.chain=$r,t.chunk=dr,t.compact=vr,t.constant=Ro,t.countBy=ra,t.create=Vi,t.curry=ma,t.curryRight=ba,t.debounce=pi,t.defaults=Ca,t.defaultsDeep=Pa,t.defer=wa,t.delay=ka,t.difference=zu,t.drop=yr,t.dropRight=gr,t.dropRightWhile=_r,t.dropWhile=mr,t.fill=br,t.filter=Gr,t.flatten=kr,t.flattenDeep=Or,t.flow=Oa,t.flowRight=xa,t.forEach=ua,t.forEachRight=aa,t.forIn=qa,t.forInRight=La,t.forOwn=Ba,t.forOwnRight=Ua,t.functions=Qi,t.groupBy=sa,t.indexBy=ca,t.initial=Ar,t.intersection=Hu,t.invert=Yi,t.invoke=la,t.keys=Fa,t.keysIn=eo,t.map=ei,t.mapKeys=$a,t.mapValues=Ma,t.matches=Eo,t.matchesProperty=Io,t.memoize=di,t.merge=Ia,t.method=Za,t.methodOf=Ya,t.mixin=To,t.modArgs=Aa,t.negate=vi,t.omit=Wa,t.once=yi,t.pairs=to,t.partial=Sa,t.partialRight=Ra,t.partition=fa,t.pick=za,t.pluck=ti,t.property=No,t.propertyOf=Do,t.pull=jr,t.pullAt=Xu,t.range=qo,t.rearg=ja,t.reject=ni,t.remove=Er,t.rest=Ir,t.restParam=gi,t.set=ro,t.shuffle=ii,t.slice=Tr,t.sortBy=ai,t.sortByAll=da,t.sortByOrder=si,t.spread=_i,t.take=Cr,t.takeRight=Pr,t.takeRightWhile=Nr,t.takeWhile=Dr,t.tap=Mr,t.throttle=mi,t.thru=Wr,t.times=Lo,t.toArray=Hi,t.toPlainObject=Xi,t.transform=io,t.union=Gu,t.uniq=qr,t.unzip=Lr,t.unzipWith=Br,t.values=oo,t.valuesIn=uo,t.where=ci,t.without=Zu,t.wrap=bi,t.xor=Ur,t.zip=Yu,t.zipObject=Fr,t.zipWith=ea,t.backflow=xa,t.collect=ei,t.compose=xa,t.each=ua,t.eachRight=aa,t.extend=Ta,t.iteratee=So,t.methods=Qi,t.object=Fr,t.select=Gr,t.tail=Ir,t.unique=qr,To(t,t),t.add=Uo,t.attempt=Ga,t.camelCase=Ja,t.capitalize=co,t.ceil=es,t.clone=wi,t.cloneDeep=ki,t.deburr=lo,t.endsWith=fo,t.escape=ho,t.escapeRegExp=po,t.every=Qr,t.find=ia,t.findIndex=Ju,t.findKey=Na,t.findLast=oa,t.findLastIndex=Ku,t.findLastKey=Da,t.findWhere=Zr,t.first=wr,t.floor=ts,t.get=Gi,t.gt=Oi,t.gte=xi,t.has=Zi,t.identity=jo,t.includes=Yr,t.indexOf=xr,t.inRange=ao,t.isArguments=Ai,t.isArray=Ea,t.isBoolean=Si,t.isDate=Ri,t.isElement=ji,t.isEmpty=Ei,t.isEqual=Ii,t.isError=Ti,t.isFinite=Ci,t.isFunction=Pi,t.isMatch=Di,t.isNaN=qi,t.isNative=Li,t.isNull=Bi,t.isNumber=Ui,t.isObject=Ni,t.isPlainObject=Fi,t.isRegExp=$i,t.isString=Mi,t.isTypedArray=Wi,t.isUndefined=zi,t.kebabCase=Ka,t.last=Sr,t.lastIndexOf=Rr,t.lt=Ji,t.lte=Ki,t.max=ns,t.min=rs,t.noConflict=Co,t.noop=Po,t.now=va,t.pad=vo,t.padLeft=Ha,t.padRight=Xa,t.parseInt=yo,t.random=so,t.reduce=ha,t.reduceRight=pa,t.repeat=go,t.result=no,t.round=is,t.runInContext=A,t.size=oi,t.snakeCase=Va,t.some=ui,t.sortedIndex=Vu,t.sortedLastIndex=Qu,t.startCase=Qa,t.startsWith=_o,t.sum=Fo,t.template=mo,t.trim=bo,t.trimLeft=wo,t.trimRight=ko,t.trunc=Oo,t.unescape=xo,t.uniqueId=Bo,t.words=Ao,t.all=Qr,t.any=ui,t.contains=Yr,t.eq=Ii,t.detect=ia,t.foldl=ha,t.foldr=pa,t.head=wr,t.include=Yr,t.inject=ha,To(t,function(){var e={};return Tt(t,function(n,r){t.prototype[r]||(e[r]=n)}),e}(),!1),t.sample=ri,t.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return ri(t,e)}):ri(this.value())},t.VERSION=R,tt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){t[e].placeholder=t}),tt(["drop","take"],function(e,t){m.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new m(this);n=null==n?1:ku(_u(n)||0,0);var i=this.clone();return r?i.__takeCount__=Ou(i.__takeCount__,n):i.__views__.push({size:n,type:e+(i.__dir__<0?"Right":"")}),i},m.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),tt(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n!=W;m.prototype[e]=function(e,t){var i=this.clone();return i.__iteratees__.push({iteratee:$n(e,t,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),tt(["first","last"],function(e,t){var n="take"+(t?"Right":"");m.prototype[e]=function(){return this[n](1).value()[0]}}),tt(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");m.prototype[e]=function(){return this.__filtered__?new m(this):this[n](1)}}),tt(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?Ut:No;m.prototype[e]=function(e){return this[n](r(e))}}),m.prototype.compact=function(){return this.filter(jo)},m.prototype.reject=function(e,t){return e=$n(e,t,1),this.filter(function(t){return!e(t)})},m.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=this;return n.__filtered__&&(e>0||t<0)?new m(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==S&&(t=+t||0,n=t<0?n.dropRight(-t):n.take(t-e)),n)},m.prototype.takeRightWhile=function(e,t){return this.reverse().takeWhile(e,t).reverse()},m.prototype.toArray=function(){return this.take(ju)},Tt(m.prototype,function(e,n){var i=/^(?:filter|map|reject)|While$/.test(n),o=/^(?:first|last)$/.test(n),u=t[o?"take"+("last"==n?"Right":""):n];u&&(t.prototype[n]=function(){var t=o?[1]:arguments,n=this.__chain__,a=this.__wrapped__,s=!!this.__actions__.length,c=a instanceof m,l=t[0],f=c||Ea(a);f&&i&&"function"==typeof l&&1!=l.length&&(c=f=!1);var h=function(e){return o&&n?u(e,1)[0]:u.apply(S,ct([e],t))},p={func:Wr,args:[h],thisArg:S},d=c&&!s;if(o&&!n)return d?(a=a.clone(),a.__actions__.push(p),e.call(a)):u.call(S,this.value())[0];if(!o&&f){a=d?a:new m(this);var v=e.apply(a,t);return v.__actions__.push(p),new r(v,n)}return this.thru(h)})}),tt(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(e){var n=(/^(?:replace|split)$/.test(e)?Yo:Go)[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(e);t.prototype[e]=function(){var e=arguments;return i&&!this.__chain__?n.apply(this.value(),e):this[r](function(t){return n.apply(t,e)})}}),Tt(m.prototype,function(e,n){var r=t[n];if(r){var i=r.name,o=Nu[i]||(Nu[i]=[]);o.push({name:n,func:r})}}),Nu[Cn(S,E).name]=[{name:"wrapper",func:S}],m.prototype.clone=Z,m.prototype.reverse=ne,m.prototype.value=ie,t.prototype.chain=zr,t.prototype.commit=Jr,t.prototype.concat=ta,t.prototype.plant=Kr,t.prototype.reverse=Hr,t.prototype.toString=Xr,t.prototype.run=t.prototype.toJSON=t.prototype.valueOf=t.prototype.value=Vr,t.prototype.collect=t.prototype.map,t.prototype.head=t.prototype.first,t.prototype.select=t.prototype.filter,t.prototype.tail=t.prototype.rest,t}var S,R="3.10.1",j=1,E=2,I=4,T=8,C=16,P=32,N=64,D=128,q=256,L=30,B="...",U=150,F=16,$=200,M=1,W=2,z="Expected a function",J="__lodash_placeholder__",K="[object Arguments]",H="[object Array]",X="[object Boolean]",V="[object Date]",Q="[object Error]",G="[object Function]",Z="[object Map]",Y="[object Number]",ee="[object Object]",te="[object RegExp]",ne="[object Set]",re="[object String]",ie="[object WeakMap]",oe="[object ArrayBuffer]",ue="[object Float32Array]",ae="[object Float64Array]",se="[object Int8Array]",ce="[object Int16Array]",le="[object Int32Array]",fe="[object Uint8Array]",he="[object Uint8ClampedArray]",pe="[object Uint16Array]",de="[object Uint32Array]",ve=/\b__p \+= '';/g,ye=/\b(__p \+=) '' \+/g,ge=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_e=/&(?:amp|lt|gt|quot|#39|#96);/g,me=/[&<>"'`]/g,be=RegExp(_e.source),we=RegExp(me.source),ke=/<%-([\s\S]+?)%>/g,Oe=/<%([\s\S]+?)%>/g,xe=/<%=([\s\S]+?)%>/g,Ae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Se=/^\w*$/,Re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,je=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Ee=RegExp(je.source),Ie=/[\u0300-\u036f\ufe20-\ufe23]/g,Te=/\\(\\)?/g,Ce=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Pe=/\w*$/,Ne=/^0[xX]/,De=/^\[object .+?Constructor\]$/,qe=/^\d+$/,Le=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Be=/($^)/,Ue=/['\n\r\u2028\u2029\\]/g,Fe=function(){var e="[A-Z\\xc0-\\xd6\\xd8-\\xde]",t="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(e+"+(?="+e+t+")|"+e+"?"+t+"|"+e+"+|[0-9]+","g")}(),$e=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Me=-1,We={};We[ue]=We[ae]=We[se]=We[ce]=We[le]=We[fe]=We[he]=We[pe]=We[de]=!0,We[K]=We[H]=We[oe]=We[X]=We[V]=We[Q]=We[G]=We[Z]=We[Y]=We[ee]=We[te]=We[ne]=We[re]=We[ie]=!1;var ze={};ze[K]=ze[H]=ze[oe]=ze[X]=ze[V]=ze[ue]=ze[ae]=ze[se]=ze[ce]=ze[le]=ze[Y]=ze[ee]=ze[te]=ze[re]=ze[fe]=ze[he]=ze[pe]=ze[de]=!0,ze[Q]=ze[G]=ze[Z]=ze[ne]=ze[ie]=!1;var Je={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Ke={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},He={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Xe={"function":!0,object:!0},Ve={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Qe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ge=Xe[typeof r]&&r&&!r.nodeType&&r,Ze=Xe[typeof n]&&n&&!n.nodeType&&n,Ye=Ge&&Ze&&"object"==typeof t&&t&&t.Object&&t,et=Xe[typeof self]&&self&&self.Object&&self,tt=Xe[typeof window]&&window&&window.Object&&window,nt=Ze&&Ze.exports===Ge&&Ge,rt=Ye||tt!==(this&&this.window)&&tt||et||this,it=A();"function"==typeof e&&"object"==typeof e.amd&&e.amd?(rt._=it,e(function(){return it})):Ge&&Ze?nt?(Ze.exports=it)._=it:Ge._=it:rt._=it}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],46:[function(e,t,n){!function(){var n=e("crypt"),r=e("charenc").utf8,i=e("is-buffer"),o=e("charenc").bin,u=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):r.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||(e=e.toString());for(var a=n.bytesToWords(e),s=8*e.length,c=1732584193,l=-271733879,f=-1732584194,h=271733878,p=0;p<a.length;p++)a[p]=16711935&(a[p]<<8|a[p]>>>24)|4278255360&(a[p]<<24|a[p]>>>8);a[s>>>5]|=128<<s%32,a[(s+64>>>9<<4)+14]=s;for(var d=u._ff,v=u._gg,y=u._hh,g=u._ii,p=0;p<a.length;p+=16){var _=c,m=l,b=f,w=h;c=d(c,l,f,h,a[p+0],7,-680876936),h=d(h,c,l,f,a[p+1],12,-389564586),f=d(f,h,c,l,a[p+2],17,606105819),l=d(l,f,h,c,a[p+3],22,-1044525330),c=d(c,l,f,h,a[p+4],7,-176418897),h=d(h,c,l,f,a[p+5],12,1200080426),f=d(f,h,c,l,a[p+6],17,-1473231341),l=d(l,f,h,c,a[p+7],22,-45705983),c=d(c,l,f,h,a[p+8],7,1770035416),h=d(h,c,l,f,a[p+9],12,-1958414417),f=d(f,h,c,l,a[p+10],17,-42063),l=d(l,f,h,c,a[p+11],22,-1990404162),c=d(c,l,f,h,a[p+12],7,1804603682),h=d(h,c,l,f,a[p+13],12,-40341101),f=d(f,h,c,l,a[p+14],17,-1502002290),l=d(l,f,h,c,a[p+15],22,1236535329),c=v(c,l,f,h,a[p+1],5,-165796510),h=v(h,c,l,f,a[p+6],9,-1069501632),f=v(f,h,c,l,a[p+11],14,643717713),l=v(l,f,h,c,a[p+0],20,-373897302),c=v(c,l,f,h,a[p+5],5,-701558691),h=v(h,c,l,f,a[p+10],9,38016083),f=v(f,h,c,l,a[p+15],14,-660478335),l=v(l,f,h,c,a[p+4],20,-405537848),c=v(c,l,f,h,a[p+9],5,568446438),h=v(h,c,l,f,a[p+14],9,-1019803690),f=v(f,h,c,l,a[p+3],14,-187363961),l=v(l,f,h,c,a[p+8],20,1163531501),c=v(c,l,f,h,a[p+13],5,-1444681467),h=v(h,c,l,f,a[p+2],9,-51403784),f=v(f,h,c,l,a[p+7],14,1735328473),l=v(l,f,h,c,a[p+12],20,-1926607734),c=y(c,l,f,h,a[p+5],4,-378558),h=y(h,c,l,f,a[p+8],11,-2022574463),f=y(f,h,c,l,a[p+11],16,1839030562),l=y(l,f,h,c,a[p+14],23,-35309556),c=y(c,l,f,h,a[p+1],4,-1530992060),h=y(h,c,l,f,a[p+4],11,1272893353),f=y(f,h,c,l,a[p+7],16,-155497632),l=y(l,f,h,c,a[p+10],23,-1094730640),c=y(c,l,f,h,a[p+13],4,681279174),h=y(h,c,l,f,a[p+0],11,-358537222),f=y(f,h,c,l,a[p+3],16,-722521979),l=y(l,f,h,c,a[p+6],23,76029189),c=y(c,l,f,h,a[p+9],4,-640364487),h=y(h,c,l,f,a[p+12],11,-421815835),f=y(f,h,c,l,a[p+15],16,530742520),l=y(l,f,h,c,a[p+2],23,-995338651),c=g(c,l,f,h,a[p+0],6,-198630844),h=g(h,c,l,f,a[p+7],10,1126891415),f=g(f,h,c,l,a[p+14],15,-1416354905),l=g(l,f,h,c,a[p+5],21,-57434055),c=g(c,l,f,h,a[p+12],6,1700485571),h=g(h,c,l,f,a[p+3],10,-1894986606),f=g(f,h,c,l,a[p+10],15,-1051523),l=g(l,f,h,c,a[p+1],21,-2054922799),c=g(c,l,f,h,a[p+8],6,1873313359),h=g(h,c,l,f,a[p+15],10,-30611744),f=g(f,h,c,l,a[p+6],15,-1560198380),l=g(l,f,h,c,a[p+13],21,1309151649),c=g(c,l,f,h,a[p+4],6,-145523070),h=g(h,c,l,f,a[p+11],10,-1120210379),f=g(f,h,c,l,a[p+2],15,718787259),l=g(l,f,h,c,a[p+9],21,-343485551),c=c+_>>>0,l=l+m>>>0,f=f+b>>>0,h=h+w>>>0}return n.endian([c,l,f,h])};u._ff=function(e,t,n,r,i,o,u){var a=e+(t&n|~t&r)+(i>>>0)+u;return(a<<o|a>>>32-o)+t},u._gg=function(e,t,n,r,i,o,u){var a=e+(t&r|n&~r)+(i>>>0)+u;return(a<<o|a>>>32-o)+t},u._hh=function(e,t,n,r,i,o,u){var a=e+(t^n^r)+(i>>>0)+u;return(a<<o|a>>>32-o)+t},u._ii=function(e,t,n,r,i,o,u){var a=e+(n^(t|~r))+(i>>>0)+u;return(a<<o|a>>>32-o)+t},u._blocksize=16,u._digestsize=16,t.exports=function(e,t){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(u(e,t));return t&&t.asBytes?r:t&&t.asString?o.bytesToString(r):n.bytesToHex(r)}}()},{charenc:23,crypt:26,"is-buffer":42}],47:[function(t,n,r){(function(t){!function(i){function o(e){throw RangeError(N[e])}function u(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function a(e,t){var n=e.split("@"),r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(P,".");var i=e.split("."),o=u(i,t).join(".");return r+o}function s(e){for(var t,n,r=[],i=0,o=e.length;i<o;)t=e.charCodeAt(i++),t>=55296&&t<=56319&&i<o?(n=e.charCodeAt(i++),56320==(64512&n)?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--)):r.push(t);return r}function c(e){return u(e,function(e){var t="";return e>65535&&(e-=65536,t+=L(e>>>10&1023|55296),e=56320|1023&e),t+=L(e)}).join("")}function l(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:O}function f(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function h(e,t,n){var r=0;for(e=n?q(e/R):e>>1,e+=q(e/t);e>D*A>>1;r+=O)e=q(e/D);return q(r+(D+1)*e/(e+S))}function p(e){var t,n,r,i,u,a,s,f,p,d,v=[],y=e.length,g=0,_=E,m=j;for(n=e.lastIndexOf(I),n<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&o("not-basic"),v.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<y;){for(u=g,a=1,s=O;i>=y&&o("invalid-input"),f=l(e.charCodeAt(i++)),(f>=O||f>q((k-g)/a))&&o("overflow"),g+=f*a,p=s<=m?x:s>=m+A?A:s-m,!(f<p);s+=O)d=O-p,a>q(k/d)&&o("overflow"),a*=d;t=v.length+1,m=h(g-u,t,0==u),q(g/t)>k-_&&o("overflow"),_+=q(g/t),g%=t,v.splice(g++,0,_)}return c(v)}function d(e){var t,n,r,i,u,a,c,l,p,d,v,y,g,_,m,b=[];for(e=s(e),y=e.length,t=E,n=0,u=j,a=0;a<y;++a)v=e[a],v<128&&b.push(L(v));for(r=i=b.length,i&&b.push(I);r<y;){for(c=k,a=0;a<y;++a)v=e[a],v>=t&&v<c&&(c=v);for(g=r+1,c-t>q((k-n)/g)&&o("overflow"),n+=(c-t)*g,t=c,a=0;a<y;++a)if(v=e[a],v<t&&++n>k&&o("overflow"),v==t){for(l=n,p=O;d=p<=u?x:p>=u+A?A:p-u,!(l<d);p+=O)m=l-d,_=O-d,b.push(L(f(d+m%_,0))),l=q(m/_);b.push(L(f(l,0))),u=h(n,g,r==i),n=0,++r}++n,++t}return b.join("")}function v(e){return a(e,function(e){return T.test(e)?p(e.slice(4).toLowerCase()):e})}function y(e){return a(e,function(e){return C.test(e)?"xn--"+d(e):e})}var g="object"==typeof r&&r&&!r.nodeType&&r,_="object"==typeof n&&n&&!n.nodeType&&n,m="object"==typeof t&&t;m.global!==m&&m.window!==m&&m.self!==m||(i=m);var b,w,k=2147483647,O=36,x=1,A=26,S=38,R=700,j=72,E=128,I="-",T=/^xn--/,C=/[^\x20-\x7E]/,P=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},D=O-x,q=Math.floor,L=String.fromCharCode;if(b={version:"1.3.2",ucs2:{decode:s,encode:c},decode:p,encode:d,toASCII:y,toUnicode:v},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return b});else if(g&&_)if(n.exports==g)_.exports=b;else for(w in b)b.hasOwnProperty(w)&&(g[w]=b[w]);else i.punycode=b}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],48:[function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,o){t=t||"&",n=n||"=";var u={};if("string"!=typeof e||0===e.length)return u;var a=/\+/g;e=e.split(t);var s=1e3;o&&"number"==typeof o.maxKeys&&(s=o.maxKeys);var c=e.length;s>0&&c>s&&(c=s);for(var l=0;l<c;++l){var f,h,p,d,v=e[l].replace(a,"%20"),y=v.indexOf(n);y>=0?(f=v.substr(0,y),h=v.substr(y+1)):(f=v,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),r(u,p)?i(u[p])?u[p].push(d):u[p]=[u[p],d]:u[p]=d}return u};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],49:[function(e,t,n){"use strict";function r(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,n,a){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?r(u(e),function(u){var a=encodeURIComponent(i(u))+n;return o(e[u])?r(e[u],function(e){return a+encodeURIComponent(i(e))}).join(t):a+encodeURIComponent(i(e[u]))}).join(t):a?encodeURIComponent(i(a))+n+encodeURIComponent(i(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},{}],50:[function(e,t,n){"use strict";n.decode=n.parse=e("./decode"),n.encode=n.stringify=e("./encode")},{"./decode":48,"./encode":49}],51:[function(e,t,n){t.exports=function(e,t,n){for(var r=0,i=e.length,o=3==arguments.length?n:e[r++];r<i;)o=t.call(null,o,e[r],++r,e);return o}},{}],52:[function(e,t,n){function r(){}function i(e){var t={}.toString.call(e);switch(t){case"[object File]":case"[object Blob]":case"[object FormData]":return!0;default:return!1}}function o(e){if(!m(e))return e;var t=[];for(var n in e)null!=e[n]&&u(t,n,e[n]);return t.join("&")}function u(e,t,n){return Array.isArray(n)?n.forEach(function(n){u(e,t,n)}):void e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));
}function a(e){for(var t,n,r={},i=e.split("&"),o=0,u=i.length;o<u;++o)n=i[o],t=n.split("="),r[decodeURIComponent(t[0])]=decodeURIComponent(t[1]);return r}function s(e){var t,n,r,i,o=e.split(/\r?\n/),u={};o.pop();for(var a=0,s=o.length;a<s;++a)n=o[a],t=n.indexOf(":"),r=n.slice(0,t).toLowerCase(),i=w(n.slice(t+1)),u[r]=i;return u}function c(e){return/[\/+]json\b/.test(e)}function l(e){return e.split(/ *; */).shift()}function f(e){return g(e.split(/ *; */),function(e,t){var n=t.split(/ *= */),r=n.shift(),i=n.shift();return r&&i&&(e[r]=i),e},{})}function h(e,t){t=t||{},this.req=e,this.xhr=this.req.xhr,this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"==typeof this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText,this.setStatusProperties(this.xhr.status),this.header=this.headers=s(this.xhr.getAllResponseHeaders()),this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this.setHeaderProperties(this.header),this.body="HEAD"!=this.req.method?this.parseBody(this.text?this.text:this.xhr.response):null}function p(e,t){var n=this;this._query=this._query||[],this.method=e,this.url=t,this.header={},this._header={},this.on("end",function(){var e=null,t=null;try{t=new h(n)}catch(r){return e=new Error("Parser is unable to parse the response"),e.parse=!0,e.original=r,e.rawResponse=n.xhr&&n.xhr.responseText?n.xhr.responseText:null,e.statusCode=n.xhr&&n.xhr.status?n.xhr.status:null,n.callback(e)}if(n.emit("response",t),e)return n.callback(e,t);if(t.status>=200&&t.status<300)return n.callback(e,t);var i=new Error(t.statusText||"Unsuccessful HTTP response");i.original=e,i.response=t,i.status=t.status,n.callback(i,t)})}function d(e,t){var n=b("DELETE",e);return t&&n.end(t),n}var v,y=e("emitter"),g=e("reduce"),_=e("./request-base"),m=e("./is-object");v="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;var b=t.exports=e("./request").bind(null,p);b.getXHR=function(){if(!(!v.XMLHttpRequest||v.location&&"file:"==v.location.protocol&&v.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}return!1};var w="".trim?function(e){return e.trim()}:function(e){return e.replace(/(^\s*|\s*$)/g,"")};b.serializeObject=o,b.parseString=a,b.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},b.serialize={"application/x-www-form-urlencoded":o,"application/json":JSON.stringify},b.parse={"application/x-www-form-urlencoded":a,"application/json":JSON.parse},h.prototype.get=function(e){return this.header[e.toLowerCase()]},h.prototype.setHeaderProperties=function(e){var t=this.header["content-type"]||"";this.type=l(t);var n=f(t);for(var r in n)this[r]=n[r]},h.prototype.parseBody=function(e){var t=b.parse[this.type];return!t&&c(this.type)&&(t=b.parse["application/json"]),t&&e&&(e.length||e instanceof Object)?t(e):null},h.prototype.setStatusProperties=function(e){1223===e&&(e=204);var t=e/100|0;this.status=this.statusCode=e,this.statusType=t,this.info=1==t,this.ok=2==t,this.clientError=4==t,this.serverError=5==t,this.error=(4==t||5==t)&&this.toError(),this.accepted=202==e,this.noContent=204==e,this.badRequest=400==e,this.unauthorized=401==e,this.notAcceptable=406==e,this.notFound=404==e,this.forbidden=403==e},h.prototype.toError=function(){var e=this.req,t=e.method,n=e.url,r="cannot "+t+" "+n+" ("+this.status+")",i=new Error(r);return i.status=this.status,i.method=t,i.url=n,i},b.Response=h,y(p.prototype);for(var k in _)p.prototype[k]=_[k];p.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr&&this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this},p.prototype.type=function(e){return this.set("Content-Type",b.types[e]||e),this},p.prototype.responseType=function(e){return this._responseType=e,this},p.prototype.accept=function(e){return this.set("Accept",b.types[e]||e),this},p.prototype.auth=function(e,t,n){switch(n||(n={type:"basic"}),n.type){case"basic":var r=btoa(e+":"+t);this.set("Authorization","Basic "+r);break;case"auto":this.username=e,this.password=t}return this},p.prototype.query=function(e){return"string"!=typeof e&&(e=o(e)),e&&this._query.push(e),this},p.prototype.attach=function(e,t,n){return this._getFormData().append(e,t,n||t.name),this},p.prototype._getFormData=function(){return this._formData||(this._formData=new v.FormData),this._formData},p.prototype.send=function(e){var t=m(e),n=this._header["content-type"];if(t&&m(this._data))for(var r in e)this._data[r]=e[r];else"string"==typeof e?(n||this.type("form"),n=this._header["content-type"],"application/x-www-form-urlencoded"==n?this._data=this._data?this._data+"&"+e:e:this._data=(this._data||"")+e):this._data=e;return!t||i(e)?this:(n||this.type("json"),this)},h.prototype.parse=function(e){return v.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0"),this.serialize(e),this},h.prototype.serialize=function(e){return this._parser=e,this},p.prototype.callback=function(e,t){var n=this._callback;this.clearTimeout(),n(e,t)},p.prototype.crossDomainError=function(){var e=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");e.crossDomain=!0,e.status=this.status,e.method=this.method,e.url=this.url,this.callback(e)},p.prototype.timeoutError=function(){var e=this._timeout,t=new Error("timeout of "+e+"ms exceeded");t.timeout=e,this.callback(t)},p.prototype.withCredentials=function(){return this._withCredentials=!0,this},p.prototype.end=function(e){var t=this,n=this.xhr=b.getXHR(),o=this._query.join("&"),u=this._timeout,a=this._formData||this._data;this._callback=e||r,n.onreadystatechange=function(){if(4==n.readyState){var e;try{e=n.status}catch(r){e=0}if(0==e){if(t.timedout)return t.timeoutError();if(t.aborted)return;return t.crossDomainError()}t.emit("end")}};var s=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),e.direction="download",t.emit("progress",e)};this.hasListeners("progress")&&(n.onprogress=s);try{n.upload&&this.hasListeners("progress")&&(n.upload.onprogress=s)}catch(l){}if(u&&!this._timer&&(this._timer=setTimeout(function(){t.timedout=!0,t.abort()},u)),o&&(o=b.serializeObject(o),this.url+=~this.url.indexOf("?")?"&"+o:"?"+o),this.username&&this.password?n.open(this.method,this.url,!0,this.username,this.password):n.open(this.method,this.url,!0),this._withCredentials&&(n.withCredentials=!0),"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof a&&!i(a)){var f=this._header["content-type"],h=this._parser||b.serialize[f?f.split(";")[0]:""];!h&&c(f)&&(h=b.serialize["application/json"]),h&&(a=h(a))}for(var p in this.header)null!=this.header[p]&&n.setRequestHeader(p,this.header[p]);return this._responseType&&(n.responseType=this._responseType),this.emit("request",this),n.send("undefined"!=typeof a?a:null),this},b.Request=p,b.get=function(e,t,n){var r=b("GET",e);return"function"==typeof t&&(n=t,t=null),t&&r.query(t),n&&r.end(n),r},b.head=function(e,t,n){var r=b("HEAD",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.del=d,b["delete"]=d,b.patch=function(e,t,n){var r=b("PATCH",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.post=function(e,t,n){var r=b("POST",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r},b.put=function(e,t,n){var r=b("PUT",e);return"function"==typeof t&&(n=t,t=null),t&&r.send(t),n&&r.end(n),r}},{"./is-object":53,"./request":55,"./request-base":54,emitter:24,reduce:51}],53:[function(e,t,n){function r(e){return null!=e&&"object"==typeof e}t.exports=r},{}],54:[function(e,t,n){var r=e("./is-object");n.clearTimeout=function(){return this._timeout=0,clearTimeout(this._timer),this},n.parse=function(e){return this._parser=e,this},n.timeout=function(e){return this._timeout=e,this},n.then=function(e,t){return this.end(function(n,r){n?t(n):e(r)})},n.use=function(e){return e(this),this},n.get=function(e){return this._header[e.toLowerCase()]},n.getHeader=n.get,n.set=function(e,t){if(r(e)){for(var n in e)this.set(n,e[n]);return this}return this._header[e.toLowerCase()]=t,this.header[e]=t,this},n.unset=function(e){return delete this._header[e.toLowerCase()],delete this.header[e],this},n.field=function(e,t){return this._getFormData().append(e,t),this}},{"./is-object":53}],55:[function(e,t,n){function r(e,t,n){return"function"==typeof n?new e("GET",t).end(n):2==arguments.length?new e("GET",t):new e(t,n)}t.exports=r},{}],56:[function(e,t,n){(function(e){var n;if(e.crypto&&crypto.getRandomValues){var r=new Uint8Array(16);n=function(){return crypto.getRandomValues(r),r}}if(!n){var i=new Array(16);n=function(){for(var e,t=0;t<16;t++)0===(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],57:[function(e,t,n){function r(e,t,n){var r=t&&n||0,i=0;for(t=t||[],e.toLowerCase().replace(/[0-9a-f]{2}/g,function(e){i<16&&(t[r+i++]=c[e])});i<16;)t[r+i++]=0;return t}function i(e,t){var n=t||0,r=s;return r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+"-"+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]+r[e[n++]]}function o(e,t,n){var r=t&&n||0,o=t||[];e=e||{};var u=void 0!==e.clockseq?e.clockseq:p,a=void 0!==e.msecs?e.msecs:(new Date).getTime(),s=void 0!==e.nsecs?e.nsecs:v+1,c=a-d+(s-v)/1e4;if(c<0&&void 0===e.clockseq&&(u=u+1&16383),(c<0||a>d)&&void 0===e.nsecs&&(s=0),s>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=a,v=s,p=u,a+=122192928e5;var l=(1e4*(268435455&a)+s)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=255&l;var f=a/4294967296*1e4&268435455;o[r++]=f>>>8&255,o[r++]=255&f,o[r++]=f>>>24&15|16,o[r++]=f>>>16&255,o[r++]=u>>>8|128,o[r++]=255&u;for(var y=e.node||h,g=0;g<6;g++)o[r+g]=y[g];return t?t:i(o)}function u(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"==e?new Array(16):null,e=null),e=e||{};var o=e.random||(e.rng||a)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var u=0;u<16;u++)t[r+u]=o[u];return t||i(o)}for(var a=e("./rng"),s=[],c={},l=0;l<256;l++)s[l]=(l+256).toString(16).substr(1),c[s[l]]=l;var f=a(),h=[1|f[0],f[1],f[2],f[3],f[4],f[5]],p=16383&(f[6]<<8|f[7]),d=0,v=0,y=u;y.v1=o,y.v4=u,y.parse=r,y.unparse=i,t.exports=y},{"./rng":56}],58:[function(e,t,n){(function(e){function n(){if(e.Blob)try{return new Blob(["asdf"],{type:"text/plain"}),Blob}catch(t){}var n=e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder;return function(e,t){var r=new n,i=t.endings,o=t.type;if(i)for(var u=0,a=e.length;u<a;++u)r.append(e[u],i);else for(var u=0,a=e.length;u<a;++u)r.append(e[u]);return o?r.getBlob(o):r.getBlob()}}t.exports=n()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],59:[function(e,t,n){function r(e,t){var n;return n=t?new o(e,t):new o(e)}var i=function(){return this}(),o=i.WebSocket||i.MozWebSocket,u=e("./version");t.exports={w3cwebsocket:o?r:null,version:u}},{"./version":60}],60:[function(e,t,n){t.exports=e("../package.json").version},{"../package.json":61}],61:[function(e,t,n){t.exports={_args:[["websocket@^1.0.23","/Users/benlei/Development/skygear-SDK-JS"]],_from:"websocket@>=1.0.23 <2.0.0",_id:"websocket@1.0.23",_inCache:!0,_installable:!0,_location:"/websocket",_nodeVersion:"0.10.45",_npmOperationalInternal:{host:"packages-16-east.internal.npmjs.com",tmp:"tmp/websocket-1.0.23.tgz_1463625793005_0.4532310354989022"},_npmUser:{email:"brian@worlize.com",name:"theturtle32"},_npmVersion:"2.15.1",_phantomChildren:{},_requested:{name:"websocket",raw:"websocket@^1.0.23",rawSpec:"^1.0.23",scope:null,spec:">=1.0.23 <2.0.0",type:"range"},_requiredBy:["/"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.23.tgz",_shasum:"20de8ec4a7126b09465578cd5dbb29a9c296aac6",_shrinkwrap:null,_spec:"websocket@^1.0.23",_where:"/Users/benlei/Development/skygear-SDK-JS",author:{email:"brian@worlize.com",name:"Brian McKelvey",url:"https://www.worlize.com/"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},config:{verbose:!1},contributors:[{email:"ibc@aliax.net",name:"Iaki Baz Castillo",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.4"},description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^0.0.1",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^1.11.2","jshint-stylish":"^1.0.2",tape:"^4.0.1"},directories:{lib:"./lib"},dist:{shasum:"20de8ec4a7126b09465578cd5dbb29a9c296aac6",tarball:"https://registry.npmjs.org/websocket/-/websocket-1.0.23.tgz"},engines:{node:">=0.8.0"},gitHead:"ba2fa7e9676c456bcfb12ad160655319af66faed",homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",maintainers:[{email:"brian@worlize.com",name:"theturtle32"}],name:"websocket",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.23"}},{}]},{},[8])(8)});
//# sourceMappingURL=skygear.min.js.map
