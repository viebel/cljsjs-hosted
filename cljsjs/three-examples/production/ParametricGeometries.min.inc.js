THREE.ParametricGeometries={klein:function(c,a,d){d=d||new THREE.Vector3;a*=Math.PI;c=2*c*Math.PI;a*=2;var e,b;a<Math.PI?(e=3*Math.cos(a)*(1+Math.sin(a))+2*(1-Math.cos(a)/2)*Math.cos(a)*Math.cos(c),b=-8*Math.sin(a)-2*(1-Math.cos(a)/2)*Math.sin(a)*Math.cos(c)):(e=3*Math.cos(a)*(1+Math.sin(a))+2*(1-Math.cos(a)/2)*Math.cos(c+Math.PI),b=-8*Math.sin(a));return d.set(e,-2*(1-Math.cos(a)/2)*Math.sin(c),b)},plane:function(c,a){return function(d,e,b){return(b||new THREE.Vector3).set(d*c,0,e*a)}},mobius:function(c,
a,d){d=d||new THREE.Vector3;c-=.5;a*=2*Math.PI;return d.set(Math.cos(a)*(2+c*Math.cos(a/2)),Math.sin(a)*(2+c*Math.cos(a/2)),c*Math.sin(a/2))},mobius3d:function(c,a,d){d=d||new THREE.Vector3;c*=Math.PI;a=2*a*Math.PI;c*=2;var e=c/2,b;b=.125*Math.cos(a)*Math.cos(e)-.65*Math.sin(a)*Math.sin(e);e=.125*Math.cos(a)*Math.sin(e)+.65*Math.sin(a)*Math.cos(e);a=(2.25+b)*Math.sin(c);b=(2.25+b)*Math.cos(c);return d.set(b,a,e)}};
THREE.ParametricGeometries.TubeGeometry=function(c,a,d,e,b,f){this.path=c;this.segments=a||64;this.radius=d||1;this.segmentsRadius=e||8;this.closed=b||!1;f&&(this.debug=new THREE.Object3D);var g=this,l=this.segments+1;b=c.computeFrenetFrames(a,b);var m=b.tangents,n=b.normals,p=b.binormals;this.tangents=m;this.normals=n;this.binormals=p;THREE.ParametricGeometry.call(this,function(a,b,e){e=e||new THREE.Vector3;b=2*b*Math.PI;var f=a*(l-1),f=Math.floor(f);a=c.getPointAt(a);var h=m[f],k=n[f],f=p[f];g.debug&&
(g.debug.add(new THREE.ArrowHelper(h,a,d,255)),g.debug.add(new THREE.ArrowHelper(k,a,d,16711680)),g.debug.add(new THREE.ArrowHelper(f,a,d,65280)));h=-g.radius*Math.cos(b);b=g.radius*Math.sin(b);a.x+=h*k.x+b*f.x;a.y+=h*k.y+b*f.y;a.z+=h*k.z+b*f.z;return e.copy(a)},a,e)};THREE.ParametricGeometries.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometries.TubeGeometry.prototype.constructor=THREE.ParametricGeometries.TubeGeometry;
THREE.ParametricGeometries.TorusKnotGeometry=function(c,a,d,e,b,f){function g(){THREE.Curve.call(this)}this.radius=c||200;this.tube=a||40;this.segmentsT=d||64;this.segmentsR=e||8;this.p=b||2;this.q=f||3;g.prototype=Object.create(THREE.Curve.prototype);g.prototype.constructor=g;g.prototype.getPoint=function(a,e){var d=e||new THREE.Vector3;a=2*a*Math.PI;return d.set((1+.5*Math.cos(f*a))*Math.cos(b*a),(1+.5*Math.cos(f*a))*Math.sin(b*a),.5*Math.sin(f*a)).multiplyScalar(c)};var l=new g;THREE.ParametricGeometries.TubeGeometry.call(this,
l,d,a,e,!0,!1)};THREE.ParametricGeometries.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometries.TorusKnotGeometry.prototype.constructor=THREE.ParametricGeometries.TorusKnotGeometry;THREE.ParametricGeometries.SphereGeometry=function(c,a,d){THREE.ParametricGeometry.call(this,function(a,b,d){d=d||new THREE.Vector3;a*=Math.PI;b=2*b*Math.PI;return d.set(c*Math.sin(a)*Math.cos(b),c*Math.sin(a)*Math.sin(b),c*Math.cos(a))},a,d)};
THREE.ParametricGeometries.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype);THREE.ParametricGeometries.SphereGeometry.prototype.constructor=THREE.ParametricGeometries.SphereGeometry;THREE.ParametricGeometries.PlaneGeometry=function(c,a,d,e){THREE.ParametricGeometry.call(this,function(b,d,e){return(e||new THREE.Vector3).set(b*c,0,d*a)},d,e)};THREE.ParametricGeometries.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype);
THREE.ParametricGeometries.PlaneGeometry.prototype.constructor=THREE.ParametricGeometries.PlaneGeometry;