THREE.STLLoader=function(b){this.manager=void 0!==b?b:THREE.DefaultLoadingManager};
THREE.STLLoader.prototype={constructor:THREE.STLLoader,load:function(b,l,h,g){var k=this,a=new THREE.FileLoader(k.manager);a.setResponseType("arraybuffer");a.load(b,function(a){try{l(k.parse(a))}catch(d){g&&g(d)}},h,g)},parse:function(b){function l(a){a=new DataView(a);for(var w=a.getUint32(80,!0),d,b,e,q=!1,r,g,m,f,k,c=0;70>c;c++)1129270351==a.getUint32(c,!1)&&82==a.getUint8(c+4)&&61==a.getUint8(c+5)&&(q=!0,r=[],g=a.getUint8(c+6)/255,m=a.getUint8(c+7)/255,f=a.getUint8(c+8)/255,k=a.getUint8(c+9)/
255);for(var c=new THREE.BufferGeometry,n=[],l=[],h=0;h<w;h++){var p=84+50*h,x=a.getFloat32(p,!0),y=a.getFloat32(p+4,!0),z=a.getFloat32(p+8,!0);q&&(e=a.getUint16(p+48,!0),0===(e&32768)?(d=(e&31)/31,b=(e>>5&31)/31,e=(e>>10&31)/31):(d=g,b=m,e=f));for(var t=1;3>=t;t++){var u=p+12*t;n.push(a.getFloat32(u,!0));n.push(a.getFloat32(u+4,!0));n.push(a.getFloat32(u+8,!0));l.push(x,y,z);q&&r.push(d,b,e)}}c.addAttribute("position",new THREE.BufferAttribute(new Float32Array(n),3));c.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(l),
3));q&&(c.addAttribute("color",new THREE.BufferAttribute(new Float32Array(r),3)),c.hasColors=!0,c.alpha=k);return c}function h(a){for(var b=new THREE.BufferGeometry,d=/facet([\s\S]*?)endfacet/g,g=0,e=/[\s]+([+-]?(?:\d+.\d+|\d+.|\d+|.\d+)(?:[eE][+-]?\d+)?)/.source,k=new RegExp("vertex"+e+e+e,"g"),e=new RegExp("normal"+e+e+e,"g"),h=[],l=[],m=new THREE.Vector3,f;null!==(f=d.exec(a));){for(var v=0,c=0,n=f[0];null!==(f=e.exec(n));)m.x=parseFloat(f[1]),m.y=parseFloat(f[2]),m.z=parseFloat(f[3]),c++;for(;null!==
(f=k.exec(n));)h.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),l.push(m.x,m.y,m.z),v++;1!==c&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+g);3!==v&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+g);g++}b.addAttribute("position",new THREE.Float32BufferAttribute(h,3));b.addAttribute("normal",new THREE.Float32BufferAttribute(l,3));return b}function g(a){return"string"!==typeof a?THREE.LoaderUtils.decodeText(new Uint8Array(a)):
a}var k=function(a){if("string"===typeof a){for(var b=new Uint8Array(a.length),d=0;d<a.length;d++)b[d]=a.charCodeAt(d)&255;return b.buffer||b}return a}(b);return function(a){a=new DataView(a);if(84+50*a.getUint32(80,!0)===a.byteLength)return!0;for(var b=[115,111,108,105,100],d=0;5>d;d++)if(b[d]!=a.getUint8(d,!1))return!0;return!1}(k)?l(k):h(g(b))}};