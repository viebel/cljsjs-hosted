THREE.PVRLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager;this._parser=THREE.PVRLoader.parse};THREE.PVRLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype);THREE.PVRLoader.prototype.constructor=THREE.PVRLoader;THREE.PVRLoader.parse=function(a,b){var d=new Uint32Array(a,0,13),c={buffer:a,header:d,loadMipmaps:b};if(55727696===d[0])return THREE.PVRLoader._parseV3(c);if(559044176===d[11])return THREE.PVRLoader._parseV2(c);console.error("THREE.PVRLoader: Unknown PVR format.")};
THREE.PVRLoader._parseV3=function(a){var b=a.header,d,c,f=b[12],l=b[2],e=b[6],h=b[7],g=b[10],b=b[11];switch(l){case 0:d=2;c=THREE.RGB_PVRTC_2BPPV1_Format;break;case 1:d=2;c=THREE.RGBA_PVRTC_2BPPV1_Format;break;case 2:d=4;c=THREE.RGB_PVRTC_4BPPV1_Format;break;case 3:d=4;c=THREE.RGBA_PVRTC_4BPPV1_Format;break;default:console.error("THREE.PVRLoader: Unsupported PVR format:",l)}a.dataPtr=52+f;a.bpp=d;a.format=c;a.width=h;a.height=e;a.numSurfaces=g;a.numMipmaps=b;a.isCubemap=6===g;return THREE.PVRLoader._extract(a)};
THREE.PVRLoader._parseV2=function(a){var b=a.header,d=b[0],c=b[1],f=b[2],l=b[3],e=b[12],h=b[4]&255,g,m,b=0<b[10];25===h?(m=b?THREE.RGBA_PVRTC_4BPPV1_Format:THREE.RGB_PVRTC_4BPPV1_Format,g=4):24===h?(m=b?THREE.RGBA_PVRTC_2BPPV1_Format:THREE.RGB_PVRTC_2BPPV1_Format,g=2):console.error("THREE.PVRLoader: Unknown PVR format:",h);a.dataPtr=d;a.bpp=g;a.format=m;a.width=f;a.height=c;a.numSurfaces=e;a.numMipmaps=l+1;a.isCubemap=6===e;return THREE.PVRLoader._extract(a)};
THREE.PVRLoader._extract=function(a){var b={mipmaps:[],width:a.width,height:a.height,format:a.format,mipmapCount:a.numMipmaps,isCubemap:a.isCubemap},d=a.buffer,c=a.dataPtr,f=a.bpp,l=a.numSurfaces,e=0,h=0,g=0,m=0,k=e=0,g=2===f?8:4,m=4,h=g*m*f/8;b.mipmaps.length=a.numMipmaps*l;for(f=0;f<a.numMipmaps;){var n=a.width>>f,p=a.height>>f,e=n/g,k=p/m;2>e&&(e=2);2>k&&(k=2);e=e*k*h;for(k=0;k<l;k++){var q={data:new Uint8Array(d,c,e),width:n,height:p};b.mipmaps[k*a.numMipmaps+f]=q;c+=e}f++}return b};