THREE.MD2Loader=function(l){this.manager=void 0!==l?l:THREE.DefaultLoadingManager};
THREE.MD2Loader.prototype={constructor:THREE.MD2Loader,load:function(l,e,b,f){var d=this,c=new THREE.FileLoader(d.manager);c.setResponseType("arraybuffer");c.load(l,function(a){e(d.parse(a))},b,f)},parse:function(){var l=[[-.525731,0,.850651],[-.442863,.238856,.864188],[-.295242,0,.955423],[-.309017,.5,.809017],[-.16246,.262866,.951056],[0,0,1],[0,.850651,.525731],[-.147621,.716567,.681718],[.147621,.716567,.681718],[0,.525731,.850651],[.309017,.5,.809017],[.525731,0,.850651],[.295242,0,.955423],
[.442863,.238856,.864188],[.16246,.262866,.951056],[-.681718,.147621,.716567],[-.809017,.309017,.5],[-.587785,.425325,.688191],[-.850651,.525731,0],[-.864188,.442863,.238856],[-.716567,.681718,.147621],[-.688191,.587785,.425325],[-.5,.809017,.309017],[-.238856,.864188,.442863],[-.425325,.688191,.587785],[-.716567,.681718,-.147621],[-.5,.809017,-.309017],[-.525731,.850651,0],[0,.850651,-.525731],[-.238856,.864188,-.442863],[0,.955423,-.295242],[-.262866,.951056,-.16246],[0,1,0],[0,.955423,.295242],
[-.262866,.951056,.16246],[.238856,.864188,.442863],[.262866,.951056,.16246],[.5,.809017,.309017],[.238856,.864188,-.442863],[.262866,.951056,-.16246],[.5,.809017,-.309017],[.850651,.525731,0],[.716567,.681718,.147621],[.716567,.681718,-.147621],[.525731,.850651,0],[.425325,.688191,.587785],[.864188,.442863,.238856],[.688191,.587785,.425325],[.809017,.309017,.5],[.681718,.147621,.716567],[.587785,.425325,.688191],[.955423,.295242,0],[1,0,0],[.951056,.16246,.262866],[.850651,-.525731,0],[.955423,-.295242,
0],[.864188,-.442863,.238856],[.951056,-.16246,.262866],[.809017,-.309017,.5],[.681718,-.147621,.716567],[.850651,0,.525731],[.864188,.442863,-.238856],[.809017,.309017,-.5],[.951056,.16246,-.262866],[.525731,0,-.850651],[.681718,.147621,-.716567],[.681718,-.147621,-.716567],[.850651,0,-.525731],[.809017,-.309017,-.5],[.864188,-.442863,-.238856],[.951056,-.16246,-.262866],[.147621,.716567,-.681718],[.309017,.5,-.809017],[.425325,.688191,-.587785],[.442863,.238856,-.864188],[.587785,.425325,-.688191],
[.688191,.587785,-.425325],[-.147621,.716567,-.681718],[-.309017,.5,-.809017],[0,.525731,-.850651],[-.525731,0,-.850651],[-.442863,.238856,-.864188],[-.295242,0,-.955423],[-.16246,.262866,-.951056],[0,0,-1],[.295242,0,-.955423],[.16246,.262866,-.951056],[-.442863,-.238856,-.864188],[-.309017,-.5,-.809017],[-.16246,-.262866,-.951056],[0,-.850651,-.525731],[-.147621,-.716567,-.681718],[.147621,-.716567,-.681718],[0,-.525731,-.850651],[.309017,-.5,-.809017],[.442863,-.238856,-.864188],[.16246,-.262866,
-.951056],[.238856,-.864188,-.442863],[.5,-.809017,-.309017],[.425325,-.688191,-.587785],[.716567,-.681718,-.147621],[.688191,-.587785,-.425325],[.587785,-.425325,-.688191],[0,-.955423,-.295242],[0,-1,0],[.262866,-.951056,-.16246],[0,-.850651,.525731],[0,-.955423,.295242],[.238856,-.864188,.442863],[.262866,-.951056,.16246],[.5,-.809017,.309017],[.716567,-.681718,.147621],[.525731,-.850651,0],[-.238856,-.864188,-.442863],[-.5,-.809017,-.309017],[-.262866,-.951056,-.16246],[-.850651,-.525731,0],[-.716567,
-.681718,-.147621],[-.716567,-.681718,.147621],[-.525731,-.850651,0],[-.5,-.809017,.309017],[-.238856,-.864188,.442863],[-.262866,-.951056,.16246],[-.864188,-.442863,.238856],[-.809017,-.309017,.5],[-.688191,-.587785,.425325],[-.681718,-.147621,.716567],[-.442863,-.238856,.864188],[-.587785,-.425325,.688191],[-.309017,-.5,.809017],[-.147621,-.716567,.681718],[-.425325,-.688191,.587785],[-.16246,-.262866,.951056],[.442863,-.238856,.864188],[.16246,-.262866,.951056],[.309017,-.5,.809017],[.147621,-.716567,
.681718],[0,-.525731,.850651],[.425325,-.688191,.587785],[.587785,-.425325,.688191],[.688191,-.587785,.425325],[-.955423,.295242,0],[-.951056,.16246,.262866],[-1,0,0],[-.850651,0,.525731],[-.955423,-.295242,0],[-.951056,-.16246,.262866],[-.864188,.442863,-.238856],[-.951056,.16246,-.262866],[-.809017,.309017,-.5],[-.864188,-.442863,-.238856],[-.951056,-.16246,-.262866],[-.809017,-.309017,-.5],[-.681718,.147621,-.716567],[-.681718,-.147621,-.716567],[-.850651,0,-.525731],[-.688191,.587785,-.425325],
[-.587785,.425325,-.688191],[-.425325,.688191,-.587785],[-.425325,-.688191,-.587785],[-.587785,-.425325,-.688191],[-.688191,-.587785,-.425325]];return function(e){console.time("MD2Loader");var b=new DataView(e),f={},d="ident version skinwidth skinheight framesize num_skins num_vertices num_st num_tris num_glcmds num_frames offset_skins offset_st offset_tris offset_frames offset_glcmds offset_end".split(" ");for(e=0;e<d.length;e++)f[d[e]]=b.getInt32(4*e,!0);if(844121161!==f.ident||8!==f.version)console.error("Not a valid MD2 file");
else if(f.offset_end!==b.byteLength)console.error("Corrupted MD2 file");else{var d=new THREE.Geometry,c=[],a=f.offset_st;e=0;for(var k=f.num_st;e<k;e++){var g=b.getInt16(a+0,!0),h=b.getInt16(a+2,!0);c.push(new THREE.Vector2(g/f.skinwidth,1-h/f.skinheight));a+=4}a=f.offset_tris;e=0;for(k=f.num_tris;e<k;e++){var g=b.getUint16(a+0,!0),h=b.getUint16(a+2,!0),p=b.getUint16(a+4,!0);d.faces.push(new THREE.Face3(g,h,p));d.faceVertexUvs[0].push([c[b.getUint16(a+6,!0)],c[b.getUint16(a+8,!0)],c[b.getUint16(a+
10,!0)]]);a+=12}g=new THREE.Vector3;h=new THREE.Vector3;p=[];a=f.offset_frames;e=0;for(k=f.num_frames;e<k;e++){h.set(b.getFloat32(a+0,!0),b.getFloat32(a+4,!0),b.getFloat32(a+8,!0));g.set(b.getFloat32(a+12,!0),b.getFloat32(a+16,!0),b.getFloat32(a+20,!0));a+=24;for(c=0;16>c;c++){var m=b.getUint8(a+c,!0);if(0===m)break;p[c]=m}m={name:String.fromCharCode.apply(null,p),vertices:[],normals:[]};a+=16;for(c=0;c<f.num_vertices;c++){var q=b.getUint8(a++,!0),r=b.getUint8(a++,!0),t=b.getUint8(a++,!0),n=l[b.getUint8(a++,
!0)],q=new THREE.Vector3(q*h.x+g.x,t*h.z+g.z,r*h.y+g.y),n=new THREE.Vector3(n[0],n[2],n[1]);m.vertices.push(q);m.normals.push(n)}d.morphTargets.push(m)}d.vertices=d.morphTargets[0].vertices;b=d.morphTargets[0];c=0;for(f=d.faces.length;c<f;c++)a=d.faces[c],a.vertexNormals=[b.normals[a.a],b.normals[a.b],b.normals[a.c]];e=0;for(k=d.morphTargets.length;e<k;e++){b=d.morphTargets[e];g=[];c=0;for(f=d.faces.length;c<f;c++)a=d.faces[c],g.push({a:b.normals[a.a],b:b.normals[a.b],c:b.normals[a.c]});d.morphNormals.push({vertexNormals:g})}d.animations=
THREE.AnimationClip.CreateClipsFromMorphTargetSequences(d.morphTargets,10);console.timeEnd("MD2Loader");return d}}}()};