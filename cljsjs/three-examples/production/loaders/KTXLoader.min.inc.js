THREE.KTXLoader=function(){this._parser=THREE.KTXLoader.parse};THREE.KTXLoader.prototype=Object.create(THREE.CompressedTextureLoader.prototype);THREE.KTXLoader.prototype.constructor=THREE.KTXLoader;THREE.KTXLoader.parse=function(c,a){var d=new KhronosTextureContainer(c,1);return{mipmaps:d.mipmaps(a),width:d.pixelWidth,height:d.pixelHeight,format:d.glInternalFormat,isCubemap:6===d.numberOfFaces,mipmapCount:d.numberOfMipmapLevels}};
var KhronosTextureContainer=function(){function c(a,d,b,e){this.arrayBuffer=a;a=new Uint8Array(this.arrayBuffer,0,12);171!==a[0]||75!==a[1]||84!==a[2]||88!==a[3]||32!==a[4]||49!==a[5]||49!==a[6]||187!==a[7]||13!==a[8]||10!==a[9]||26!==a[10]||10!==a[11]?console.error("texture missing KTX identifier"):(a=new Int32Array(this.arrayBuffer,12,13),this.glType=(b=16909060===a[0])?this.switchEndainness(a[1]):a[1],this.glTypeSize=b?this.switchEndainness(a[2]):a[2],this.glFormat=b?this.switchEndainness(a[3]):
a[3],this.glInternalFormat=b?this.switchEndainness(a[4]):a[4],this.glBaseInternalFormat=b?this.switchEndainness(a[5]):a[5],this.pixelWidth=b?this.switchEndainness(a[6]):a[6],this.pixelHeight=b?this.switchEndainness(a[7]):a[7],this.pixelDepth=b?this.switchEndainness(a[8]):a[8],this.numberOfArrayElements=b?this.switchEndainness(a[9]):a[9],this.numberOfFaces=b?this.switchEndainness(a[10]):a[10],this.numberOfMipmapLevels=b?this.switchEndainness(a[11]):a[11],this.bytesOfKeyValueData=b?this.switchEndainness(a[12]):
a[12],0!==this.glType?console.warn("only compressed formats currently supported"):(this.numberOfMipmapLevels=Math.max(1,this.numberOfMipmapLevels),0===this.pixelHeight||0!==this.pixelDepth?console.warn("only 2D textures currently supported"):0!==this.numberOfArrayElements?console.warn("texture arrays not currently supported"):this.numberOfFaces!==d?console.warn("number of faces expected"+d+", but found "+this.numberOfFaces):this.loadType=c.COMPRESSED_2D))}c.prototype.switchEndainness=function(a){return(a&
255)<<24|(a&65280)<<8|a>>8&65280|a>>24&255};c.prototype.mipmaps=function(a){var d=[],b=c.HEADER_LEN+this.bytesOfKeyValueData,e=this.pixelWidth,f=this.pixelHeight;a=a?this.numberOfMipmapLevels:1;for(var h=0;h<a;h++){for(var g=(new Int32Array(this.arrayBuffer,b,1))[0],k=0;k<this.numberOfFaces;k++){var l=new Uint8Array(this.arrayBuffer,b+4,g);d.push({data:l,width:e,height:f});b+=g+4;b+=3-(g+3)%4}e=Math.max(1,.5*e);f=Math.max(1,.5*f)}return d};c.HEADER_LEN=64;c.COMPRESSED_2D=0;c.COMPRESSED_3D=1;c.TEX_2D=
2;c.TEX_3D=3;return c}();