SEA3D.LZMA=function(){var a=a||{};a.OutWindow=function(){this._windowSize=0};a.OutWindow.prototype.create=function(b){this._buffer&&this._windowSize===b||(this._buffer=[]);this._windowSize=b;this._streamPos=this._pos=0};a.OutWindow.prototype.flush=function(){var b=this._pos-this._streamPos;if(0!==b){for(;b--;)this._stream.writeByte(this._buffer[this._streamPos++]);this._pos>=this._windowSize&&(this._pos=0);this._streamPos=this._pos}};a.OutWindow.prototype.releaseStream=function(){this.flush();this._stream=
null};a.OutWindow.prototype.setStream=function(b){this.releaseStream();this._stream=b};a.OutWindow.prototype.init=function(b){b||(this._pos=this._streamPos=0)};a.OutWindow.prototype.copyBlock=function(b,e){var a=this._pos-b-1;for(0>a&&(a+=this._windowSize);e--;)a>=this._windowSize&&(a=0),this._buffer[this._pos++]=this._buffer[a++],this._pos>=this._windowSize&&this.flush()};a.OutWindow.prototype.putByte=function(b){this._buffer[this._pos++]=b;this._pos>=this._windowSize&&this.flush()};a.OutWindow.prototype.getByte=
function(b){b=this._pos-b-1;0>b&&(b+=this._windowSize);return this._buffer[b]};a.RangeDecoder=function(){};a.RangeDecoder.prototype.setStream=function(b){this._stream=b};a.RangeDecoder.prototype.releaseStream=function(){this._stream=null};a.RangeDecoder.prototype.init=function(){var b=5;this._code=0;for(this._range=-1;b--;)this._code=this._code<<8|this._stream.readByte()};a.RangeDecoder.prototype.decodeDirectBits=function(b){for(var a=0,d;b--;)this._range>>>=1,d=this._code-this._range>>>31,this._code-=
this._range&d-1,a=a<<1|1-d,0===(this._range&4278190080)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8);return a};a.RangeDecoder.prototype.decodeBit=function(b,a){var d=b[a],c=(this._range>>>11)*d;if((this._code^2147483648)<(c^2147483648))return this._range=c,b[a]+=2048-d>>>5,0===(this._range&4278190080)&&(this._code=this._code<<8|this._stream.readByte(),this._range<<=8),0;this._range-=c;this._code-=c;b[a]-=d>>>5;0===(this._range&4278190080)&&(this._code=this._code<<8|this._stream.readByte(),
this._range<<=8);return 1};a.initBitModels=function(b,a){for(;a--;)b[a]=1024};a.BitTreeDecoder=function(b){this._models=[];this._numBitLevels=b};a.BitTreeDecoder.prototype.init=function(){a.initBitModels(this._models,1<<this._numBitLevels)};a.BitTreeDecoder.prototype.decode=function(b){for(var a=1,d=this._numBitLevels;d--;)a=a<<1|b.decodeBit(this._models,a);return a-(1<<this._numBitLevels)};a.BitTreeDecoder.prototype.reverseDecode=function(b){for(var a=1,d=0,c=0,f;c<this._numBitLevels;++c)f=b.decodeBit(this._models,
a),a=a<<1|f,d|=f<<c;return d};a.reverseDecode2=function(b,a,d,c){for(var f=1,h=0,k=0,l;k<c;++k)l=d.decodeBit(b,a+f),f=f<<1|l,h|=l<<k;return h};a.LenDecoder=function(){this._choice=[];this._lowCoder=[];this._midCoder=[];this._highCoder=new a.BitTreeDecoder(8);this._numPosStates=0};a.LenDecoder.prototype.create=function(b){for(;this._numPosStates<b;++this._numPosStates)this._lowCoder[this._numPosStates]=new a.BitTreeDecoder(3),this._midCoder[this._numPosStates]=new a.BitTreeDecoder(3)};a.LenDecoder.prototype.init=
function(){var b=this._numPosStates;for(a.initBitModels(this._choice,2);b--;)this._lowCoder[b].init(),this._midCoder[b].init();this._highCoder.init()};a.LenDecoder.prototype.decode=function(b,a){return 0===b.decodeBit(this._choice,0)?this._lowCoder[a].decode(b):0===b.decodeBit(this._choice,1)?8+this._midCoder[a].decode(b):16+this._highCoder.decode(b)};a.Decoder2=function(){this._decoders=[]};a.Decoder2.prototype.init=function(){a.initBitModels(this._decoders,768)};a.Decoder2.prototype.decodeNormal=
function(b){var a=1;do a=a<<1|b.decodeBit(this._decoders,a);while(256>a);return a&255};a.Decoder2.prototype.decodeWithMatchByte=function(b,a){var d=1,c,f;do if(c=a>>7&1,a<<=1,f=b.decodeBit(this._decoders,(1+c<<8)+d),d=d<<1|f,c!==f){for(;256>d;)d=d<<1|b.decodeBit(this._decoders,d);break}while(256>d);return d&255};a.LiteralDecoder=function(){};a.LiteralDecoder.prototype.create=function(b,e){var d;if(!this._coders||this._numPrevBits!==e||this._numPosBits!==b)for(this._numPosBits=b,this._posMask=(1<<
b)-1,this._numPrevBits=e,this._coders=[],d=1<<this._numPrevBits+this._numPosBits;d--;)this._coders[d]=new a.Decoder2};a.LiteralDecoder.prototype.init=function(){for(var a=1<<this._numPrevBits+this._numPosBits;a--;)this._coders[a].init()};a.LiteralDecoder.prototype.getDecoder=function(a,e){return this._coders[((a&this._posMask)<<this._numPrevBits)+((e&255)>>>8-this._numPrevBits)]};a.Decoder=function(){this._outWindow=new a.OutWindow;this._rangeDecoder=new a.RangeDecoder;this._isMatchDecoders=[];this._isRepDecoders=
[];this._isRepG0Decoders=[];this._isRepG1Decoders=[];this._isRepG2Decoders=[];this._isRep0LongDecoders=[];this._posSlotDecoder=[];this._posDecoders=[];this._posAlignDecoder=new a.BitTreeDecoder(4);this._lenDecoder=new a.LenDecoder;this._repLenDecoder=new a.LenDecoder;this._literalDecoder=new a.LiteralDecoder;this._dictionarySizeCheck=this._dictionarySize=-1;this._posSlotDecoder[0]=new a.BitTreeDecoder(6);this._posSlotDecoder[1]=new a.BitTreeDecoder(6);this._posSlotDecoder[2]=new a.BitTreeDecoder(6);
this._posSlotDecoder[3]=new a.BitTreeDecoder(6)};a.Decoder.prototype.setDictionarySize=function(a){if(0>a)return!1;this._dictionarySize!==a&&(this._dictionarySize=a,this._dictionarySizeCheck=Math.max(this._dictionarySize,1),this._outWindow.create(Math.max(this._dictionarySizeCheck,4096)));return!0};a.Decoder.prototype.setLcLpPb=function(a,e,d){var c=1<<d;if(8<a||4<e||4<d)return!1;this._literalDecoder.create(e,a);this._lenDecoder.create(c);this._repLenDecoder.create(c);this._posStateMask=c-1;return!0};
a.Decoder.prototype.init=function(){var b=4;this._outWindow.init(!1);a.initBitModels(this._isMatchDecoders,192);a.initBitModels(this._isRep0LongDecoders,192);a.initBitModels(this._isRepDecoders,12);a.initBitModels(this._isRepG0Decoders,12);a.initBitModels(this._isRepG1Decoders,12);a.initBitModels(this._isRepG2Decoders,12);a.initBitModels(this._posDecoders,114);for(this._literalDecoder.init();b--;)this._posSlotDecoder[b].init();this._lenDecoder.init();this._repLenDecoder.init();this._posAlignDecoder.init();
this._rangeDecoder.init()};a.Decoder.prototype.decode=function(b,e,d){var c=0,f=0,h=0,k=0,l=0,m=0,g=0;this._rangeDecoder.setStream(b);this._outWindow.setStream(e);for(this.init();0>d||m<d;)if(b=m&this._posStateMask,0===this._rangeDecoder.decodeBit(this._isMatchDecoders,(c<<4)+b))g=this._literalDecoder.getDecoder(m++,g),g=7<=c?g.decodeWithMatchByte(this._rangeDecoder,this._outWindow.getByte(f)):g.decodeNormal(this._rangeDecoder),this._outWindow.putByte(g),c=4>c?0:c-(10>c?3:6);else{if(1===this._rangeDecoder.decodeBit(this._isRepDecoders,
c))g=0,0===this._rangeDecoder.decodeBit(this._isRepG0Decoders,c)?0===this._rangeDecoder.decodeBit(this._isRep0LongDecoders,(c<<4)+b)&&(c=7>c?9:11,g=1):(0===this._rangeDecoder.decodeBit(this._isRepG1Decoders,c)?e=h:(0===this._rangeDecoder.decodeBit(this._isRepG2Decoders,c)?e=k:(e=l,l=k),k=h),h=f,f=e),0===g&&(g=2+this._repLenDecoder.decode(this._rangeDecoder,b),c=7>c?8:11);else if(l=k,k=h,h=f,g=2+this._lenDecoder.decode(this._rangeDecoder,b),c=7>c?7:10,b=this._posSlotDecoder[5>=g?g-2:3].decode(this._rangeDecoder),
4<=b)if(e=(b>>1)-1,f=(2|b&1)<<e,14>b)f+=a.reverseDecode2(this._posDecoders,f-b-1,this._rangeDecoder,e);else{if(f+=this._rangeDecoder.decodeDirectBits(e-4)<<4,f+=this._posAlignDecoder.reverseDecode(this._rangeDecoder),0>f){if(-1===f)break;return!1}}else f=b;if(f>=m||f>=this._dictionarySizeCheck)return!1;this._outWindow.copyBlock(f,g);m+=g;g=this._outWindow.getByte(0)}this._outWindow.flush();this._outWindow.releaseStream();this._rangeDecoder.releaseStream();return!0};a.Decoder.prototype.setDecoderProperties=
function(a){var e,d;if(5>a.size)return!1;e=a.readByte();d=e%9;e=~~(e/9);if(!this.setLcLpPb(d,e%5,~~(e/5)))return!1;e=a.readByte();e|=a.readByte()<<8;e|=a.readByte()<<16;e+=16777216*a.readByte();return this.setDictionarySize(e)};a.decompress=function(b,e,d,c){var f=new a.Decoder;if(!f.setDecoderProperties(b))throw"Incorrect stream properties";if(!f.decode(e,d,c))throw"Error in data stream";return!0};a.decompressFile=function(b,e){var d=new a.Decoder,c;if(!d.setDecoderProperties(b))throw"Incorrect stream properties";
c=b.readByte();c|=b.readByte()<<8;c|=b.readByte()<<16;c+=16777216*b.readByte();b.readByte();b.readByte();b.readByte();b.readByte();if(!d.decode(b,e,c))throw"Error in data stream";return!0};return a}();SEA3D.File.LZMAUncompress=function(a){a=new Uint8Array(a);var b={data:[],position:0,writeByte:function(a){this.data[this.position++]=a}};SEA3D.LZMA.decompressFile({data:a,position:0,readByte:function(){return this.data[this.position++]}},b);return(new Uint8Array(b.data)).buffer};
SEA3D.File.setDecompressionEngine(2,"lzma",SEA3D.File.LZMAUncompress);