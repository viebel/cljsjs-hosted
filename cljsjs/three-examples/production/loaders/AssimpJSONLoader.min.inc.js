THREE.AssimpJSONLoader=function(a){this.manager=void 0!==a?a:THREE.DefaultLoadingManager};
THREE.AssimpJSONLoader.prototype={constructor:THREE.AssimpJSONLoader,crossOrigin:"Anonymous",load:function(a,l,k,f){var h=this,n=THREE.LoaderUtils.extractUrlBase(a);(new THREE.FileLoader(this.manager)).load(a,function(a){a=JSON.parse(a);var g=a.__metadata__;if("undefined"!==typeof g){if("assimp2json"!==g.format){f("THREE.AssimpJSONLoader: Not an assimp2json scene.");return}if(100>g.version&&200<=g.version){f("THREE.AssimpJSONLoader: Unsupported assimp2json file format version.");return}}l(h.parse(a,
n))},k,f)},setCrossOrigin:function(a){this.crossOrigin=a},parse:function(a,l){function k(g,b){for(var a=Array(g.length),d=0;d<g.length;++d)a[d]=b.call(this,g[d]);return a}function f(g,b,a,d){var c=new THREE.Object3D,e,p;c.name=b.name||"";c.matrix=(new THREE.Matrix4).fromArray(b.transformation).transpose();c.matrix.decompose(c.position,c.quaternion,c.scale);for(e=0;b.meshes&&e<b.meshes.length;e++)p=b.meshes[e],c.add(new THREE.Mesh(a[p],d[g.meshes[p].materialindex]));for(e=0;b.children&&e<b.children.length;e++)c.add(f(g,
b.children[e],a,d));return c}var h=new THREE.TextureLoader(this.manager);h.setPath(l).setCrossOrigin(this.crossOrigin);var n=k(a.meshes,function(a){var b=new THREE.BufferGeometry,m,d,c,e=[],f=a.vertices||[],k=a.normals||[],h=a.texturecoords||[],l=a.colors||[],h=h[0]||[];m=0;for(d=a.faces.length;m<d;m++)c=a.faces[m],e.push(c[0],c[1],c[2]);b.setIndex(e);b.addAttribute("position",new THREE.Float32BufferAttribute(f,3));0<k.length&&b.addAttribute("normal",new THREE.Float32BufferAttribute(k,3));0<h.length&&
b.addAttribute("uv",new THREE.Float32BufferAttribute(h,2));0<l.length&&b.addAttribute("color",new THREE.Float32BufferAttribute(l,3));b.computeBoundingSphere();return b}),q=k(a.materials,function(a){var b=new THREE.MeshPhongMaterial,f;for(f in a.properties){var d=a.properties[f],c=d.value;switch(d.key){case "$tex.file":d=d.semantic;if(1===d||2===d||5===d||6===d){var e;switch(d){case 1:e="map";break;case 2:e="specularMap";break;case 5:e="bumpMap";break;case 6:e="normalMap"}c=h.load(c);c.wrapS=c.wrapT=
THREE.RepeatWrapping;b[e]=c}break;case "?mat.name":b.name=c;break;case "$clr.diffuse":b.color.fromArray(c);break;case "$clr.specular":b.specular.fromArray(c);break;case "$clr.emissive":b.emissive.fromArray(c);break;case "$mat.shininess":b.shininess=c;break;case "$mat.shadingm":b.flatShading=1===c?!0:!1;break;case "$mat.opacity":1>c&&(b.opacity=c,b.transparent=!0)}}return b});return f(a,a.rootnode,n,q)}};