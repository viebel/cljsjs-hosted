THREE.TGALoader=function(k){this.manager=void 0!==k?k:THREE.DefaultLoadingManager};
THREE.TGALoader.prototype={constructor:THREE.TGALoader,load:function(k,c,b,h){var t=this,n=new THREE.Texture,u=new THREE.FileLoader(this.manager);u.setResponseType("arraybuffer");u.load(k,function(b){n.image=t.parse(b);n.needsUpdate=!0;void 0!==c&&c(n)},b,h);return n},parse:function(k){19>k.length&&console.error("THREE.TGALoader: Not enough data to contain header.");var c=new Uint8Array(k),b=0,h={id_length:c[b++],colormap_type:c[b++],image_type:c[b++],colormap_index:c[b++]|c[b++]<<8,colormap_length:c[b++]|
c[b++]<<8,colormap_size:c[b++],origin:[c[b++]|c[b++]<<8,c[b++]|c[b++]<<8],width:c[b++]|c[b++]<<8,height:c[b++]|c[b++]<<8,pixel_size:c[b++],flags:c[b++]};(function(d){switch(d.image_type){case 1:case 9:(256<d.colormap_length||24!==d.colormap_size||1!==d.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case 2:case 3:case 10:case 11:d.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case 0:console.error("THREE.TGALoader: No data.");
default:console.error('THREE.TGALoader: Invalid type "%s".',d.image_type)}(0>=d.width||0>=d.height)&&console.error("THREE.TGALoader: Invalid image size.");8!==d.pixel_size&&16!==d.pixel_size&&24!==d.pixel_size&&32!==d.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',d.pixel_size)})(h);h.id_length+b>k.length&&console.error("THREE.TGALoader: No data.");var b=b+h.id_length,t=!1,n=!1,u=!1;switch(h.image_type){case 9:n=t=!0;break;case 1:n=!0;break;case 10:t=!0;break;case 11:u=t=!0;
break;case 3:u=!0}k=document.createElement("canvas");k.width=h.width;k.height=h.height;var v=k.getContext("2d"),w=v.createImageData(h.width,h.height),c=function(d,a,p,b,c){var h,q,f;h=p.pixel_size>>3;q=p.width*p.height*h;a&&(f=c.subarray(b,b+=p.colormap_length*(p.colormap_size>>3)));if(d){d=new Uint8Array(q);var l;p=0;for(var g=new Uint8Array(h);p<q;)if(l=c[b++],a=(l&127)+1,l&128){for(l=0;l<h;++l)g[l]=c[b++];for(l=0;l<a;++l)d.set(g,p+l*h);p+=h*a}else{a*=h;for(l=0;l<a;++l)d[p+l]=c[b++];p+=a}}else d=
c.subarray(b,b+(a?p.width*p.height:q));return{pixel_data:d,palettes:f}}(t,n,h,b,c);(function(d,a,b,c,k){var r,q,f,l,g;switch((h.flags&48)>>4){default:case 2:r=0;q=1;l=a;a=0;f=1;g=b;break;case 0:r=0;q=1;l=a;a=b-1;g=f=-1;break;case 3:r=a-1;l=q=-1;a=0;f=1;g=b;break;case 1:r=a-1,l=q=-1,a=b-1,g=f=-1}if(u)switch(h.pixel_size){case 8:k=f;b=g;g=0;var e,m;f=h.width;for(m=a;m!==b;m+=k)for(e=r;e!==l;e+=q,g++)a=c[g],d[4*(e+f*m)+0]=a,d[4*(e+f*m)+1]=a,d[4*(e+f*m)+2]=a,d[4*(e+f*m)+3]=255;break;case 16:k=f;b=g;g=
0;f=h.width;for(e=a;e!==b;e+=k)for(a=r;a!==l;a+=q,g+=2)d[4*(a+f*e)+0]=c[g+0],d[4*(a+f*e)+1]=c[g+0],d[4*(a+f*e)+2]=c[g+0],d[4*(a+f*e)+3]=c[g+1];break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(h.pixel_size){case 8:b=f;f=0;var n;e=h.width;for(n=a;n!==g;n+=b)for(m=r;m!==l;m+=q,f++)a=c[f],d[4*(m+e*n)+3]=255,d[4*(m+e*n)+2]=k[3*a+0],d[4*(m+e*n)+1]=k[3*a+1],d[4*(m+e*n)+0]=k[3*a+2];break;case 16:k=f;b=g;g=0;f=h.width;for(m=a;m!==b;m+=k)for(e=r;e!==l;e+=q,g+=2)a=c[g+0]+(c[g+
1]<<8),d[4*(e+f*m)+0]=(a&31744)>>7,d[4*(e+f*m)+1]=(a&992)>>2,d[4*(e+f*m)+2]=(a&31)>>3,d[4*(e+f*m)+3]=a&32768?0:255;break;case 24:k=f;b=g;g=0;f=h.width;for(e=a;e!==b;e+=k)for(a=r;a!==l;a+=q,g+=3)d[4*(a+f*e)+3]=255,d[4*(a+f*e)+2]=c[g+0],d[4*(a+f*e)+1]=c[g+1],d[4*(a+f*e)+0]=c[g+2];break;case 32:k=f;b=g;g=0;f=h.width;for(e=a;e!==b;e+=k)for(a=r;a!==l;a+=q,g+=4)d[4*(a+f*e)+2]=c[g+0],d[4*(a+f*e)+1]=c[g+1],d[4*(a+f*e)+0]=c[g+2],d[4*(a+f*e)+3]=c[g+3];break;default:console.error("THREE.TGALoader: Format not supported.")}return d})(w.data,
h.width,h.height,c.pixel_data,c.palettes);v.putImageData(w,0,0);return k}};