THREE.OBJLoader=function(){function u(){var f={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(b,d){if(this.object&&!1===this.object.fromDeclaration)this.object.name=b,this.object.fromDeclaration=!1!==d;else{var a=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0);this.object={name:b||"",fromDeclaration:!1!==d,geometry:{vertices:[],
normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(a,b){var d=this._finalize(!1);d&&(d.inherited||0>=d.groupCount)&&this.materials.splice(d.index,1);d={index:this.materials.length,name:a||"",mtllib:Array.isArray(b)&&0<b.length?b[b.length-1]:"",smooth:void 0!==d?d.smooth:this.smooth,groupStart:void 0!==d?d.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(a){a={index:"number"===typeof a?a:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,
groupEnd:-1,groupCount:-1,inherited:!1};a.clone=this.clone.bind(a);return a}};this.materials.push(d);return d},currentMaterial:function(){if(0<this.materials.length)return this.materials[this.materials.length-1]},_finalize:function(a){var b=this.currentMaterial();b&&-1===b.groupEnd&&(b.groupEnd=this.geometry.vertices.length/3,b.groupCount=b.groupEnd-b.groupStart,b.inherited=!1);if(a&&1<this.materials.length)for(var d=this.materials.length-1;0<=d;d--)0>=this.materials[d].groupCount&&this.materials.splice(d,
1);a&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth});return b}};a&&a.name&&"function"===typeof a.clone&&(a=a.clone(0),a.inherited=!0,this.object.materials.push(a));this.objects.push(this.object)}},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(b,d){var a=parseInt(b,10);return 3*(0<=a?a-1:a+d/3)},parseNormalIndex:function(b,d){var a=parseInt(b,10);return 3*(0<=a?a-1:a+d/3)},parseUVIndex:function(b,
d){var a=parseInt(b,10);return 2*(0<=a?a-1:a+d/2)},addVertex:function(b,d,a){var c=this.vertices,e=this.object.geometry.vertices;e.push(c[b+0],c[b+1],c[b+2]);e.push(c[d+0],c[d+1],c[d+2]);e.push(c[a+0],c[a+1],c[a+2])},addVertexPoint:function(b){var d=this.vertices;this.object.geometry.vertices.push(d[b+0],d[b+1],d[b+2])},addVertexLine:function(b){var d=this.vertices;this.object.geometry.vertices.push(d[b+0],d[b+1],d[b+2])},addNormal:function(b,d,a){var c=this.normals,e=this.object.geometry.normals;
e.push(c[b+0],c[b+1],c[b+2]);e.push(c[d+0],c[d+1],c[d+2]);e.push(c[a+0],c[a+1],c[a+2])},addColor:function(b,d,a){var c=this.colors,e=this.object.geometry.colors;e.push(c[b+0],c[b+1],c[b+2]);e.push(c[d+0],c[d+1],c[d+2]);e.push(c[a+0],c[a+1],c[a+2])},addUV:function(b,d,a){var c=this.uvs,e=this.object.geometry.uvs;e.push(c[b+0],c[b+1]);e.push(c[d+0],c[d+1]);e.push(c[a+0],c[a+1])},addUVLine:function(b){var d=this.uvs;this.object.geometry.uvs.push(d[b+0],d[b+1])},addFace:function(b,d,a,c,e,f,l,h,k){var g=
this.vertices.length;b=this.parseVertexIndex(b,g);d=this.parseVertexIndex(d,g);a=this.parseVertexIndex(a,g);this.addVertex(b,d,a);void 0!==c&&""!==c&&(a=this.uvs.length,b=this.parseUVIndex(c,a),d=this.parseUVIndex(e,a),a=this.parseUVIndex(f,a),this.addUV(b,d,a));void 0!==l&&""!==l&&(c=this.normals.length,b=this.parseNormalIndex(l,c),d=l===h?b:this.parseNormalIndex(h,c),a=l===k?b:this.parseNormalIndex(k,c),this.addNormal(b,d,a));0<this.colors.length&&this.addColor(b,d,a)},addPointGeometry:function(b){this.object.geometry.type=
"Points";for(var d=this.vertices.length,a=0,c=b.length;a<c;a++)this.addVertexPoint(this.parseVertexIndex(b[a],d))},addLineGeometry:function(b,d){this.object.geometry.type="Line";for(var a=this.vertices.length,c=this.uvs.length,e=0,f=b.length;e<f;e++)this.addVertexLine(this.parseVertexIndex(b[e],a));a=0;for(f=d.length;a<f;a++)this.addUVLine(this.parseUVIndex(d[a],c))}};f.startObject("",!1);return f}function p(f){this.manager=void 0!==f?f:THREE.DefaultLoadingManager;this.materials=null}var v=/^[og]\s*(.+)?/,
w=/^mtllib /,x=/^usemtl /;p.prototype={constructor:p,load:function(f,b,d,a){var c=this,e=new THREE.FileLoader(c.manager);e.setPath(this.path);e.load(f,function(a){b(c.parse(a))},d,a)},setPath:function(f){this.path=f},setMaterials:function(f){this.materials=f;return this},parse:function(f){console.time("OBJLoader");var b=new u;-1!==f.indexOf("\r\n")&&(f=f.replace(/\r\n/g,"\n"));-1!==f.indexOf("\\\n")&&(f=f.replace(/\\\n/g,""));var d=f.split("\n"),a="",c="",c=0,e=[],r="function"===typeof"".trimLeft;
f=0;for(var l=d.length;f<l;f++)if(a=d[f],a=r?a.trimLeft():a.trim(),c=a.length,0!==c&&(c=a.charAt(0),"#"!==c))if("v"===c)switch(a=a.split(/\s+/),a[0]){case "v":b.vertices.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));8===a.length&&b.colors.push(parseFloat(a[4]),parseFloat(a[5]),parseFloat(a[6]));break;case "vn":b.normals.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));break;case "vt":b.uvs.push(parseFloat(a[1]),parseFloat(a[2]))}else if("f"===c){for(var a=a.substr(1).trim(),h=a.split(/\s+/),
a=[],c=0,e=h.length;c<e;c++){var k=h[c];0<k.length&&(k=k.split("/"),a.push(k))}h=a[0];c=1;for(e=a.length-1;c<e;c++){var k=a[c],g=a[c+1];b.addFace(h[0],k[0],g[0],h[1],k[1],g[1],h[2],k[2],g[2])}}else if("l"===c){c=a.substring(1).trim().split(" ");e=[];h=[];if(-1===a.indexOf("/"))e=c;else for(a=0,k=c.length;a<k;a++)g=c[a].split("/"),""!==g[0]&&e.push(g[0]),""!==g[1]&&h.push(g[1]);b.addLineGeometry(e,h)}else if("p"===c)a=a.substr(1).trim(),a=a.split(" "),b.addPointGeometry(a);else if(null!==(e=v.exec(a)))a=
(" "+e[0].substr(1).trim()).substr(1),b.startObject(a);else if(x.test(a))b.object.startMaterial(a.substring(7).trim(),b.materialLibraries);else if(w.test(a))b.materialLibraries.push(a.substring(7).trim());else if("s"===c){if(e=a.split(" "),1<e.length?(a=e[1].trim().toLowerCase(),b.object.smooth="0"!==a&&"off"!==a):b.object.smooth=!0,a=b.object.currentMaterial())a.smooth=b.object.smooth}else if("\x00"!==a)throw Error('THREE.OBJLoader: Unexpected line: "'+a+'"');b.finalize();d=new THREE.Group;d.materialLibraries=
[].concat(b.materialLibraries);f=0;for(l=b.objects.length;f<l;f++)if(r=b.objects[f],a=r.geometry,c=r.materials,e="Line"===a.type,h="Points"===a.type,k=!1,0!==a.vertices.length){g=new THREE.BufferGeometry;g.addAttribute("position",new THREE.Float32BufferAttribute(a.vertices,3));0<a.normals.length?g.addAttribute("normal",new THREE.Float32BufferAttribute(a.normals,3)):g.computeVertexNormals();0<a.colors.length&&(k=!0,g.addAttribute("color",new THREE.Float32BufferAttribute(a.colors,3)));0<a.uvs.length&&
g.addAttribute("uv",new THREE.Float32BufferAttribute(a.uvs,2));for(var m=[],n=0,p=c.length;n<p;n++){var q=c[n],a=void 0;if(null!==this.materials)if(a=this.materials.create(q.name),e&&a&&!(a instanceof THREE.LineBasicMaterial)){var t=new THREE.LineBasicMaterial;t.copy(a);t.lights=!1;a=t}else if(h&&a&&!(a instanceof THREE.PointsMaterial)){var y=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});t.copy(a);a=y}a||(a=e?new THREE.LineBasicMaterial:h?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):
new THREE.MeshPhongMaterial,a.name=q.name);a.flatShading=q.smooth?!1:!0;a.vertexColors=k?THREE.VertexColors:THREE.NoColors;m.push(a)}if(1<m.length){n=0;for(p=c.length;n<p;n++)q=c[n],g.addGroup(q.groupStart,q.groupCount,n);a=e?new THREE.LineSegments(g,m):h?new THREE.Points(g,m):new THREE.Mesh(g,m)}else a=e?new THREE.LineSegments(g,m[0]):h?new THREE.Points(g,m[0]):new THREE.Mesh(g,m[0]);a.name=r.name;d.add(a)}console.timeEnd("OBJLoader");return d}};return p}();