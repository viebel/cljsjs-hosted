THREE.PLYLoader=function(d){this.manager=void 0!==d?d:THREE.DefaultLoadingManager;this.propertyNameMapping={}};
THREE.PLYLoader.prototype={constructor:THREE.PLYLoader,load:function(d,r,p,v){var z=this,y=new THREE.FileLoader(this.manager);y.setResponseType("arraybuffer");y.load(d,function(d){r(z.parse(d))},p,v)},setPropertyNameMapping:function(d){this.propertyNameMapping=d},parse:function(d){function r(b){function a(a,b){var c={type:a[0]};"list"===c.type?(c.name=a[3],c.countType=a[1],c.itemType=a[2]):c.name=a[1];c.name in b&&(c.name=b[c.name]);return c}var c="",h=0;b=/ply([\s\S]*)end_header\s/.exec(b);null!==
b&&(c=b[1],h=b[0].length);for(var h={comments:[],elements:[],headerLength:h},c=c.split("\n"),l,e,d=0;d<c.length;d++){var f=c[d],f=f.trim();if(""!==f)switch(e=f.split(/\s+/),b=e.shift(),f=e.join(" "),b){case "format":h.format=e[0];h.version=e[1];break;case "comment":h.comments.push(f);break;case "element":void 0!==l&&h.elements.push(l);l={};l.name=e[0];l.count=parseInt(e[1]);l.properties=[];break;case "property":l.properties.push(a(e,C.propertyNameMapping));break;default:console.log("unhandled",b,
e)}}void 0!==l&&h.elements.push(l);return h}function p(b,a){switch(a){case "char":case "uchar":case "short":case "ushort":case "int":case "uint":case "int8":case "uint8":case "int16":case "uint16":case "int32":case "uint32":return parseInt(b);case "float":case "double":case "float32":case "float64":return parseFloat(b)}}function v(b,a){var c={indices:[],vertices:[],normals:[],uvs:[],colors:[]},h,d="";null!==(h=/end_header\s([\s\S]*)$/.exec(b))&&(d=h[1]);h=d.split("\n");for(var e=d=0,u=0;u<h.length;u++){var f=
h[u],f=f.trim();if(""!==f){e>=a.elements[d].count&&(d++,e=0);for(var m=a.elements[d].properties,f=f.split(/\s+/),t={},g=0;g<m.length;g++)if("list"===m[g].type){for(var w=[],D=p(f.shift(),m[g].countType),k=0;k<D;k++)w.push(p(f.shift(),m[g].itemType));t[m[g].name]=w}else t[m[g].name]=p(f.shift(),m[g].type);y(c,a.elements[d].name,t);e++}}return z(c)}function z(b){var a=new THREE.BufferGeometry;0<b.indices.length&&a.setIndex(b.indices);a.addAttribute("position",new THREE.Float32BufferAttribute(b.vertices,
3));0<b.normals.length&&a.addAttribute("normal",new THREE.Float32BufferAttribute(b.normals,3));0<b.uvs.length&&a.addAttribute("uv",new THREE.Float32BufferAttribute(b.uvs,2));0<b.colors.length&&a.addAttribute("color",new THREE.Float32BufferAttribute(b.colors,3));a.computeBoundingSphere();return a}function y(b,a,c){"vertex"===a?(b.vertices.push(c.x,c.y,c.z),"nx"in c&&"ny"in c&&"nz"in c&&b.normals.push(c.nx,c.ny,c.nz),"s"in c&&"t"in c&&b.uvs.push(c.s,c.t),"red"in c&&"green"in c&&"blue"in c&&b.colors.push(c.red/
255,c.green/255,c.blue/255)):"face"===a&&(a=c.vertex_indices||c.vertex_index,3===a.length?b.indices.push(a[0],a[1],a[2]):4===a.length&&(b.indices.push(a[0],a[1],a[3]),b.indices.push(a[1],a[2],a[3])))}function A(b,a,c,d){switch(c){case "int8":case "char":return[b.getInt8(a),1];case "uint8":case "uchar":return[b.getUint8(a),1];case "int16":case "short":return[b.getInt16(a,d),2];case "uint16":case "ushort":return[b.getUint16(a,d),2];case "int32":case "int":return[b.getInt32(a,d),4];case "uint32":case "uint":return[b.getUint32(a,
d),4];case "float32":case "float":return[b.getFloat32(a,d),4];case "float64":case "double":return[b.getFloat64(a,d),8]}}function E(b,a){for(var c={indices:[],vertices:[],normals:[],uvs:[],colors:[]},d="binary_little_endian"===a.format,l=new DataView(b,a.headerLength),e,u=0,f=0;f<a.elements.length;f++)for(var m=0;m<a.elements[f].count;m++){e=l;for(var t=u,g=a.elements[f].properties,w=d,p={},k=void 0,n=0,q=0;q<g.length;q++)if("list"===g[q].type){for(var r=[],k=A(e,t+n,g[q].countType,w),v=k[0],n=n+k[1],
x=0;x<v;x++)k=A(e,t+n,g[q].itemType,w),r.push(k[0]),n+=k[1];p[g[q].name]=r}else k=A(e,t+n,g[q].type,w),p[g[q].name]=k[0],n+=k[1];e=[p,n];u+=e[1];y(c,a.elements[f].name,e[0])}return z(c)}var C=this;if(d instanceof ArrayBuffer){var B=THREE.LoaderUtils.decodeText(new Uint8Array(d)),x=r(B);d="ascii"===x.format?v(B,x):E(d,x)}else d=v(d,r(d));return d}};