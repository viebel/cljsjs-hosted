THREE.UTF8Loader=function(){};THREE.UTF8Loader.prototype.load=function(a,d,c){this.downloadModelJson(a,d,c)};THREE.UTF8Loader.BufferGeometryCreator=function(){};
THREE.UTF8Loader.BufferGeometryCreator.prototype.create=function(a,d){var c=d.length/3,f=new THREE.BufferGeometry,e=new Float32Array(9*c),h=new Float32Array(9*c),c=new Float32Array(6*c),b,l,k=a.length;for(b=l=0;b<k;b+=8)e[l++]=a[b],e[l++]=a[b+1],e[l++]=a[b+2];l=0;for(b=3;b<k;b+=8)c[l++]=a[b],c[l++]=a[b+1];l=0;for(b=5;b<k;b+=8)h[l++]=a[b],h[l++]=a[b+1],h[l++]=a[b+2];f.setIndex(new THREE.BufferAttribute(d,1));f.addAttribute("position",new THREE.BufferAttribute(e,3));f.addAttribute("normal",new THREE.BufferAttribute(h,
3));f.addAttribute("uv",new THREE.BufferAttribute(c,2));f.computeBoundingSphere();return f};var DEFAULT_DECODE_PARAMS={decodeOffsets:[-4095,-4095,-4095,0,0,-511,-511,-511],decodeScales:[1/8191,1/8191,1/8191,1/1023,1/1023,1/1023,1/1023,1/1023]};THREE.UTF8Loader.prototype.decompressAttribsInner_=function(a,d,c,f,e,h,b,l){for(var k=0;d<c;d++){var g=a.charCodeAt(d),k=k+(g>>1^-(g&1));f[e]=l*(k+b);e+=h}};
THREE.UTF8Loader.prototype.decompressIndices_=function(a,d,c,f,e){for(var h=0,b=0;b<c;b++){var l=a.charCodeAt(d++);f[e++]=h-l;0===l&&h++}};
THREE.UTF8Loader.prototype.decompressAABBs_=function(a,d,c,f,e){var h=6*c;c=d+h;for(var b=0,h=new Float32Array(h);d<c;d+=6){var l=a.charCodeAt(d+0)+f[0],k=a.charCodeAt(d+1)+f[1],g=a.charCodeAt(d+2)+f[2],n=a.charCodeAt(d+3)+1>>1,q=a.charCodeAt(d+4)+1>>1,p=a.charCodeAt(d+5)+1>>1;h[b++]=e[0]*(l+n);h[b++]=e[1]*(k+q);h[b++]=e[2]*(g+p);h[b++]=e[0]*n;h[b++]=e[1]*q;h[b++]=e[2]*p}return h};
THREE.UTF8Loader.prototype.decompressMesh=function(a,d,c,f,e,h){var b=c.decodeScales.length,l=c.decodeOffsets;c=c.decodeScales;for(var k=d.attribRange[1],g=d.attribRange[0],n=new Float32Array(b*k),q=0;q<b;q++){var p=g+k,B=c[q];B&&this.decompressAttribsInner_(a,g,p,n,q,b,l[q],B);g=p}k=3*d.indexRange[1];b=new Uint16Array(k);this.decompressIndices_(a,g,k,b,0);g=void 0;(k=d.bboxes)&&(g=this.decompressAABBs_(a,k,d.names.length,l,c));h(f,e,n,b,g,d)};
THREE.UTF8Loader.prototype.copyAttrib=function(a,d,c,f){for(var e=0;e<a;e++)c[e]=d[a*f+e]};THREE.UTF8Loader.prototype.decodeAttrib2=function(a,d,c,f,e,h,b,l,k,g){for(var n=0;5>n;n++){var q=a.charCodeAt(e+h*n+g);k[n]+=q>>1^-(q&1);l[d*g+n]=k[n];b[d*g+n]=f[n]*(k[n]+c[n])}};
THREE.UTF8Loader.prototype.accumulateNormal=function(a,d,c,f,e){var h=f[8*a],b=f[8*a+1],l=f[8*a+2],k=f[8*d],g=f[8*d+1],n=f[8*d+2],q=f[8*c],p=f[8*c+1];f=f[8*c+2];k-=h;g-=b;n-=l;q-=h;p-=b;f-=l;h=g*f-n*p;b=n*q-k*f;l=k*p-g*q;e[3*a]+=h;e[3*a+1]+=b;e[3*a+2]+=l;e[3*d]+=h;e[3*d+1]+=b;e[3*d+2]+=l;e[3*c]+=h;e[3*c+1]+=b;e[3*c+2]+=l};
THREE.UTF8Loader.prototype.decompressMesh2=function(a,d,c,f,e,h){var b=c.decodeScales.length,l=c.decodeOffsets,k=c.decodeScales;c=d.attribRange[0];for(var g=d.attribRange[1],n=d.codeRange[0],q=3*d.codeRange[2],p=new Uint16Array(q),B=new Int32Array(3*g),A=new Uint16Array(b),t=new Uint16Array(b*g),C=new Float32Array(b*g),v=0,w=0,r=0;r<q;r+=3){var m=a.charCodeAt(n++),u=Math.min(r,96);if(m<u){var x=m%3,m=r-(m-x),y,z,D;switch(x){case 0:y=p[m+2];z=p[m+1];D=p[m+0];break;case 1:y=p[m+0];z=p[m+2];D=p[m+1];
break;case 2:y=p[m+1],z=p[m+0],D=p[m+2]}p[w++]=y;p[w++]=z;m=a.charCodeAt(n++);x=v-m;p[w++]=x;if(0===m){for(m=0;5>m;m++)u=a.charCodeAt(c+g*m+v),u=(u>>1^-(u&1))+t[b*y+m]+t[b*z+m]-t[b*D+m],A[m]=u,t[b*v+m]=u,C[b*v+m]=k[m]*(u+l[m]);v++}else this.copyAttrib(b,t,A,x);this.accumulateNormal(y,z,x,t,B)}else{x=v-(m-u);p[w++]=x;m===u?this.decodeAttrib2(a,b,l,k,c,g,C,t,A,v++):this.copyAttrib(b,t,A,x);m=a.charCodeAt(n++);u=v-m;p[w++]=u;0===m?this.decodeAttrib2(a,b,l,k,c,g,C,t,A,v++):this.copyAttrib(b,t,A,u);var m=
a.charCodeAt(n++),E=v-m;p[w++]=E;if(0===m){for(m=0;5>m;m++)A[m]=(t[b*x+m]+t[b*u+m])/2;this.decodeAttrib2(a,b,l,k,c,g,C,t,A,v++)}else this.copyAttrib(b,t,A,E);this.accumulateNormal(x,u,E,t,B)}}for(r=0;r<g;r++)l=B[3*r],y=B[3*r+1],z=B[3*r+2],D=511/Math.sqrt(l*l+y*y+z*z),k=a.charCodeAt(c+5*g+r),n=a.charCodeAt(c+6*g+r),q=a.charCodeAt(c+7*g+r),C[b*r+5]=D*l+(k>>1^-(k&1)),C[b*r+6]=D*y+(n>>1^-(n&1)),C[b*r+7]=D*z+(q>>1^-(q&1));h(f,e,C,p,void 0,d)};
THREE.UTF8Loader.prototype.downloadMesh=function(a,d,c,f,e){var h=this,b=0;getHttpRequest(a,function(a){for(;b<c.length;){var k=c[b],g=k.indexRange;if(g){g=g[0]+3*g[1];if(a.length<g)break;h.decompressMesh(a,k,f,d,b,e)}else{g=k.codeRange;g=g[0]+g[1];if(a.length<g)break;h.decompressMesh2(a,k,f,d,b,e)}++b}})};THREE.UTF8Loader.prototype.downloadMeshes=function(a,d,c,f){for(var e in d)this.downloadMesh(a+e,e,d[e],c,f)};
THREE.UTF8Loader.prototype.createMeshCallback=function(a,d,c){var f=0,e=0,h={},b={},l={},k=d.urls,g;for(g in k)h[g]=k[g].length,b[g]=0,e++,l[g]=new THREE.Object3D;var n=new THREE.Object3D,q=new THREE.MTLLoader.MaterialCreator(a,d.options);q.setMaterials(d.materials);q.preload();var p=new THREE.UTF8Loader.BufferGeometryCreator;return function(a,d,g,k,v,w){d=p.create(g,k);w=q.create(w.material);w=new THREE.Mesh(d,w);l[a].add(w);b[a]++;b[a]===h[a]&&(f++,n.add(l[a]),f===e&&c(n))}};
THREE.UTF8Loader.prototype.downloadModel=function(a,d,c,f){d=this.createMeshCallback(d,c,f);this.downloadMeshes(a,c.urls,c.decodeParams,d)};
THREE.UTF8Loader.prototype.downloadModelJson=function(a,d,c){getJsonRequest(a,function(f){f.decodeParams||(f.decodeParams=c&&c.decodeParams?c.decodeParams:DEFAULT_DECODE_PARAMS);f.options=c;var e=a.substr(0,a.lastIndexOf("/")+1),h=e;c&&c.geometryBase&&(e=c.geometryBase,"/"!==e.charAt(e.length-1)&&(e+="/"));c&&c.materialBase&&(h=c.materialBase,"/"!==h.charAt(h.length-1)&&(h+="/"));this.downloadModel(e,h,f,d)}.bind(this))};function getHttpRequest(a,d,c){(new THREE.FileLoader).load(a,d,c)}
function getJsonRequest(a,d){getHttpRequest(a,function(a){d(JSON.parse(a))},function(){})}function addListeners(a,d){for(var c in d)a.addEventListener(c,d[c])};