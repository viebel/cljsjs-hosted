THREE.BufferGeometryUtils={computeTangents:function(b){function e(a,b,c){t.fromArray(l,3*a);y.fromArray(l,3*b);z.fromArray(l,3*c);v.fromArray(h,2*a);C.fromArray(h,2*b);D.fromArray(h,2*c);var d=y.x-t.x,e=z.x-t.x,f=y.y-t.y,g=z.y-t.y,k=y.z-t.z,m=z.z-t.z,n=C.x-v.x,p=D.x-v.x,q=C.y-v.y,r=D.y-v.y,u=1/(n*r-p*q);A.set((r*d-q*e)*u,(r*f-q*g)*u,(r*k-q*m)*u);B.set((n*e-p*d)*u,(n*g-p*f)*u,(n*m-p*k)*u);w[a].add(A);w[b].add(A);w[c].add(A);x[a].add(B);x[b].add(B);x[c].add(B)}function m(a){q.fromArray(d,3*a);F.copy(q);
r=w[a];p.copy(r);p.sub(q.multiplyScalar(q.dot(r))).normalize();G.crossVectors(F,r);H=G.dot(x[a]);I=0>H?-1:1;c[4*a]=p.x;c[4*a+1]=p.y;c[4*a+2]=p.z;c[4*a+3]=I}var g=b.index,a=b.attributes;if(null===g||void 0===a.position||void 0===a.normal||void 0===a.uv)console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");else{var g=g.array,l=a.position.array,d=a.normal.array,h=a.uv.array,f=l.length/3;void 0===a.tangent&&b.addAttribute("tangent",
new THREE.BufferAttribute(new Float32Array(4*f),4));for(var c=a.tangent.array,w=[],x=[],a=0;a<f;a++)w[a]=new THREE.Vector3,x[a]=new THREE.Vector3;var t=new THREE.Vector3,y=new THREE.Vector3,z=new THREE.Vector3,v=new THREE.Vector2,C=new THREE.Vector2,D=new THREE.Vector2,A=new THREE.Vector3,B=new THREE.Vector3;b=b.groups;0===b.length&&(b=[{start:0,count:g.length}]);a=0;for(f=b.length;a<f;++a)for(var k=b[a],n=k.start,E=k.count,k=n,n=n+E;k<n;k+=3)e(g[k+0],g[k+1],g[k+2]);for(var p=new THREE.Vector3,G=
new THREE.Vector3,q=new THREE.Vector3,F=new THREE.Vector3,I,r,H,a=0,f=b.length;a<f;++a)for(k=b[a],n=k.start,E=k.count,k=n,n+=E;k<n;k+=3)m(g[k+0]),m(g[k+1]),m(g[k+2])}},mergeBufferGeometries:function(b){for(var e=null!==b[0].index,m=new Set(Object.keys(b[0].attributes)),g=new Set(Object.keys(b[0].morphAttributes)),a={},l={},d=new THREE.BufferGeometry,h=0;h<b.length;++h){var f=b[h];if(e!==(null!==f.index))return null;for(var c in f.attributes){if(!m.has(c))return null;void 0===a[c]&&(a[c]=[]);a[c].push(f.attributes[c])}for(c in f.morphAttributes){if(!g.has(c))return null;
void 0===l[c]&&(l[c]=[]);l[c].push(f.morphAttributes[c])}void 0!==f.userData&&(d.userData=d.userData||{},d.userData.mergedUserData=d.userData.mergedUserData||[],d.userData.mergedUserData.push(f.userData))}if(e){m=0;g=[];for(h=0;h<b.length;++h){f=b[h].index;if(0<m)for(f=f.clone(),e=0;e<f.count;++e)f.setX(e,f.getX(e)+m);g.push(f);m+=b[h].attributes.position.count}h=this.mergeBufferAttributes(g);if(!h)return null;d.index=h}for(c in a){h=this.mergeBufferAttributes(a[c]);if(!h)return null;d.addAttribute(c,
h)}for(c in l){a=l[c][0].length;if(0===a)break;d.morphAttributes=d.morphAttributes||{};d.morphAttributes[c]=[];for(h=0;h<a;++h){b=[];for(e=0;e<l[c].length;++e)b.push(l[c][e][h]);b=this.mergeBufferAttributes(b);if(!b)return null;d.morphAttributes[c].push(b)}}return d},mergeBufferAttributes:function(b){for(var e,m,g,a=0,l=0;l<b.length;++l){var d=b[l];if(d.isInterleavedBufferAttribute)return null;void 0===e&&(e=d.array.constructor);if(e!==d.array.constructor)return null;void 0===m&&(m=d.itemSize);if(m!==
d.itemSize)return null;void 0===g&&(g=d.normalized);if(g!==d.normalized)return null;a+=d.array.length}e=new e(a);for(l=a=0;l<b.length;++l)e.set(b[l].array,a),a+=b[l].array.length;return new THREE.BufferAttribute(e,m,g)}};