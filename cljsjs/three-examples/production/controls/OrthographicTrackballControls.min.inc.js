THREE.OrthographicTrackballControls=function(L,C){function v(a){!1!==b.enabled&&(window.removeEventListener("keydown",v),x=e,e===c.NONE)&&(a.keyCode!==b.keys[c.ROTATE]||b.noRotate?a.keyCode!==b.keys[c.ZOOM]||b.noZoom?a.keyCode!==b.keys[c.PAN]||b.noPan||(e=c.PAN):e=c.ZOOM:e=c.ROTATE)}function D(a){!1!==b.enabled&&(e=x,window.addEventListener("keydown",v,!1))}function E(a){!1!==b.enabled&&(a.preventDefault(),a.stopPropagation(),e===c.NONE&&(e=a.button),e!==c.ROTATE||b.noRotate?e!==c.ZOOM||b.noZoom?
e!==c.PAN||b.noPan||(k.copy(p(a.pageX,a.pageY)),l.copy(k)):(h.copy(p(a.pageX,a.pageY)),r.copy(h)):(f.copy(q(a.pageX,a.pageY)),g.copy(f)),document.addEventListener("mousemove",y,!1),document.addEventListener("mouseup",z,!1),b.dispatchEvent(A))}function y(a){!1!==b.enabled&&(a.preventDefault(),a.stopPropagation(),e!==c.ROTATE||b.noRotate?e!==c.ZOOM||b.noZoom?e!==c.PAN||b.noPan||l.copy(p(a.pageX,a.pageY)):r.copy(p(a.pageX,a.pageY)):g.copy(q(a.pageX,a.pageY)))}function z(a){!1!==b.enabled&&(a.preventDefault(),
a.stopPropagation(),e=c.NONE,document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",z),b.dispatchEvent(B))}function F(a){!1!==b.enabled&&(a.preventDefault(),a.stopPropagation(),h.y+=.01*a.deltaY,b.dispatchEvent(A),b.dispatchEvent(B))}function G(a){if(!1!==b.enabled){switch(a.touches.length){case 1:e=c.TOUCH_ROTATE;f.copy(q(a.touches[0].pageX,a.touches[0].pageY));g.copy(f);break;case 2:e=c.TOUCH_ZOOM_PAN;var t=a.touches[0].pageX-a.touches[1].pageX,d=a.touches[0].pageY-a.touches[1].pageY;
u=w=Math.sqrt(t*t+d*d);k.copy(p((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2));l.copy(k);break;default:e=c.NONE}b.dispatchEvent(A)}}function H(a){if(!1!==b.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:g.copy(q(a.touches[0].pageX,a.touches[0].pageY));break;case 2:var t=a.touches[0].pageX-a.touches[1].pageX,d=a.touches[0].pageY-a.touches[1].pageY;u=Math.sqrt(t*t+d*d);l.copy(p((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+
a.touches[1].pageY)/2));break;default:e=c.NONE}}function I(a){if(!1!==b.enabled){switch(a.touches.length){case 1:g.copy(q(a.touches[0].pageX,a.touches[0].pageY));f.copy(g);break;case 2:w=u=0,l.copy(p((a.touches[0].pageX+a.touches[1].pageX)/2,(a.touches[0].pageY+a.touches[1].pageY)/2)),k.copy(l)}e=c.NONE;b.dispatchEvent(B)}}function J(a){a.preventDefault()}var b=this,c={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=L;this.domElement=void 0!==C?C:document;this.enabled=!0;
this.screen={left:0,top:0,width:0,height:0};this.radius=0;this.rotateSpeed=1;this.zoomSpeed=1.2;this.staticMoving=this.noRoll=this.noPan=this.noZoom=this.noRotate=!1;this.dynamicDampingFactor=.2;this.keys=[65,83,68];this.target=new THREE.Vector3;var m=!0,e=c.NONE,x=c.NONE,n=new THREE.Vector3,f=new THREE.Vector3,g=new THREE.Vector3,h=new THREE.Vector2,r=new THREE.Vector2,w=0,u=0,k=new THREE.Vector2,l=new THREE.Vector2;this.target0=this.target.clone();this.position0=this.object.position.clone();this.up0=
this.object.up.clone();this.left0=this.object.left;this.right0=this.object.right;this.top0=this.object.top;this.bottom0=this.object.bottom;var K={type:"change"},A={type:"start"},B={type:"end"};this.handleResize=function(){if(this.domElement===document)this.screen.left=0,this.screen.top=0,this.screen.width=window.innerWidth,this.screen.height=window.innerHeight;else{var a=this.domElement.getBoundingClientRect(),b=this.domElement.ownerDocument.documentElement;this.screen.left=a.left+window.pageXOffset-
b.clientLeft;this.screen.top=a.top+window.pageYOffset-b.clientTop;this.screen.width=a.width;this.screen.height=a.height}this.radius=.5*Math.min(this.screen.width,this.screen.height);this.left0=this.object.left;this.right0=this.object.right;this.top0=this.object.top;this.bottom0=this.object.bottom};this.handleEvent=function(a){if("function"==typeof this[a.type])this[a.type](a)};var p=function(){var a=new THREE.Vector2;return function(c,d){a.set((c-b.screen.left)/b.screen.width,(d-b.screen.top)/b.screen.height);
return a}}(),q=function(){var a=new THREE.Vector3,c=new THREE.Vector3,d=new THREE.Vector3;return function(e,g){d.set((e-.5*b.screen.width-b.screen.left)/b.radius,(.5*b.screen.height+b.screen.top-g)/b.radius,0);var f=d.length();b.noRoll?d.z=f<Math.SQRT1_2?Math.sqrt(1-f*f):.5/f:1<f?d.normalize():d.z=Math.sqrt(1-f*f);n.copy(b.object.position).sub(b.target);a.copy(b.object.up).setLength(d.y);a.add(c.copy(b.object.up).cross(n).setLength(d.x));a.add(n.setLength(d.z));return a}}();this.rotateCamera=function(){var a=
new THREE.Vector3,c=new THREE.Quaternion;return function(){var d=Math.acos(f.dot(g)/f.length()/g.length());d&&(a.crossVectors(f,g).normalize(),d*=b.rotateSpeed,c.setFromAxisAngle(a,-d),n.applyQuaternion(c),b.object.up.applyQuaternion(c),g.applyQuaternion(c),b.staticMoving?f.copy(g):(c.setFromAxisAngle(a,d*(b.dynamicDampingFactor-1)),f.applyQuaternion(c)),m=!0)}}();this.zoomCamera=function(){if(e===c.TOUCH_ZOOM_PAN){var a=u/w;w=u;b.object.zoom*=a;m=!0}else a=1+(r.y-h.y)*b.zoomSpeed,1E-6<Math.abs(a-
1)&&0<a&&(b.object.zoom/=a,b.staticMoving?h.copy(r):h.y+=(r.y-h.y)*this.dynamicDampingFactor,m=!0)};this.panCamera=function(){var a=new THREE.Vector2,c=new THREE.Vector3,d=new THREE.Vector3;return function(){a.copy(l).sub(k);if(a.lengthSq()){var e=(b.object.top-b.object.bottom)/b.object.zoom;a.x*=(b.object.right-b.object.left)/b.object.zoom;a.y*=e;d.copy(n).cross(b.object.up).setLength(a.x);d.add(c.copy(b.object.up).setLength(a.y));b.object.position.add(d);b.target.add(d);b.staticMoving?k.copy(l):
k.add(a.subVectors(l,k).multiplyScalar(b.dynamicDampingFactor));m=!0}}}();this.update=function(){n.subVectors(b.object.position,b.target);b.noRotate||b.rotateCamera();b.noZoom||(b.zoomCamera(),m&&b.object.updateProjectionMatrix());b.noPan||b.panCamera();b.object.position.addVectors(b.target,n);b.object.lookAt(b.target);m&&(b.dispatchEvent(K),m=!1)};this.reset=function(){x=e=c.NONE;b.target.copy(b.target0);b.object.position.copy(b.position0);b.object.up.copy(b.up0);n.subVectors(b.object.position,b.target);
b.object.left=b.left0;b.object.right=b.right0;b.object.top=b.top0;b.object.bottom=b.bottom0;b.object.lookAt(b.target);b.dispatchEvent(K);m=!1};this.dispose=function(){this.domElement.removeEventListener("contextmenu",J,!1);this.domElement.removeEventListener("mousedown",E,!1);this.domElement.removeEventListener("wheel",F,!1);this.domElement.removeEventListener("touchstart",G,!1);this.domElement.removeEventListener("touchend",I,!1);this.domElement.removeEventListener("touchmove",H,!1);document.removeEventListener("mousemove",
y,!1);document.removeEventListener("mouseup",z,!1);window.removeEventListener("keydown",v,!1);window.removeEventListener("keyup",D,!1)};this.domElement.addEventListener("contextmenu",J,!1);this.domElement.addEventListener("mousedown",E,!1);this.domElement.addEventListener("wheel",F,!1);this.domElement.addEventListener("touchstart",G,!1);this.domElement.addEventListener("touchend",I,!1);this.domElement.addEventListener("touchmove",H,!1);window.addEventListener("keydown",v,!1);window.addEventListener("keyup",
D,!1);this.handleResize();this.update()};THREE.OrthographicTrackballControls.prototype=Object.create(THREE.EventDispatcher.prototype);THREE.OrthographicTrackballControls.prototype.constructor=THREE.OrthographicTrackballControls;