THREE.DeviceOrientationControls=function(e){var a=this;this.object=e;this.object.rotation.reorder("YXZ");this.enabled=!0;this.deviceOrientation={};this.alphaOffset=this.screenOrientation=0;var d=function(b){a.deviceOrientation=b},c=function(){a.screenOrientation=window.orientation||0},g=function(){var b=new THREE.Vector3(0,0,1),a=new THREE.Euler,c=new THREE.Quaternion,h=new THREE.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5));return function(f,d,e,g,k){a.set(e,d,-g,"YXZ");f.setFromEuler(a);f.multiply(h);
f.multiply(c.setFromAxisAngle(b,-k))}}();this.connect=function(){c();window.addEventListener("orientationchange",c,!1);window.addEventListener("deviceorientation",d,!1);a.enabled=!0};this.disconnect=function(){window.removeEventListener("orientationchange",c,!1);window.removeEventListener("deviceorientation",d,!1);a.enabled=!1};this.update=function(){if(!1!==a.enabled){var b=a.deviceOrientation;if(b){var c=b.alpha?THREE.Math.degToRad(b.alpha)+a.alphaOffset:0,d=b.beta?THREE.Math.degToRad(b.beta):0,
b=b.gamma?THREE.Math.degToRad(b.gamma):0,e=a.screenOrientation?THREE.Math.degToRad(a.screenOrientation):0;g(a.object.quaternion,c,d,b,e)}}};this.dispose=function(){a.disconnect()};this.connect()};