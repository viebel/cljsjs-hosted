var SimplexNoise=function(b){void 0==b&&(b=Math);this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]];this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],
[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]];this.p=[];for(var f=0;256>f;f++)this.p[f]=Math.floor(256*b.random());this.perm=[];for(f=0;512>f;f++)this.perm[f]=this.p[f&255];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,
3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};SimplexNoise.prototype.dot=function(b,f,h){return b[0]*f+b[1]*h};SimplexNoise.prototype.dot3=function(b,f,h,c){return b[0]*f+b[1]*h+b[2]*c};
SimplexNoise.prototype.dot4=function(b,f,h,c,d){return b[0]*f+b[1]*h+b[2]*c+b[3]*d};
SimplexNoise.prototype.noise=function(b,f){var h,c,d;d=.5*(b+f)*(Math.sqrt(3)-1);var l=Math.floor(b+d),a=Math.floor(f+d),e=(3-Math.sqrt(3))/6;d=(l+a)*e;h=b-(l-d);var g=f-(a-d),m,k;h>g?(m=1,k=0):(m=0,k=1);c=h-m+e;var n=g-k+e;d=h-1+2*e;var e=g-1+2*e,r=l&255,a=a&255,l=this.perm[r+this.perm[a]]%12;m=this.perm[r+m+this.perm[a+k]]%12;k=this.perm[r+1+this.perm[a+1]]%12;a=.5-h*h-g*g;0>a?h=0:(a*=a,h=a*a*this.dot(this.grad3[l],h,g));g=.5-c*c-n*n;0>g?c=0:(g*=g,c=g*g*this.dot(this.grad3[m],c,n));n=.5-d*d-e*e;
0>n?d=0:(n*=n,d=n*n*this.dot(this.grad3[k],d,e));return 70*(h+c+d)};
SimplexNoise.prototype.noise3d=function(b,f,h){var c,d,l,a=1/3*(b+f+h),e=Math.floor(b+a),g=Math.floor(f+a),m=Math.floor(h+a),a=1/6;l=(e+g+m)*a;c=b-(e-l);d=f-(g-l);var k=h-(m-l),n,r,t,p,q,v;c>=d?d>=k?(n=1,t=r=0,q=p=1,v=0):(c>=k?(n=1,t=r=0):(r=n=0,t=1),p=1,q=0,v=1):d<k?(r=n=0,t=1,p=0,v=q=1):c<k?(n=0,r=1,p=t=0,v=q=1):(n=0,r=1,t=0,q=p=1,v=0);var u=c-n+a,A=d-r+a,B=k-t+a;l=c-p+2*a;b=d-q+2*a;var x=k-v+2*a;h=c-1+3*a;f=d-1+3*a;var a=k-1+3*a,e=e&255,y=g&255,z=m&255,g=this.perm[e+this.perm[y+this.perm[z]]]%
12,m=this.perm[e+n+this.perm[y+r+this.perm[z+t]]]%12;p=this.perm[e+p+this.perm[y+q+this.perm[z+v]]]%12;e=this.perm[e+1+this.perm[y+1+this.perm[z+1]]]%12;q=.6-c*c-d*d-k*k;0>q?c=0:(q*=q,c=q*q*this.dot3(this.grad3[g],c,d,k));d=.6-u*u-A*A-B*B;0>d?d=0:(d*=d,d=d*d*this.dot3(this.grad3[m],u,A,B));u=.6-l*l-b*b-x*x;0>u?l=0:(u*=u,l=u*u*this.dot3(this.grad3[p],l,b,x));b=.6-h*h-f*f-a*a;0>b?h=0:(b*=b,h=b*b*this.dot3(this.grad3[e],h,f,a));return 32*(c+d+l+h)};
SimplexNoise.prototype.noise4d=function(b,f,h,c){var d=this.grad4,l=this.simplex,a=this.perm,e=(5-Math.sqrt(5))/20,g,m,k;k=(Math.sqrt(5)-1)/4*(b+f+h+c);var n=Math.floor(b+k),r=Math.floor(f+k),t=Math.floor(h+k),p=Math.floor(c+k);k=(n+r+t+p)*e;b-=n-k;g=f-(r-k);m=h-(t-k);var q=c-(p-k);c=(b>g?32:0)+(b>m?16:0)+(g>m?8:0)+(b>q?4:0)+(g>q?2:0)+(m>q?1:0);var v,u,A,B,x,y,z,E,C,F,G,H;v=3<=l[c][0]?1:0;u=3<=l[c][1]?1:0;A=3<=l[c][2]?1:0;B=3<=l[c][3]?1:0;x=2<=l[c][0]?1:0;y=2<=l[c][1]?1:0;z=2<=l[c][2]?1:0;E=2<=l[c][3]?
1:0;C=1<=l[c][0]?1:0;F=1<=l[c][1]?1:0;G=1<=l[c][2]?1:0;H=1<=l[c][3]?1:0;var I=b-v+e,J=g-u+e,K=m-A+e,L=q-B+e,w=b-x+2*e,M=g-y+2*e,N=m-z+2*e,O=q-E+2*e;k=b-C+3*e;f=g-F+3*e;var P=m-G+3*e,Q=q-H+3*e,l=b-1+4*e;c=g-1+4*e;h=m-1+4*e;var e=q-1+4*e,n=n&255,r=r&255,D=t&255,p=p&255,t=a[n+a[r+a[D+a[p]]]]%32;v=a[n+v+a[r+u+a[D+A+a[p+B]]]]%32;x=a[n+x+a[r+y+a[D+z+a[p+E]]]]%32;C=a[n+C+a[r+F+a[D+G+a[p+H]]]]%32;a=a[n+1+a[r+1+a[D+1+a[p+1]]]]%32;p=.6-b*b-g*g-m*m-q*q;0>p?b=0:(p*=p,b=p*p*this.dot4(d[t],b,g,m,q));g=.6-I*I-J*
J-K*K-L*L;0>g?g=0:(g*=g,g=g*g*this.dot4(d[v],I,J,K,L));m=.6-w*w-M*M-N*N-O*O;0>m?m=0:(m*=m,m=m*m*this.dot4(d[x],w,M,N,O));w=.6-k*k-f*f-P*P-Q*Q;0>w?k=0:(w*=w,k=w*w*this.dot4(d[C],k,f,P,Q));f=.6-l*l-c*c-h*h-e*e;0>f?d=0:(f*=f,d=f*f*this.dot4(d[a],l,c,h,e));return 27*(b+g+m+k+d)};