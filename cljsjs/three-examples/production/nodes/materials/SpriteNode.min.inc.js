THREE.SpriteNode=function(){THREE.GLNode.call(this);this.color=new THREE.ColorNode(15658734);this.spherical=!0};THREE.SpriteNode.prototype=Object.create(THREE.GLNode.prototype);THREE.SpriteNode.prototype.constructor=THREE.SpriteNode;THREE.SpriteNode.prototype.nodeType="Sprite";
THREE.SpriteNode.prototype.build=function(a){var b=a.material;b.define("SPRITE");b.requires.lights=!1;b.requires.transparent=void 0!=this.alpha;if(a.isShader("vertex")){var c=this.transform?this.transform.parseAndBuildCode(a,"v3",{cache:"transform"}):void 0;b.mergeUniform(THREE.UniformsUtils.merge([THREE.UniformsLib.fog]));b.addVertexPars("#include \x3cfog_pars_vertex\x3e");a=["#include \x3cbegin_vertex\x3e"];c&&a.push(c.code,"transformed \x3d "+c.result+";");a.push("#include \x3cproject_vertex\x3e",
"#include \x3cfog_vertex\x3e","mat4 modelViewMtx \x3d modelViewMatrix;","mat4 modelMtx \x3d modelMatrix;","modelMtx[3][0] \x3d 0.0;","modelMtx[3][1] \x3d 0.0;","modelMtx[3][2] \x3d 0.0;");this.spherical||a.push("modelMtx[1][1] \x3d 1.0;");a.push("modelViewMtx[0][0] \x3d 1.0;","modelViewMtx[0][1] \x3d 0.0;","modelViewMtx[0][2] \x3d 0.0;");this.spherical&&a.push("modelViewMtx[1][0] \x3d 0.0;","modelViewMtx[1][1] \x3d 1.0;","modelViewMtx[1][2] \x3d 0.0;");a.push("modelViewMtx[2][0] \x3d 0.0;","modelViewMtx[2][1] \x3d 0.0;",
"modelViewMtx[2][2] \x3d 1.0;","gl_Position \x3d projectionMatrix * modelViewMtx * modelMtx * vec4( transformed, 1.0 );")}else b.addFragmentPars("#include \x3cfog_pars_fragment\x3e"),this.color.parse(a,{slot:"color"}),this.alpha&&this.alpha.parse(a),b=this.color.buildCode(a,"c",{slot:"color"}),c=this.alpha?this.alpha.buildCode(a,"fv1"):void 0,a=[b.code],c?a.push(c.code,"gl_FragColor \x3d vec4( "+b.result+", "+c.result+" );"):a.push("gl_FragColor \x3d vec4( "+b.result+", 1.0 );"),a.push("#include \x3cfog_fragment\x3e");
return a.join("\n")};THREE.SpriteNode.prototype.toJSON=function(a){var b=this.getJSONNode(a);b||(b=this.createJSONNode(a),this.transform&&(b.transform=this.transform.toJSON(a).uuid),b.color=this.color.toJSON(a).uuid,!1===this.spherical&&(b.spherical=!1),this.alpha&&(b.alpha=this.alpha.toJSON(a).uuid));return b};