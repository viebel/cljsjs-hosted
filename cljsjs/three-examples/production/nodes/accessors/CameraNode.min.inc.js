THREE.CameraNode=function(a,b){THREE.TempNode.call(this,"v3");this.setScope(a||THREE.CameraNode.POSITION);this.setCamera(b)};THREE.CameraNode.fDepthColor=new THREE.FunctionNode("float depthColor( float mNear, float mFar ) {\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tfloat depth \x3d gl_FragDepthEXT / gl_FragCoord.w;\n\t#else\n\t\tfloat depth \x3d gl_FragCoord.z / gl_FragCoord.w;\n\t#endif\n\treturn 1.0 - smoothstep( mNear, mFar, depth );\n}");THREE.CameraNode.POSITION="position";THREE.CameraNode.DEPTH="depth";
THREE.CameraNode.TO_VERTEX="toVertex";THREE.CameraNode.prototype=Object.create(THREE.TempNode.prototype);THREE.CameraNode.prototype.constructor=THREE.CameraNode;THREE.CameraNode.prototype.nodeType="Camera";THREE.CameraNode.prototype.setCamera=function(a){this.camera=a;this.updateFrame=void 0!==a?this.onUpdateFrame:void 0};
THREE.CameraNode.prototype.setScope=function(a){switch(this.scope){case THREE.CameraNode.DEPTH:delete this.near,delete this.far}this.scope=a;switch(a){case THREE.CameraNode.DEPTH:a=this.camera,this.near=new THREE.FloatNode(a?a.near:1),this.far=new THREE.FloatNode(a?a.far:1200)}};THREE.CameraNode.prototype.getType=function(a){switch(this.scope){case THREE.CameraNode.DEPTH:return"fv1"}return this.type};THREE.CameraNode.prototype.isUnique=function(a){switch(this.scope){case THREE.CameraNode.DEPTH:case THREE.CameraNode.TO_VERTEX:return!0}return!1};
THREE.CameraNode.prototype.isShared=function(a){switch(this.scope){case THREE.CameraNode.POSITION:return!1}return!0};
THREE.CameraNode.prototype.generate=function(a,b){var c;switch(this.scope){case THREE.CameraNode.POSITION:c="cameraPosition";break;case THREE.CameraNode.DEPTH:c=THREE.CameraNode.fDepthColor;a.include(c);c=c.name+"("+this.near.build(a,"fv1")+","+this.far.build(a,"fv1")+")";break;case THREE.CameraNode.TO_VERTEX:c="normalize( "+(new THREE.PositionNode(THREE.PositionNode.WORLD)).build(a,"v3")+" - cameraPosition )"}return a.format(c,this.getType(a),b)};
THREE.CameraNode.prototype.onUpdateFrame=function(a){switch(this.scope){case THREE.CameraNode.DEPTH:a=this.camera,this.near.number=a.near,this.far.number=a.far}};THREE.CameraNode.prototype.toJSON=function(a){var b=this.getJSONNode(a);if(!b)switch(b=this.createJSONNode(a),b.scope=this.scope,this.camera&&(b.camera=this.camera.uuid),this.scope){case THREE.CameraNode.DEPTH:b.near=this.near.number,b.far=this.far.number}return b};