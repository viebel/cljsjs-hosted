THREE.TextureNode=function(a,b,c,d){THREE.InputNode.call(this,"v4",{shared:!0});this.value=a;this.coord=b||new THREE.UVNode;this.bias=c;this.project=void 0!==d?d:!1};THREE.TextureNode.prototype=Object.create(THREE.InputNode.prototype);THREE.TextureNode.prototype.constructor=THREE.TextureNode;THREE.TextureNode.prototype.nodeType="Texture";THREE.TextureNode.prototype.getTexture=function(a,b){return THREE.InputNode.prototype.generate.call(this,a,b,this.value.uuid,"t")};
THREE.TextureNode.prototype.generate=function(a,b){if("sampler2D"===b)return this.getTexture(a,b);var c=this.getTexture(a,b),d=this.coord.build(a,this.project?"v4":"v2"),e=this.bias?this.bias.build(a,"fv1"):void 0;void 0==e&&a.requires.bias&&(e=a.requires.bias.build(a,"fv1"));var f;f=this.project?"texture2DProj":e?"tex2DBias":"tex2D";c=e?f+"("+c+","+d+","+e+")":f+"("+c+","+d+")";a.isSlot("color")?c="mapTexelToLinear("+c+")":a.isSlot("emissive")?c="emissiveMapTexelToLinear("+c+")":a.isSlot("environment")&&
(c="envMapTexelToLinear("+c+")");return a.format(c,this.type,b)};THREE.TextureNode.prototype.toJSON=function(a){var b=this.getJSONNode(a);b||(b=this.createJSONNode(a),this.value&&(b.value=this.value.uuid),b.coord=this.coord.toJSON(a).uuid,b.project=this.project,this.bias&&(b.bias=this.bias.toJSON(a).uuid));return b};