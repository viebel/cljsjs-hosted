THREE.OBJExporter=function(){};
THREE.OBJExporter.prototype={constructor:THREE.OBJExporter,parse:function(A){var b="",l=0,u=0,v=0,g=new THREE.Vector3,p=new THREE.Vector3,w=new THREE.Vector2,a,c,y,d,k,x=[];A.traverse(function(f){if(f instanceof THREE.Mesh){var r=0,t=0,e=0,h=f.geometry,z=new THREE.Matrix3;h instanceof THREE.Geometry&&(h=(new THREE.BufferGeometry).setFromObject(f));if(h instanceof THREE.BufferGeometry){var q=h.getAttribute("position"),m=h.getAttribute("normal"),n=h.getAttribute("uv"),h=h.getIndex();b+="o "+f.name+
"\n";f.material&&f.material.name&&(b+="usemtl "+f.material.name+"\n");if(void 0!==q)for(a=0,d=q.count;a<d;a++,r++)g.x=q.getX(a),g.y=q.getY(a),g.z=q.getZ(a),g.applyMatrix4(f.matrixWorld),b+="v "+g.x+" "+g.y+" "+g.z+"\n";if(void 0!==n)for(a=0,d=n.count;a<d;a++,e++)w.x=n.getX(a),w.y=n.getY(a),b+="vt "+w.x+" "+w.y+"\n";if(void 0!==m)for(z.getNormalMatrix(f.matrixWorld),a=0,d=m.count;a<d;a++,t++)p.x=m.getX(a),p.y=m.getY(a),p.z=m.getZ(a),p.applyMatrix3(z),b+="vn "+p.x+" "+p.y+" "+p.z+"\n";if(null!==h)for(a=
0,d=h.count;a<d;a+=3){for(k=0;3>k;k++)c=h.getX(a+k)+1,x[k]=l+c+(m||n?"/"+(n?u+c:"")+(m?"/"+(v+c):""):"");b+="f "+x.join(" ")+"\n"}else for(a=0,d=q.count;a<d;a+=3){for(k=0;3>k;k++)c=a+k+1,x[k]=l+c+(m||n?"/"+(n?u+c:"")+(m?"/"+(v+c):""):"");b+="f "+x.join(" ")+"\n"}}else console.warn("THREE.OBJExporter.parseMesh(): geometry type unsupported",h);l+=r;u+=e;v+=t}if(f instanceof THREE.Line){r=0;e=f.geometry;t=f.type;e instanceof THREE.Geometry&&(e=(new THREE.BufferGeometry).setFromObject(f));if(e instanceof
THREE.BufferGeometry){e=e.getAttribute("position");b+="o "+f.name+"\n";if(void 0!==e)for(a=0,d=e.count;a<d;a++,r++)g.x=e.getX(a),g.y=e.getY(a),g.z=e.getZ(a),g.applyMatrix4(f.matrixWorld),b+="v "+g.x+" "+g.y+" "+g.z+"\n";if("Line"===t){b+="l ";c=1;for(d=e.count;c<=d;c++)b+=l+c+" ";b+="\n"}if("LineSegments"===t)for(c=1,y=c+1,d=e.count;c<d;c+=2,y=c+1)b+="l "+(l+c)+" "+(l+y)+"\n"}else console.warn("THREE.OBJExporter.parseLine(): geometry type unsupported",e);l+=r}});return b}};