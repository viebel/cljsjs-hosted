(function(){function g(n,g,A,v){function w(a,c,b){c.applyMatrix4(n.matrix);c.applyMatrix4(B);a.push(new p(c.clone(),b.clone()))}function m(a,c){for(var b=[],e=.5*Math.abs(v.dot(c)),d=0;d<a.length;d+=3){var q,r,g,n=0,f,h,l,m;q=a[d+0].position.dot(c)-e;r=a[d+1].position.dot(c)-e;g=a[d+2].position.dot(c)-e;q=0<q;r=0<r;g=0<g;n=(q?1:0)+(r?1:0)+(g?1:0);switch(n){case 0:b.push(a[d]);b.push(a[d+1]);b.push(a[d+2]);break;case 1:q&&(f=a[d+1],h=a[d+2],l=k(a[d],f,c,e),m=k(a[d],h,c,e));if(r){f=a[d];h=a[d+2];l=
k(a[d+1],f,c,e);m=k(a[d+1],h,c,e);b.push(l);b.push(h.clone());b.push(f.clone());b.push(h.clone());b.push(l.clone());b.push(m);break}g&&(f=a[d],h=a[d+1],l=k(a[d+2],f,c,e),m=k(a[d+2],h,c,e));b.push(f.clone());b.push(h.clone());b.push(l);b.push(m);b.push(l.clone());b.push(h.clone());break;case 2:q||(f=a[d].clone(),h=k(f,a[d+1],c,e),l=k(f,a[d+2],c,e),b.push(f),b.push(h),b.push(l)),r||(f=a[d+1].clone(),h=k(f,a[d+2],c,e),l=k(f,a[d],c,e),b.push(f),b.push(h),b.push(l)),g||(f=a[d+2].clone(),h=k(f,a[d],c,e),
l=k(f,a[d+1],c,e),b.push(f),b.push(h),b.push(l))}}return b}function k(a,c,b,e){var d=a.position.dot(b)-e;b=c.position.dot(b)-e;d/=d-b;return new p(new THREE.Vector3(a.position.x+d*(c.position.x-a.position.x),a.position.y+d*(c.position.y-a.position.y),a.position.z+d*(c.position.z-a.position.z)),new THREE.Vector3(a.normal.x+d*(c.normal.x-a.normal.x),a.normal.y+d*(c.normal.y-a.normal.y),a.normal.z+d*(c.normal.z-a.normal.z)))}THREE.BufferGeometry.call(this);var x=[],y=[],z=[],t=new THREE.Vector3,u=new THREE.Matrix4;
u.makeRotationFromEuler(A);u.setPosition(g);var B=(new THREE.Matrix4).getInverse(u);(function(){var a;a=new THREE.BufferGeometry;var c=[],b=new THREE.Vector3,e=new THREE.Vector3;n.geometry.isGeometry?a.fromGeometry(n.geometry):a.copy(n.geometry);var d=a.attributes.position,g=a.attributes.normal;if(null!==a.index){var k=a.index;for(a=0;a<k.count;a++)b.fromBufferAttribute(d,k.getX(a)),e.fromBufferAttribute(g,k.getX(a)),w(c,b,e)}else for(a=0;a<d.count;a++)b.fromBufferAttribute(d,a),e.fromBufferAttribute(g,
a),w(c,b,e);c=m(c,t.set(1,0,0));c=m(c,t.set(-1,0,0));c=m(c,t.set(0,1,0));c=m(c,t.set(0,-1,0));c=m(c,t.set(0,0,1));c=m(c,t.set(0,0,-1));for(a=0;a<c.length;a++)b=c[a],z.push(.5+b.position.x/v.x,.5+b.position.y/v.y),b.position.applyMatrix4(u),x.push(b.position.x,b.position.y,b.position.z),y.push(b.normal.x,b.normal.y,b.normal.z)})();this.addAttribute("position",new THREE.Float32BufferAttribute(x,3));this.addAttribute("normal",new THREE.Float32BufferAttribute(y,3));this.addAttribute("uv",new THREE.Float32BufferAttribute(z,
2))}function p(g,p){this.position=g;this.normal=p}g.prototype=Object.create(THREE.BufferGeometry.prototype);g.prototype.constructor=g;p.prototype.clone=function(){return new p(this.position.clone(),this.normal.clone())};THREE.DecalGeometry=g})();