THREE.ViveController=function(n){THREE.Object3D.call(this);var b=this,a,d=[0,0],f=!1,g=!1,h=!1,k=!1;this.matrixAutoUpdate=!1;this.standingMatrix=new THREE.Matrix4;this.getGamepad=function(){return a};this.getButtonState=function(a){if("thumbpad"===a)return f;if("trigger"===a)return g;if("grips"===a)return h;if("menu"===a)return k};this.update=function(){a:{for(var c=navigator.getGamepads&&navigator.getGamepads(),l=0,m=0;l<c.length;l++){var e=c[l];if(e&&("OpenVR Gamepad"===e.id||e.id.startsWith("Oculus Touch")||
e.id.startsWith("Spatial Controller"))){if(m===n){a=e;break a}m++}}a=void 0}if(void 0!==a&&void 0!==a.pose){if(null!==a.pose){c=a.pose;null!==c.position&&b.position.fromArray(c.position);null!==c.orientation&&b.quaternion.fromArray(c.orientation);b.matrix.compose(b.position,b.quaternion,b.scale);b.matrix.premultiply(b.standingMatrix);b.matrixWorldNeedsUpdate=!0;b.visible=!0;if(d[0]!==a.axes[0]||d[1]!==a.axes[1])d[0]=a.axes[0],d[1]=a.axes[1],b.dispatchEvent({type:"axischanged",axes:d});f!==a.buttons[0].pressed&&
(f=a.buttons[0].pressed,b.dispatchEvent({type:f?"thumbpaddown":"thumbpadup",axes:d}));g!==a.buttons[1].pressed&&(g=a.buttons[1].pressed,b.dispatchEvent({type:g?"triggerdown":"triggerup"}));h!==a.buttons[2].pressed&&(h=a.buttons[2].pressed,b.dispatchEvent({type:h?"gripsdown":"gripsup"}));k!==a.buttons[3].pressed&&(k=a.buttons[3].pressed,b.dispatchEvent({type:k?"menudown":"menuup"}))}}else b.visible=!1}};THREE.ViveController.prototype=Object.create(THREE.Object3D.prototype);
THREE.ViveController.prototype.constructor=THREE.ViveController;