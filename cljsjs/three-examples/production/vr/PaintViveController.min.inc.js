THREE.PaintViveController=function(f){function l(c,a){var m=1.5*a,b=Math.tan(Math.atan(.25))*m*2;c.vertices[0].set(0,-.75,0);c.vertices[1].set(0+b/2,-.75+m,0);c.vertices[2].set(0-b/2,-.75+m,0);c.verticesNeedUpdate=!0}THREE.ViveController.call(this,f);var n=2*Math.PI,g=0,h=new THREE.Color(1,1,1),p=1,a=new THREE.CircleGeometry(1,32),b=new THREE.MeshBasicMaterial({map:function(){var c=document.createElement("canvas");c.width=256;c.height=256;for(var a=c.getContext("2d"),b=a.getImageData(0,0,256,256),
e=b.data,f=new THREE.Color,d=0,g=0;d<e.length;d+=4,g++){var h=g%256/256-.5,k=Math.floor(g/256)/256-.5;f.setHSL(Math.atan2(k,h)/n,1,2*(.5-Math.sqrt(h*h+k*k)));e[d+0]=256*f.r;e[d+1]=256*f.g;e[d+2]=256*f.b;e[d+3]=256}a.putImageData(b,0,0);return new THREE.CanvasTexture(c)}()}),d=new THREE.Mesh(a,b);d.position.set(0,.005,.0495);d.rotation.x=-1.45;d.scale.setScalar(.02);this.add(d);a=new THREE.IcosahedronGeometry(.1,2);b=new THREE.MeshBasicMaterial;b.color=h;var q=new THREE.Mesh(a,b);d.add(q);var e=new THREE.Group;
e.position.set(0,.005,.0495);e.rotation.x=-1.45;e.scale.setScalar(.02);this.add(e);f=new THREE.Shape;f.moveTo(0,-1);f.lineTo(1,1);f.lineTo(-1,1);a=new THREE.ShapeGeometry(f);b=new THREE.MeshBasicMaterial({color:2236962,wireframe:!0});a=new THREE.Mesh(a,b);a.position.z=.001;l(a.geometry,1);e.add(a);a=new THREE.ShapeGeometry(f);b=new THREE.MeshBasicMaterial({side:THREE.DoubleSide});b.color=h;var k=new THREE.Mesh(a,b);k.position.z=.0011;l(k.geometry,.5);e.add(k);e.visible=!1;this.getColor=function(){return h};
this.getSize=function(){return p};this.addEventListener("axischanged",function(c){if(!1!==this.getButtonState("thumbpad")){var a=c.axes[0]/2,b=-c.axes[1]/2;0===g&&(h.setHSL(Math.atan2(b,a)/n,1,2*(.5-Math.sqrt(a*a+b*b))),q.position.set(c.axes[0],c.axes[1],0));1===g&&(c=.5-b,p=2*c,l(k.geometry,c))}});this.addEventListener("gripsdown",function(a){0===g?(g=1,d.visible=!1,e.visible=!0):1===g&&(g=0,d.visible=!0,e.visible=!1)})};THREE.PaintViveController.prototype=Object.create(THREE.ViveController.prototype);
THREE.PaintViveController.prototype.constructor=THREE.PaintViveController;