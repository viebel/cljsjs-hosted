self.importScripts("../../../build/three.js");self.onmessage=function(a){a=a.data;init(a.drawingSurface,a.width,a.height,a.pixelRatio)};var camera,scene,renderer,mesh,clock;
function init(a,b,c,d){camera=new THREE.PerspectiveCamera(70,b/c,1,1E3);camera.position.z=400;scene=new THREE.Scene;clock=new THREE.Clock;(new THREE.ImageBitmapLoader).load("../../textures/crate.gif",function(a){a=new THREE.CanvasTexture(a);a=new THREE.MeshBasicMaterial({map:a});var b=new THREE.BoxBufferGeometry(200,200,200);mesh=new THREE.Mesh(b,a);scene.add(mesh);animate()});renderer=new THREE.WebGLRenderer({antialias:!0,canvas:a});renderer.setPixelRatio(d);renderer.setSize(b,c,!1)}
function animate(){var a=clock.getDelta();mesh.rotation.x+=.2*a;mesh.rotation.y+=.5*a;renderer.render(scene,camera);renderer.context.commit().then(animate)};