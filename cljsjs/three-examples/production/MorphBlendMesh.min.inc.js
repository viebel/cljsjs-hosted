THREE.MorphBlendMesh=function(b,c){THREE.Mesh.call(this,b,c);this.animationsMap={};this.animationsList=[];var d=this.geometry.morphTargets.length;this.createAnimation("__default",0,d-1,d/1);this.setAnimationWeight("__default",1)};
THREE.MorphBlendMesh.prototype=Object.assign(Object.create(THREE.Mesh.prototype),{constructor:THREE.MorphBlendMesh,createAnimation:function(b,c,d,a){c={start:c,end:d,length:d-c+1,fps:a,duration:(d-c)/a,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[b]=c;this.animationsList.push(c)},autoCreateAnimations:function(b){for(var c=/([a-z]+)_?(\d+)/i,d,a={},e=this.geometry,f=0,k=e.morphTargets.length;f<k;f++){var g=e.morphTargets[f].name.match(c);
if(g&&1<g.length){var h=g[1];a[h]||(a[h]={start:Infinity,end:-Infinity});g=a[h];f<g.start&&(g.start=f);f>g.end&&(g.end=f);d||(d=h)}}for(h in a)g=a[h],this.createAnimation(h,g.start,g.end,b);this.firstAnimation=d},setAnimationDirectionForward:function(b){if(b=this.animationsMap[b])b.direction=1,b.directionBackwards=!1},setAnimationDirectionBackward:function(b){if(b=this.animationsMap[b])b.direction=-1,b.directionBackwards=!0},setAnimationFPS:function(b,c){var d=this.animationsMap[b];d&&(d.fps=c,d.duration=
(d.end-d.start)/d.fps)},setAnimationDuration:function(b,c){var d=this.animationsMap[b];d&&(d.duration=c,d.fps=(d.end-d.start)/d.duration)},setAnimationWeight:function(b,c){var d=this.animationsMap[b];d&&(d.weight=c)},setAnimationTime:function(b,c){var d=this.animationsMap[b];d&&(d.time=c)},getAnimationTime:function(b){var c=0;if(b=this.animationsMap[b])c=b.time;return c},getAnimationDuration:function(b){var c=-1;if(b=this.animationsMap[b])c=b.duration;return c},playAnimation:function(b){var c=this.animationsMap[b];
c?(c.time=0,c.active=!0):console.warn("THREE.MorphBlendMesh: animation["+b+"] undefined in .playAnimation()")},stopAnimation:function(b){if(b=this.animationsMap[b])b.active=!1},update:function(b){for(var c=0,d=this.animationsList.length;c<d;c++){var a=this.animationsList[c];if(a.active){var e=a.duration/a.length;a.time+=a.direction*b;if(a.mirroredLoop){if(a.time>a.duration||0>a.time)a.direction*=-1,a.time>a.duration&&(a.time=a.duration,a.directionBackwards=!0),0>a.time&&(a.time=0,a.directionBackwards=
!1)}else a.time%=a.duration,0>a.time&&(a.time+=a.duration);var f=a.start+THREE.Math.clamp(Math.floor(a.time/e),0,a.length-1),k=a.weight;f!==a.currentFrame&&(this.morphTargetInfluences[a.lastFrame]=0,this.morphTargetInfluences[a.currentFrame]=1*k,this.morphTargetInfluences[f]=0,a.lastFrame=a.currentFrame,a.currentFrame=f);e=a.time%e/e;a.directionBackwards&&(e=1-e);a.currentFrame!==a.lastFrame?(this.morphTargetInfluences[a.currentFrame]=e*k,this.morphTargetInfluences[a.lastFrame]=(1-e)*k):this.morphTargetInfluences[a.currentFrame]=
k}}}});