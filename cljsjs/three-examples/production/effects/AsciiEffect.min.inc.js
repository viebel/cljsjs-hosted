THREE.AsciiEffect=function(q,e,a){e=void 0===e?" .:-\x3d+*#%@":e;a||(a={});var v=a.resolution?a.resolution:.15,f=a.scale?a.scale:1,w=a.color?a.color:!1,z=a.alpha?a.alpha:!1,A=a.block?a.block:!1,B=a.invert?a.invert:!1,x,y;a=document.createElement("div");a.style.cursor="default";var m=document.createElement("table");a.appendChild(m);var h,n,k;this.setSize=function(a,e){x=a;y=e;q.setSize(a,e);h=Math.round(x*c);n=Math.round(y*c);l.width=h;l.height=n;k=q.domElement;k.style.backgroundColor&&(m.rows[0].cells[0].style.backgroundColor=
k.style.backgroundColor,m.rows[0].cells[0].style.color=k.style.color);m.cellSpacing=0;m.cellPadding=0;var b=m.style;b.display="inline";b.width=Math.round(h/c*f)+"px";b.height=Math.round(n/c*f)+"px";b.whiteSpace="pre";b.margin="0px";b.padding="0px";b.letterSpacing=g+"px";b.fontFamily=C;b.fontSize=D+"px";b.lineHeight=E+"px";b.textAlign="left";b.textDecoration="none"};this.render=function(a,e){q.render(a,e);r.clearRect(0,0,h,n);r.drawImage(F,0,0,h,n);for(var b=r.getImageData(0,0,h,n).data,c="",f=0;f<
n;f+=2){for(var g=0;g<h;g++){var p=4*(f*h+g),k=b[p],l=b[p+1],u=b[p+2],p=b[p+3],d;d=(.3*k+.59*l+.11*u)/255;0==p&&(d=1);d=Math.floor((1-d)*(t.length-1));B&&(d=t.length-d-1);d=t[d];if(void 0===d||" "==d)d="\x26nbsp;";c=w?c+("\x3cspan style\x3d'color:rgb("+k+","+l+","+u+");"+(A?"background-color:rgb("+k+","+l+","+u+");":"")+(z?"opacity:"+p/255+";":"")+"'\x3e"+d+"\x3c/span\x3e"):c+d}c+="\x3cbr/\x3e"}m.innerHTML="\x3ctr\x3e\x3ctd\x3e"+c+"\x3c/td\x3e\x3c/tr\x3e"};this.domElement=a;a=" .,:;i1tfLCG08@".split("");
var G=" CGO08@".split(""),C="courier new, monospace",F=q.domElement,l=document.createElement("canvas");if(l.getContext){var r=l.getContext("2d");if(r.getImageData){var t=w?G:a;e&&(t=e);var c=.5,c=.25;v&&(c=v);var D=2/c*f,E=2/c*f,g=0;switch(f){case 1:g=-1;break;case 2:case 3:g=-2.1;break;case 4:g=-3.1;break;case 5:g=-4.15}}}};