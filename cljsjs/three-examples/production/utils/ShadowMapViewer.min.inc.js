THREE.ShadowMapViewer=function(e){var d=this,l=void 0!==e.name&&""!==e.name,m,c=new THREE.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,1,10);c.position.set(0,0,2);var h=new THREE.Scene,a=THREE.UnpackDepthRGBAShader,n=new THREE.UniformsUtils.clone(a.uniforms),a=new THREE.ShaderMaterial({uniforms:n,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}),f=new THREE.PlaneBufferGeometry(256,256),g=new THREE.Mesh(f,a);h.add(g);var b,k;l&&
(b=document.createElement("canvas"),a=b.getContext("2d"),a.font="Bold 20px Arial",f=a.measureText(e.name).width,b.width=f,b.height=25,a.font="Bold 20px Arial",a.fillStyle="rgba( 255, 0, 0, 1 )",a.fillText(e.name,0,20),a=new THREE.Texture(b),a.magFilter=THREE.LinearFilter,a.minFilter=THREE.LinearFilter,a.needsUpdate=!0,a=new THREE.MeshBasicMaterial({map:a,side:THREE.DoubleSide}),a.transparent=!0,f=new THREE.PlaneBufferGeometry(b.width,b.height),k=new THREE.Mesh(f,a),h.add(k));this.enabled=!0;this.size=
{width:256,height:256,set:function(a,b){this.width=a;this.height=b;g.scale.set(this.width/256,this.height/256,1);d.position.set(d.position.x,d.position.y)}};this.position={x:10,y:10,set:function(a,c){this.x=a;this.y=c;g.position.set(-window.innerWidth/2+d.size.width/2+this.x,window.innerHeight/2-d.size.height/2-this.y,0);l&&k.position.set(g.position.x,g.position.y-d.size.height/2+b.height/2,0)}};this.render=function(a){this.enabled&&(n.tDiffuse.value=e.shadow.map.texture,m=a.autoClear,a.autoClear=
!1,a.clearDepth(),a.render(h,c),a.autoClear=m)};this.updateForWindowResize=function(){this.enabled&&(c.left=window.innerWidth/-2,c.right=window.innerWidth/2,c.top=window.innerHeight/2,c.bottom=window.innerHeight/-2,c.updateProjectionMatrix(),this.update())};this.update=function(){this.position.set(this.position.x,this.position.y);this.size.set(this.size.width,this.size.height)};this.update()};THREE.ShadowMapViewer.prototype.constructor=THREE.ShadowMapViewer;