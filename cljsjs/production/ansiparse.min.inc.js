ansiparse=function(e){var f=null,g=null,c="",k=[],h=[],a={},l;l=function(){var b,a;c.length?c=c.substr(0,c.length-1):h.length&&(b=h.length-1,a=h[b].text,1===a.length?h.pop():h[b].text=a.substr(0,a.length-1))};for(var d=0;d<e.length;d++)null!=f?""==f&&"["==e[d]?(c&&(a.text=c,h.push(a),a={},c=""),f=null,g=""):(c+=f+e[d],f=null):null!=g?";"==e[d]?(k.push(g),g=""):"m"==e[d]?(k.push(g),g=null,c="",k.forEach(function(b){ansiparse.foregroundColors[b]?a.foreground=ansiparse.foregroundColors[b]:ansiparse.backgroundColors[b]?
a.background=ansiparse.backgroundColors[b]:39==b?delete a.foreground:49==b?delete a.background:ansiparse.styles[b]?a[ansiparse.styles[b]]=!0:22==b?a.bold=!1:23==b?a.italic=!1:24==b&&(a.underline=!1)}),k=[]):g+=e[d]:""==e[d]?f=e[d]:"\b"==e[d]?l():c+=e[d];c&&(a.text=c+(f?f:""),h.push(a));return h};ansiparse.foregroundColors={30:"black",31:"red",32:"green",33:"yellow",34:"blue",35:"magenta",36:"cyan",37:"white",90:"grey"};
ansiparse.backgroundColors={40:"black",41:"red",42:"green",43:"yellow",44:"blue",45:"magenta",46:"cyan",47:"white"};ansiparse.styles={1:"bold",3:"italic",4:"underline"};"object"==typeof module&&"undefined"==typeof window&&(module.exports=ansiparse);