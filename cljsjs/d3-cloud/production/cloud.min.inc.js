(function(K){if("object"===typeof exports&&"undefined"!==typeof module)module.exports=K();else if("function"===typeof define&&define.amd)define([],K);else{var b;b="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this;b=b.d3||(b.d3={});b=b.layout||(b.layout={});b.cloud=K()}})(function(){return function b(d,m,D){function y(z,C){if(!m[z]){if(!d[z]){var t="function"==typeof require&&require;if(!C&&t)return t(z,!0);if(u)return u(z,!0);t=Error("Cannot find module '"+
z+"'");throw t.code="MODULE_NOT_FOUND",t;}t=m[z]={exports:{}};d[z][0].call(t.exports,function(t){var b=d[z][1][t];return y(b?b:t)},t,t.exports,b,d,m,D)}return m[z].exports}for(var u="function"==typeof require&&require,C=0;C<D.length;C++)y(D[C]);return y}({1:[function(b,d,m){function D(a){return a.text}function y(){return"serif"}function u(){return"normal"}function C(a){return Math.sqrt(a.value)}function z(){return 30*(~~(6*Math.random())-3)}function S(){return 1}function t(a){var f=a[0]/a[1];return function(a){return[f*
(a*=.1)*Math.cos(a),a*Math.sin(a)]}}function v(a){for(var f=[],l=-1;++l<a;)f[l]=0;return f}function F(){return document.createElement("canvas")}function r(a){return"function"===typeof a?a:function(){return a}}var B=b("d3-dispatch").dispatch,L=Math.PI/180;d.exports=function(){function a(a){a.width=a.height=1;var f=Math.sqrt(a.getContext("2d").getImageData(0,0,1,1).data.length>>2);a.width=2048/f;a.height=2048/f;a=a.getContext("2d");a.fillStyle=a.strokeStyle="red";a.textAlign="center";return{context:a,
ratio:f}}var f=[256,256],l=D,g=y,b=C,d=u,m=u,M=z,N=S,O=t,J=[],P=Infinity,G=B("word","end"),E=null,H=Math.random,h={},Q=F;h.canvas=function(a){return arguments.length?(Q=r(a),h):Q};h.start=function(){function k(){for(var a=Date.now();Date.now()-a<P&&++y<z&&E;){var k=D[y];k.x=f[0]*(H()+.5)>>1;k.y=f[1]*(H()+.5)>>1;a:{var c=k,e=D,b=y;if(!c.sprite){var l=t.context,q=t.ratio;l.clearRect(0,0,2048/q,2048/q);var g=0,A=0,n=0,p=e.length;for(--b;++b<p;){c=e[b];l.save();l.font=c.style+" "+c.weight+" "+~~((c.size+
1)/q)+"px "+c.font;var s=l.measureText(c.text+"m").width*q,x=c.size<<1;if(c.rotate)var d=Math.sin(c.rotate*L),m=Math.cos(c.rotate*L),w=s*m,v=s*d,m=x*m,s=x*d,s=Math.max(Math.abs(w+s),Math.abs(w-s))+31>>5<<5,x=~~Math.max(Math.abs(v+m),Math.abs(v-m));else s=s+31>>5<<5;x>n&&(n=x);2048<=g+s&&(g=0,A+=n,n=0);if(2048<=A+x)break;l.translate((g+(s>>1))/q,(A+(x>>1))/q);c.rotate&&l.rotate(c.rotate*L);l.fillText(c.text,0,0);c.padding&&(l.lineWidth=2*c.padding,l.strokeText(c.text,0,0));l.restore();c.width=s;c.height=
x;c.xoff=g;c.yoff=A;c.x1=s>>1;c.y1=x>>1;c.x0=-c.x1;c.y0=-c.y1;c.hasText=!0;g+=s}l=l.getImageData(0,0,2048/q,2048/q).data;for(q=[];0<=--b;)if(c=e[b],c.hasText){s=c.width;n=s>>5;x=c.y1-c.y0;for(p=0;p<x*n;p++)q[p]=0;g=c.xoff;if(null==g)break a;A=c.yoff;w=0;v=-1;for(d=0;d<x;d++){for(p=0;p<s;p++)m=l[2048*(A+d)+(g+p)<<2]?1<<31-p%32:0,q[n*d+(p>>5)]|=m,w|=m;w?v=d:(c.y0++,x--,d--,A++)}c.y1=c.y0+v;c.sprite=q.slice(0,(c.y1-c.y0)*n)}}}if(c=k.hasText)a:{c=R;e=k;b=r;g=e.x;A=e.y;s=Math.sqrt(f[0]*f[0]+f[1]*f[1]);
x=O(f);l=.5>H()?1:-1;q=-l;for(p=n=p=void 0;p=x(q+=l);){n=~~p[0];p=~~p[1];if(Math.min(Math.abs(n),Math.abs(p))>=s)break;e.x=g+n;e.y=A+p;if(!(n=0>e.x+e.x0||0>e.y+e.y0||e.x+e.x1>f[0]||e.y+e.y1>f[1])&&(n=b))b:{for(var n=f[0],n=n>>5,p=e.sprite,w=e.width>>5,u=e.x-(w<<4),v=u&127,d=32-v,m=e.y1-e.y0,u=(e.y+e.y0)*n+(u>>5),F=void 0,B=0;B<m;B++){for(var I=F=0;I<=w;I++)if((F<<d|(I<w?(F=p[B*w+I])>>>v:0))&c[u+I]){n=!0;break b}u+=n}n=!1}if(!n&&(!b||e.x+e.x1>b[0].x&&e.x+e.x0<b[1].x&&e.y+e.y1>b[0].y&&e.y+e.y0<b[1].y)){b=
e.sprite;g=e.width>>5;A=f[0]>>5;q=e.x-(g<<4);s=q&127;x=32-s;l=e.y1-e.y0;q=(e.y+e.y0)*A+(q>>5);for(p=0;p<l;p++){for(w=n=0;w<=g;w++)c[q+w]=c[q+w]|n<<x|(w<g?(n=b[p*g+w])>>>s:0);q+=A}delete e.sprite;c=!0;break a}}c=!1}c&&(C.push(k),G.word(k),r?(c=k,e=r[0],b=r[1],c.x+c.x0<e.x&&(e.x=c.x+c.x0),c.y+c.y0<e.y&&(e.y=c.y+c.y0),c.x+c.x1>b.x&&(b.x=c.x+c.x1),c.y+c.y1>b.y&&(b.y=c.y+c.y1)):r=[{x:k.x+k.x0,y:k.y+k.y0},{x:k.x+k.x1,y:k.y+k.y1}],k.x-=f[0]>>1,k.y-=f[1]>>1)}y>=z&&(h.stop(),G.end(C,r))}var t=a(Q()),R=v((f[0]>>
5)*f[1]),r=null,z=J.length,y=-1,C=[],D=J.map(function(a,k){a.text=l.call(this,a,k);a.font=g.call(this,a,k);a.style=d.call(this,a,k);a.weight=m.call(this,a,k);a.rotate=M.call(this,a,k);a.size=~~b.call(this,a,k);a.padding=N.call(this,a,k);return a}).sort(function(a,k){return k.size-a.size});E&&clearInterval(E);E=setInterval(k,0);k();return h};h.stop=function(){E&&(clearInterval(E),E=null);return h};h.timeInterval=function(a){return arguments.length?(P=null==a?Infinity:a,h):P};h.words=function(a){return arguments.length?
(J=a,h):J};h.size=function(a){return arguments.length?(f=[+a[0],+a[1]],h):f};h.font=function(a){return arguments.length?(g=r(a),h):g};h.fontStyle=function(a){return arguments.length?(d=r(a),h):d};h.fontWeight=function(a){return arguments.length?(m=r(a),h):m};h.rotate=function(a){return arguments.length?(M=r(a),h):M};h.text=function(a){return arguments.length?(l=r(a),h):l};h.spiral=function(a){return arguments.length?(O=R[a]||a,h):O};h.fontSize=function(a){return arguments.length?(b=r(a),h):b};h.padding=
function(a){return arguments.length?(N=r(a),h):N};h.random=function(a){return arguments.length?(H=a,h):H};h.on=function(){var a=G.on.apply(G,arguments);return a===G?h:a};return h};var R={archimedean:t,rectangular:function(a){var f=4*a[0]/a[1],b=0,g=0;return function(a){var d=0>a?-1:1;switch(Math.sqrt(1+4*d*a)-d&3){case 0:b+=f;break;case 1:g+=4;break;case 2:b-=f;break;default:g-=4}return[b,g]}}}},{"d3-dispatch":2}],2:[function(b,d,m){(function(b,y){"object"===typeof m&&"undefined"!==typeof d?y(m):
y(b.dispatch={})})(this,function(b){function d(b){function m(b){return function(){for(var d=v[b],a,f=-1,l=d.length;++f<l;)(a=d[f].value)&&a.apply(this,arguments);return B}}var y=-1,t=b.length,v={},u={},r,B=this;for(B.on=function(b,d){var a=b,f=(a+="").indexOf("."),l=a;0<=f?a=a.slice(0,f):l+=".";if(a&&!v.hasOwnProperty(a))throw Error("unknown type: "+a);b={type:a,name:l};if(2>arguments.length)return(d=u[b.name])&&d.value;if(b.type){var a=v[b.type],g=u[b.name];g&&(g.value=null,f=a.indexOf(g),v[b.type]=
a=a.slice(0,f).concat(a.slice(f+1)),delete u[b.name]);d&&(d={value:d},u[b.name]=d,a.push(d))}else if(null==d)for(g in v)if(d=u[g+b.name])d.value=null,a=v[g],f=a.indexOf(d),v[g]=a.slice(0,f).concat(a.slice(f+1)),delete u[d.name];return B};++y<t;){r=b[y]+"";if(!r||r in B)throw Error("illegal or duplicate type: "+r);v[r]=[];B[r]=m(r)}}function m(){return new d(arguments)}m.prototype=d.prototype;b.dispatch=m})},{}]},{},[1])(1)});