(function(b,c){"function"===typeof define&&define.amd?define(function(){return c(b,b.document)}):"undefined"!==typeof module&&module.exports?module.exports=c(b,b.document):b.Shake=c(b,b.document)})("undefined"!==typeof window?window:this,function(b,c){function e(a){this.hasDeviceMotion="ondevicemotion"in b;this.options={threshold:15,timeout:1E3};if("object"===typeof a)for(var d in a)a.hasOwnProperty(d)&&(this.options[d]=a[d]);this.lastTime=new Date;this.lastZ=this.lastY=this.lastX=null;if("function"===
typeof c.CustomEvent)this.event=new c.CustomEvent("shake",{bubbles:!0,cancelable:!0});else if("function"===typeof c.createEvent)this.event=c.createEvent("Event"),this.event.initEvent("shake",!0,!0);else return!1}e.prototype.reset=function(){this.lastTime=new Date;this.lastZ=this.lastY=this.lastX=null};e.prototype.start=function(){this.reset();this.hasDeviceMotion&&b.addEventListener("devicemotion",this,!1)};e.prototype.stop=function(){this.hasDeviceMotion&&b.removeEventListener("devicemotion",this,
!1);this.reset()};e.prototype.devicemotion=function(a){a=a.accelerationIncludingGravity;var d,c=d=0,e=0;if(null!==this.lastX||null!==this.lastY||null!==this.lastZ)if(d=Math.abs(this.lastX-a.x),c=Math.abs(this.lastY-a.y),e=Math.abs(this.lastZ-a.z),d>this.options.threshold&&c>this.options.threshold||d>this.options.threshold&&e>this.options.threshold||c>this.options.threshold&&e>this.options.threshold)d=new Date,d=d.getTime()-this.lastTime.getTime(),d>this.options.timeout&&(b.dispatchEvent(this.event),
this.lastTime=new Date);this.lastX=a.x;this.lastY=a.y;this.lastZ=a.z};e.prototype.handleEvent=function(a){if("function"===typeof this[a.type])return this[a.type](a)};return e});