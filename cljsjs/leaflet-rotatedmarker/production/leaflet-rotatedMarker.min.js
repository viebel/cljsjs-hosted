(function(){var b=L.Marker.prototype._initIcon,c=L.Marker.prototype._setPos,d="msTransform"===L.DomUtil.TRANSFORM;L.Marker.addInitHook(function(){var a=this.options.icon&&this.options.icon.options&&this.options.icon.options.iconAnchor;a&&(a=a[0]+"px "+a[1]+"px");this.options.rotationOrigin=this.options.rotationOrigin||a||"center bottom";this.options.rotationAngle=this.options.rotationAngle||0;this.on("drag",function(a){a.target._applyRotation()})});L.Marker.include({_initIcon:function(){b.call(this)},
_setPos:function(a){c.call(this,a);this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,this._icon.style[L.DomUtil.TRANSFORM]=d?"rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+(" rotateZ("+this.options.rotationAngle+"deg)"))},setRotationAngle:function(a){this.options.rotationAngle=a;this.update();return this},setRotationOrigin:function(a){this.options.rotationOrigin=
a;this.update();return this}})})();